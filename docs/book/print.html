<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>SyntheticData Documentation</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="Professional documentation for SyntheticData - High-performance synthetic enterprise financial data generator">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon-de23e50b.svg">
        <link rel="shortcut icon" href="favicon-8114d1fc.png">
        <link rel="stylesheet" href="css/variables-8adf115d.css">
        <link rel="stylesheet" href="css/general-2459343d.css">
        <link rel="stylesheet" href="css/chrome-ae938929.css">
        <link rel="stylesheet" href="css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="theme/css/custom-10f72185.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex-e207af74.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc-56b2ef65.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">SyntheticData Documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>
                        <a href="https://github.com/ey-asu-rnd/SyntheticData" title="Git repository" aria-label="Git repository">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <div class="hero-section">
<h1 id="syntheticdata"><a class="header" href="#syntheticdata">SyntheticData</a></h1>
<p class="subtitle">High-Performance Synthetic Enterprise Financial Data Generator</p>

<div class="badges">
<p><a href="https://github.com/ey-asu-rnd/SyntheticData"><img src="https://img.shields.io/badge/version-0.1.0-blue.svg" alt="Version"></a>
<a href="https://github.com/ey-asu-rnd/SyntheticData/blob/main/LICENSE"><img src="https://img.shields.io/badge/license-Apache%202.0-green.svg" alt="License"></a>
<a href="https://www.rust-lang.org"><img src="https://img.shields.io/badge/rust-1.75%2B-orange.svg" alt="Rust"></a></p>
</div>

<p class="attribution">Developed by <a href="https://www.ey.com/ch">Ernst &amp; Young Ltd.</a>, Zurich, Switzerland</p>

</div>

<h2 id="what-is-syntheticdata"><a class="header" href="#what-is-syntheticdata">What is SyntheticData?</a></h2>
<p>SyntheticData is a configurable synthetic data generator that produces realistic, interconnected enterprise financial data. It generates General Ledger journal entries, Chart of Accounts, SAP HANA-compatible ACDOCA event logs, document flows, subledger records, and ML-ready graph exports at scale.</p>
<p>The generator produces statistically accurate data based on empirical research from real-world general ledger patterns, ensuring that synthetic datasets exhibit the same characteristics as production data—including Benford’s Law compliance, temporal patterns, and document flow integrity.</p>
<h2 id="quick-links"><a class="header" href="#quick-links">Quick Links</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Section</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><a href="getting-started/README.html">Getting Started</a></td><td>Installation, quick start guide, and demo mode</td></tr>
<tr><td><a href="user-guide/README.html">User Guide</a></td><td>CLI reference, server API, desktop UI</td></tr>
<tr><td><a href="configuration/README.html">Configuration</a></td><td>Complete YAML schema and presets</td></tr>
<tr><td><a href="architecture/README.html">Architecture</a></td><td>System design and data flow</td></tr>
<tr><td><a href="crates/README.html">Crate Reference</a></td><td>Detailed crate documentation</td></tr>
<tr><td><a href="advanced/README.html">Advanced Topics</a></td><td>Anomaly injection, graph export, performance</td></tr>
<tr><td><a href="use-cases/README.html">Use Cases</a></td><td>Fraud detection, audit, compliance</td></tr>
</tbody>
</table>
</div>
<h2 id="key-features"><a class="header" href="#key-features">Key Features</a></h2>
<h3 id="core-data-generation"><a class="header" href="#core-data-generation">Core Data Generation</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Feature</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><strong>Statistical Distributions</strong></td><td>Line item counts, amounts, and patterns based on empirical GL research</td></tr>
<tr><td><strong>Benford’s Law Compliance</strong></td><td>First-digit distribution following Benford’s Law with configurable fraud patterns</td></tr>
<tr><td><strong>Industry Presets</strong></td><td>Manufacturing, Retail, Financial Services, Healthcare, Technology</td></tr>
<tr><td><strong>Chart of Accounts</strong></td><td>Small (~100), Medium (~400), Large (~2500) account structures</td></tr>
<tr><td><strong>Temporal Patterns</strong></td><td>Month-end, quarter-end, year-end volume spikes with working hour modeling</td></tr>
<tr><td><strong>Regional Calendars</strong></td><td>Holiday calendars for US, DE, GB, CN, JP, IN with lunar calendar support</td></tr>
</tbody>
</table>
</div>
<h3 id="enterprise-simulation"><a class="header" href="#enterprise-simulation">Enterprise Simulation</a></h3>
<ul>
<li><strong>Master Data Management</strong>: Vendors, customers, materials, fixed assets, employees with temporal validity</li>
<li><strong>Document Flow Engine</strong>: Complete P2P (Procure-to-Pay) and O2C (Order-to-Cash) processes</li>
<li><strong>Intercompany Transactions</strong>: IC matching, transfer pricing, consolidation eliminations</li>
<li><strong>Balance Coherence</strong>: Opening balances, running balance tracking, trial balance generation</li>
<li><strong>Subledger Simulation</strong>: AR, AP, Fixed Assets, Inventory with GL reconciliation</li>
<li><strong>Currency &amp; FX</strong>: Realistic exchange rates, currency translation, CTA generation</li>
<li><strong>Period Close Engine</strong>: Monthly close, depreciation runs, accruals, year-end closing</li>
</ul>
<h3 id="machine-learning--analytics"><a class="header" href="#machine-learning--analytics">Machine Learning &amp; Analytics</a></h3>
<ul>
<li><strong>Graph Export</strong>: PyTorch Geometric, Neo4j, and DGL formats with train/val/test splits</li>
<li><strong>Anomaly Injection</strong>: 20+ fraud types, errors, process issues with full labeling</li>
<li><strong>Data Quality Variations</strong>: Missing values, format variations, duplicates, typos</li>
</ul>
<h3 id="production-features"><a class="header" href="#production-features">Production Features</a></h3>
<ul>
<li><strong>REST &amp; gRPC APIs</strong>: Streaming generation with authentication and rate limiting</li>
<li><strong>Desktop UI</strong>: Cross-platform Tauri/SvelteKit application</li>
<li><strong>Memory Management</strong>: Configurable limits with OOM prevention</li>
<li><strong>Deterministic Generation</strong>: Seeded RNG for reproducible output</li>
</ul>
<h2 id="performance"><a class="header" href="#performance">Performance</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Metric</th><th>Performance</th></tr>
</thead>
<tbody>
<tr><td>Single-threaded throughput</td><td>~100,000+ entries/second</td></tr>
<tr><td>Parallel scaling</td><td>Linear with available cores</td></tr>
<tr><td>Memory efficiency</td><td>Streaming generation for large volumes</td></tr>
</tbody>
</table>
</div>
<h2 id="use-cases"><a class="header" href="#use-cases">Use Cases</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Use Case</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><strong>Fraud Detection ML</strong></td><td>Train supervised models with labeled fraud patterns</td></tr>
<tr><td><strong>Graph Neural Networks</strong></td><td>Entity relationship graphs for anomaly detection</td></tr>
<tr><td><strong>Audit Analytics</strong></td><td>Test audit procedures with known control exceptions</td></tr>
<tr><td><strong>Process Mining</strong></td><td>OCEL 2.0 event logs for process discovery</td></tr>
<tr><td><strong>ERP Testing</strong></td><td>Load testing with realistic transaction volumes</td></tr>
<tr><td><strong>SOX Compliance</strong></td><td>Test internal control monitoring systems</td></tr>
</tbody>
</table>
</div>
<h2 id="quick-start"><a class="header" href="#quick-start">Quick Start</a></h2>
<pre><code class="language-bash"># Install from source
git clone https://github.com/ey-asu-rnd/SyntheticData.git
cd SyntheticData
cargo build --release

# Run demo mode
./target/release/synth-data generate --demo --output ./output

# Or create a custom configuration
./target/release/synth-data init --industry manufacturing --complexity medium -o config.yaml
./target/release/synth-data generate --config config.yaml --output ./output
</code></pre>
<h2 id="license"><a class="header" href="#license">License</a></h2>
<p>Copyright 2024-2026 Michael Ivertowski, Ernst &amp; Young Ltd., Zurich, Switzerland</p>
<p>Licensed under the Apache License, Version 2.0. See <a href="https://github.com/ey-asu-rnd/SyntheticData/blob/main/LICENSE">LICENSE</a> for details.</p>
<h2 id="support"><a class="header" href="#support">Support</a></h2>
<p>Commercial support, custom development, and enterprise licensing are available upon request. Please contact the author at <a href="mailto:michael.ivertowski@ch.ey.com">michael.ivertowski@ch.ey.com</a> for inquiries.</p>
<hr>
<p><em>SyntheticData is provided “as is” without warranty of any kind. It is intended for testing, development, and educational purposes. Generated data should not be used as a substitute for real financial records.</em></p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="getting-started"><a class="header" href="#getting-started">Getting Started</a></h1>
<p>Welcome to SyntheticData! This section will help you get up and running quickly.</p>
<h2 id="what-youll-learn"><a class="header" href="#what-youll-learn">What You’ll Learn</a></h2>
<ul>
<li><strong><a href="#installation">Installation</a></strong>: Set up SyntheticData on your system</li>
<li><strong><a href="#quick-start-1">Quick Start</a></strong>: Generate your first synthetic dataset</li>
<li><strong><a href="#demo-mode">Demo Mode</a></strong>: Explore SyntheticData with built-in demo presets</li>
</ul>
<h2 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites</a></h2>
<p>Before you begin, ensure you have:</p>
<ul>
<li><strong>Rust 1.75+</strong>: SyntheticData is written in Rust and requires the Rust toolchain</li>
<li><strong>Git</strong>: For cloning the repository</li>
<li><strong>(Optional) Node.js 18+</strong>: Required only for the desktop UI</li>
</ul>
<h2 id="installation-overview"><a class="header" href="#installation-overview">Installation Overview</a></h2>
<pre><code class="language-bash"># Clone and build
git clone https://github.com/ey-asu-rnd/SyntheticData.git
cd SyntheticData
cargo build --release

# The binary is at target/release/synth-data
</code></pre>
<h2 id="first-steps"><a class="header" href="#first-steps">First Steps</a></h2>
<p>The fastest way to explore SyntheticData is through demo mode:</p>
<pre><code class="language-bash">synth-data generate --demo --output ./demo-output
</code></pre>
<p>This generates a complete set of synthetic financial data using sensible defaults.</p>
<h2 id="architecture-at-a-glance"><a class="header" href="#architecture-at-a-glance">Architecture at a Glance</a></h2>
<p>SyntheticData generates interconnected financial data:</p>
<pre><code>┌─────────────────────────────────────────────────────────────┐
│                    Configuration (YAML)                      │
├─────────────────────────────────────────────────────────────┤
│                    Generation Pipeline                       │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐    │
│  │  Master  │→│ Document │→│  Journal │→│  Output  │     │
│  │   Data   │  │  Flows   │  │ Entries  │  │  Files   │     │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘    │
├─────────────────────────────────────────────────────────────┤
│  Output: CSV, JSON, Neo4j, PyTorch Geometric, ACDOCA        │
└─────────────────────────────────────────────────────────────┘
</code></pre>
<h2 id="next-steps"><a class="header" href="#next-steps">Next Steps</a></h2>
<ol>
<li>Follow the <a href="#installation">Installation Guide</a> to set up your environment</li>
<li>Work through the <a href="#quick-start-1">Quick Start Tutorial</a></li>
<li>Explore <a href="#demo-mode">Demo Mode</a> for a hands-on introduction</li>
<li>Review the <a href="#cli-reference">CLI Reference</a> for all available commands</li>
</ol>
<h2 id="getting-help"><a class="header" href="#getting-help">Getting Help</a></h2>
<ul>
<li>Check the <a href="user-guide/README.html">User Guide</a> for detailed usage instructions</li>
<li>Review <a href="configuration/README.html">Configuration</a> for all available options</li>
<li>See <a href="use-cases/README.html">Use Cases</a> for real-world examples</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="installation"><a class="header" href="#installation">Installation</a></h1>
<p>This guide covers installing SyntheticData from source.</p>
<h2 id="prerequisites-1"><a class="header" href="#prerequisites-1">Prerequisites</a></h2>
<h3 id="required"><a class="header" href="#required">Required</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Requirement</th><th>Version</th><th>Purpose</th></tr>
</thead>
<tbody>
<tr><td>Rust</td><td>1.75+</td><td>Compilation</td></tr>
<tr><td>Git</td><td>Any recent</td><td>Clone repository</td></tr>
<tr><td>C compiler</td><td>gcc/clang</td><td>Native dependencies</td></tr>
</tbody>
</table>
</div>
<h3 id="optional"><a class="header" href="#optional">Optional</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Requirement</th><th>Version</th><th>Purpose</th></tr>
</thead>
<tbody>
<tr><td>Node.js</td><td>18+</td><td>Desktop UI</td></tr>
<tr><td>npm</td><td>9+</td><td>Desktop UI dependencies</td></tr>
</tbody>
</table>
</div>
<h2 id="installing-rust"><a class="header" href="#installing-rust">Installing Rust</a></h2>
<p>If you don’t have Rust installed, use rustup:</p>
<pre><code class="language-bash"># Linux/macOS
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh

# Windows
# Download and run rustup-init.exe from https://rustup.rs

# Verify installation
rustc --version
cargo --version
</code></pre>
<h2 id="building-from-source"><a class="header" href="#building-from-source">Building from Source</a></h2>
<h3 id="clone-the-repository"><a class="header" href="#clone-the-repository">Clone the Repository</a></h3>
<pre><code class="language-bash">git clone https://github.com/ey-asu-rnd/SyntheticData.git
cd SyntheticData
</code></pre>
<h3 id="build-release-binary"><a class="header" href="#build-release-binary">Build Release Binary</a></h3>
<pre><code class="language-bash"># Build optimized release binary
cargo build --release

# The binary is at target/release/synth-data
</code></pre>
<h3 id="verify-installation"><a class="header" href="#verify-installation">Verify Installation</a></h3>
<pre><code class="language-bash"># Check version
./target/release/synth-data --version

# View help
./target/release/synth-data --help

# Run quick validation
./target/release/synth-data info
</code></pre>
<h2 id="adding-to-path"><a class="header" href="#adding-to-path">Adding to PATH</a></h2>
<p>To run <code>synth-data</code> from anywhere:</p>
<h3 id="linuxmacos"><a class="header" href="#linuxmacos">Linux/macOS</a></h3>
<pre><code class="language-bash"># Option 1: Symlink to local bin
ln -s $(pwd)/target/release/synth-data ~/.local/bin/synth-data

# Option 2: Copy to system bin (requires sudo)
sudo cp target/release/synth-data /usr/local/bin/

# Option 3: Add target/release to PATH in ~/.bashrc or ~/.zshrc
export PATH="$PATH:/path/to/SyntheticData/target/release"
</code></pre>
<h3 id="windows"><a class="header" href="#windows">Windows</a></h3>
<p>Add the <code>target/release</code> directory to your system PATH environment variable.</p>
<h2 id="building-the-desktop-ui"><a class="header" href="#building-the-desktop-ui">Building the Desktop UI</a></h2>
<p>The desktop UI requires additional setup:</p>
<pre><code class="language-bash"># Navigate to UI crate
cd crates/synth-ui

# Install Node.js dependencies
npm install

# Run in development mode
npm run tauri dev

# Build production release
npm run tauri build
</code></pre>
<h3 id="platform-specific-dependencies"><a class="header" href="#platform-specific-dependencies">Platform-Specific Dependencies</a></h3>
<p><strong>Linux (Ubuntu/Debian):</strong></p>
<pre><code class="language-bash">sudo apt-get install libwebkit2gtk-4.1-dev \
    libgtk-3-dev \
    libayatana-appindicator3-dev \
    librsvg2-dev
</code></pre>
<p><strong>macOS:</strong>
No additional dependencies required.</p>
<p><strong>Windows:</strong>
Install WebView2 runtime (usually pre-installed on Windows 10/11).</p>
<h2 id="running-tests"><a class="header" href="#running-tests">Running Tests</a></h2>
<p>Verify your installation by running the test suite:</p>
<pre><code class="language-bash"># Run all tests
cargo test

# Run tests for a specific crate
cargo test -p synth-core
cargo test -p synth-generators

# Run with output
cargo test -- --nocapture
</code></pre>
<h2 id="development-setup"><a class="header" href="#development-setup">Development Setup</a></h2>
<p>For development work:</p>
<pre><code class="language-bash"># Check code without building
cargo check

# Format code
cargo fmt

# Run lints
cargo clippy

# Build documentation
cargo doc --workspace --no-deps --open
</code></pre>
<h2 id="running-benchmarks"><a class="header" href="#running-benchmarks">Running Benchmarks</a></h2>
<pre><code class="language-bash"># Run all benchmarks
cargo bench

# Run specific benchmark
cargo bench --bench generation_throughput
</code></pre>
<h2 id="troubleshooting"><a class="header" href="#troubleshooting">Troubleshooting</a></h2>
<h3 id="build-failures"><a class="header" href="#build-failures">Build Failures</a></h3>
<p><strong>Missing C compiler:</strong></p>
<pre><code class="language-bash"># Ubuntu/Debian
sudo apt-get install build-essential

# macOS
xcode-select --install

# Fedora/RHEL
sudo dnf install gcc
</code></pre>
<p><strong>Out of memory during build:</strong></p>
<pre><code class="language-bash"># Limit parallel jobs
cargo build --release -j 2
</code></pre>
<h3 id="runtime-issues"><a class="header" href="#runtime-issues">Runtime Issues</a></h3>
<p><strong>Permission denied:</strong></p>
<pre><code class="language-bash">chmod +x target/release/synth-data
</code></pre>
<p><strong>Library not found (Linux):</strong></p>
<pre><code class="language-bash"># Check for missing dependencies
ldd target/release/synth-data
</code></pre>
<h2 id="next-steps-1"><a class="header" href="#next-steps-1">Next Steps</a></h2>
<ul>
<li>Follow the <a href="#quick-start-1">Quick Start Guide</a> to generate your first dataset</li>
<li>Explore <a href="#demo-mode">Demo Mode</a> for a hands-on introduction</li>
<li>Review the <a href="#cli-reference">CLI Reference</a> for all commands</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="quick-start-1"><a class="header" href="#quick-start-1">Quick Start</a></h1>
<p>This guide walks you through generating your first synthetic financial dataset.</p>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>The typical workflow is:</p>
<ol>
<li><strong>Initialize</strong> a configuration file</li>
<li><strong>Validate</strong> the configuration</li>
<li><strong>Generate</strong> synthetic data</li>
<li><strong>Review</strong> the output</li>
</ol>
<h2 id="step-1-initialize-configuration"><a class="header" href="#step-1-initialize-configuration">Step 1: Initialize Configuration</a></h2>
<p>Create a configuration file for your industry and complexity needs:</p>
<pre><code class="language-bash"># Manufacturing company with medium complexity (~400 accounts)
synth-data init --industry manufacturing --complexity medium -o config.yaml
</code></pre>
<h3 id="available-industry-presets"><a class="header" href="#available-industry-presets">Available Industry Presets</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Industry</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>manufacturing</code></td><td>Production, inventory, cost accounting</td></tr>
<tr><td><code>retail</code></td><td>Sales, inventory, customer transactions</td></tr>
<tr><td><code>financial_services</code></td><td>Banking, investments, regulatory reporting</td></tr>
<tr><td><code>healthcare</code></td><td>Patient revenue, medical supplies, compliance</td></tr>
<tr><td><code>technology</code></td><td>R&amp;D, SaaS revenue, deferred revenue</td></tr>
</tbody>
</table>
</div>
<h3 id="complexity-levels"><a class="header" href="#complexity-levels">Complexity Levels</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Level</th><th>Accounts</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>small</code></td><td>~100</td><td>Simple chart of accounts</td></tr>
<tr><td><code>medium</code></td><td>~400</td><td>Typical mid-size company</td></tr>
<tr><td><code>large</code></td><td>~2500</td><td>Enterprise-scale structure</td></tr>
</tbody>
</table>
</div>
<h2 id="step-2-review-configuration"><a class="header" href="#step-2-review-configuration">Step 2: Review Configuration</a></h2>
<p>Open <code>config.yaml</code> to review and customize:</p>
<pre><code class="language-yaml">global:
  seed: 42                        # For reproducible generation
  industry: manufacturing
  start_date: 2024-01-01
  period_months: 12
  group_currency: USD

companies:
  - code: "1000"
    name: "Headquarters"
    currency: USD
    country: US
    volume_weight: 1.0

transactions:
  target_count: 100000            # Number of journal entries

fraud:
  enabled: true
  fraud_rate: 0.005               # 0.5% fraud transactions

output:
  format: csv
  compression: none
</code></pre>
<p>See the <a href="configuration/README.html">Configuration Guide</a> for all options.</p>
<h2 id="step-3-validate-configuration"><a class="header" href="#step-3-validate-configuration">Step 3: Validate Configuration</a></h2>
<p>Check your configuration for errors:</p>
<pre><code class="language-bash">synth-data validate --config config.yaml
</code></pre>
<p>The validator checks:</p>
<ul>
<li>Required fields are present</li>
<li>Values are within valid ranges</li>
<li>Distribution weights sum to 1.0</li>
<li>Dates are consistent</li>
</ul>
<h2 id="step-4-generate-data"><a class="header" href="#step-4-generate-data">Step 4: Generate Data</a></h2>
<p>Run the generation:</p>
<pre><code class="language-bash">synth-data generate --config config.yaml --output ./output
</code></pre>
<p>You’ll see a progress bar:</p>
<pre><code>Generating synthetic data...
[████████████████████████████████] 100000/100000 entries
Generation complete in 1.2s
</code></pre>
<h2 id="step-5-explore-output"><a class="header" href="#step-5-explore-output">Step 5: Explore Output</a></h2>
<p>The output directory contains organized subdirectories:</p>
<pre><code>output/
├── master_data/
│   ├── vendors.csv
│   ├── customers.csv
│   ├── materials.csv
│   └── employees.csv
├── transactions/
│   ├── journal_entries.csv
│   ├── acdoca.csv
│   ├── purchase_orders.csv
│   └── vendor_invoices.csv
├── subledgers/
│   ├── ar_open_items.csv
│   └── ap_open_items.csv
├── period_close/
│   └── trial_balances/
├── labels/
│   ├── anomaly_labels.csv
│   └── fraud_labels.csv
└── controls/
    └── internal_controls.csv
</code></pre>
<h2 id="common-customizations"><a class="header" href="#common-customizations">Common Customizations</a></h2>
<h3 id="generate-more-data"><a class="header" href="#generate-more-data">Generate More Data</a></h3>
<pre><code class="language-yaml">transactions:
  target_count: 1000000           # 1 million entries
</code></pre>
<h3 id="enable-graph-export"><a class="header" href="#enable-graph-export">Enable Graph Export</a></h3>
<pre><code class="language-yaml">graph_export:
  enabled: true
  formats:
    - pytorch_geometric
    - neo4j
</code></pre>
<h3 id="add-anomaly-injection"><a class="header" href="#add-anomaly-injection">Add Anomaly Injection</a></h3>
<pre><code class="language-yaml">anomaly_injection:
  enabled: true
  total_rate: 0.02                # 2% anomaly rate
  generate_labels: true           # For ML training
</code></pre>
<h3 id="multiple-companies"><a class="header" href="#multiple-companies">Multiple Companies</a></h3>
<pre><code class="language-yaml">companies:
  - code: "1000"
    name: "Headquarters"
    currency: USD
    volume_weight: 0.6

  - code: "2000"
    name: "European Subsidiary"
    currency: EUR
    volume_weight: 0.4
</code></pre>
<h2 id="next-steps-2"><a class="header" href="#next-steps-2">Next Steps</a></h2>
<ul>
<li>Explore <a href="#demo-mode">Demo Mode</a> for built-in presets</li>
<li>Learn the <a href="#cli-reference">CLI Reference</a></li>
<li>Review <a href="#output-formats-1">Output Formats</a></li>
<li>See <a href="configuration/README.html">Configuration</a> for all options</li>
</ul>
<h2 id="quick-reference"><a class="header" href="#quick-reference">Quick Reference</a></h2>
<pre><code class="language-bash"># Common commands
synth-data init --industry &lt;industry&gt; --complexity &lt;level&gt; -o config.yaml
synth-data validate --config config.yaml
synth-data generate --config config.yaml --output ./output
synth-data generate --demo --output ./demo-output
synth-data info                   # Show available presets
</code></pre>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="demo-mode"><a class="header" href="#demo-mode">Demo Mode</a></h1>
<p>Demo mode provides a quick way to explore SyntheticData without creating a configuration file. It uses sensible defaults to generate a complete synthetic dataset.</p>
<h2 id="running-demo-mode"><a class="header" href="#running-demo-mode">Running Demo Mode</a></h2>
<pre><code class="language-bash">synth-data generate --demo --output ./demo-output
</code></pre>
<h2 id="what-demo-mode-generates"><a class="header" href="#what-demo-mode-generates">What Demo Mode Generates</a></h2>
<p>Demo mode creates a comprehensive dataset with:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Category</th><th>Contents</th></tr>
</thead>
<tbody>
<tr><td><strong>Master Data</strong></td><td>Vendors, customers, materials, employees</td></tr>
<tr><td><strong>Transactions</strong></td><td>~10,000 journal entries</td></tr>
<tr><td><strong>Document Flows</strong></td><td>P2P and O2C process documents</td></tr>
<tr><td><strong>Subledgers</strong></td><td>AR and AP records</td></tr>
<tr><td><strong>Period Close</strong></td><td>Trial balances</td></tr>
<tr><td><strong>Controls</strong></td><td>Internal control mappings</td></tr>
</tbody>
</table>
</div>
<h2 id="demo-configuration"><a class="header" href="#demo-configuration">Demo Configuration</a></h2>
<p>Demo mode uses these defaults:</p>
<pre><code class="language-yaml">global:
  industry: manufacturing
  start_date: 2024-01-01
  period_months: 3
  group_currency: USD

companies:
  - code: "1000"
    name: "Demo Company"
    currency: USD
    country: US

chart_of_accounts:
  complexity: medium              # ~400 accounts

transactions:
  target_count: 10000

fraud:
  enabled: true
  fraud_rate: 0.005

anomaly_injection:
  enabled: true
  total_rate: 0.01
  generate_labels: true

output:
  format: csv
</code></pre>
<h2 id="output-structure"><a class="header" href="#output-structure">Output Structure</a></h2>
<p>After running demo mode, explore the output:</p>
<pre><code class="language-bash">tree demo-output/
</code></pre>
<pre><code>demo-output/
├── master_data/
│   ├── chart_of_accounts.csv     # GL accounts
│   ├── vendors.csv               # Vendor master
│   ├── customers.csv             # Customer master
│   ├── materials.csv             # Material/product master
│   └── employees.csv             # Employee/user master
├── transactions/
│   ├── journal_entries.csv       # Main JE file
│   ├── acdoca.csv                # SAP HANA format
│   ├── purchase_orders.csv       # P2P documents
│   ├── goods_receipts.csv
│   ├── vendor_invoices.csv
│   ├── payments.csv
│   ├── sales_orders.csv          # O2C documents
│   ├── deliveries.csv
│   ├── customer_invoices.csv
│   └── customer_receipts.csv
├── subledgers/
│   ├── ar_open_items.csv
│   ├── ap_open_items.csv
│   └── inventory_positions.csv
├── period_close/
│   └── trial_balances/
│       ├── 2024_01.csv
│       ├── 2024_02.csv
│       └── 2024_03.csv
├── labels/
│   ├── anomaly_labels.csv        # For ML training
│   └── fraud_labels.csv
└── controls/
    ├── internal_controls.csv
    └── sod_rules.csv
</code></pre>
<h2 id="exploring-the-data"><a class="header" href="#exploring-the-data">Exploring the Data</a></h2>
<h3 id="journal-entries"><a class="header" href="#journal-entries">Journal Entries</a></h3>
<pre><code class="language-bash">head -5 demo-output/transactions/journal_entries.csv
</code></pre>
<p>Key fields:</p>
<ul>
<li><code>document_id</code>: Unique transaction identifier</li>
<li><code>posting_date</code>: When the entry was posted</li>
<li><code>company_code</code>: Company identifier</li>
<li><code>account_number</code>: GL account</li>
<li><code>debit_amount</code> / <code>credit_amount</code>: Entry amounts</li>
<li><code>is_fraud</code>: Fraud label (true/false)</li>
<li><code>is_anomaly</code>: Anomaly label</li>
</ul>
<h3 id="fraud-labels"><a class="header" href="#fraud-labels">Fraud Labels</a></h3>
<pre><code class="language-bash"># View fraud transactions
grep "true" demo-output/labels/fraud_labels.csv | head
</code></pre>
<h3 id="trial-balance"><a class="header" href="#trial-balance">Trial Balance</a></h3>
<pre><code class="language-bash"># Check balance coherence
head demo-output/period_close/trial_balances/2024_01.csv
</code></pre>
<h2 id="customizing-demo-output"><a class="header" href="#customizing-demo-output">Customizing Demo Output</a></h2>
<p>You can combine demo mode with some options:</p>
<pre><code class="language-bash"># Change output directory
synth-data generate --demo --output ./my-demo

# Use demo as starting point, then create config
synth-data init --industry manufacturing --complexity medium -o config.yaml
# Edit config.yaml as needed
synth-data generate --config config.yaml --output ./output
</code></pre>
<h2 id="use-cases-for-demo-mode"><a class="header" href="#use-cases-for-demo-mode">Use Cases for Demo Mode</a></h2>
<h3 id="quick-exploration"><a class="header" href="#quick-exploration">Quick Exploration</a></h3>
<p>Test SyntheticData’s capabilities before creating a custom configuration.</p>
<h3 id="development-testing"><a class="header" href="#development-testing">Development Testing</a></h3>
<p>Generate test data quickly for development purposes.</p>
<h3 id="training--workshops"><a class="header" href="#training--workshops">Training &amp; Workshops</a></h3>
<p>Provide sample data for training sessions without complex setup.</p>
<h3 id="benchmarking"><a class="header" href="#benchmarking">Benchmarking</a></h3>
<p>Establish baseline performance metrics.</p>
<h2 id="moving-beyond-demo-mode"><a class="header" href="#moving-beyond-demo-mode">Moving Beyond Demo Mode</a></h2>
<p>When you’re ready for more control:</p>
<ol>
<li>
<p><strong>Create a configuration file:</strong></p>
<pre><code class="language-bash">synth-data init --industry &lt;your-industry&gt; -o config.yaml
</code></pre>
</li>
<li>
<p><strong>Customize settings:</strong></p>
<ul>
<li>Adjust transaction volume</li>
<li>Configure multiple companies</li>
<li>Enable graph export</li>
<li>Fine-tune fraud/anomaly rates</li>
</ul>
</li>
<li>
<p><strong>Generate with your config:</strong></p>
<pre><code class="language-bash">synth-data generate --config config.yaml --output ./output
</code></pre>
</li>
</ol>
<h2 id="next-steps-3"><a class="header" href="#next-steps-3">Next Steps</a></h2>
<ul>
<li>Review <a href="#quick-start-1">Quick Start</a> for custom configurations</li>
<li>Learn the <a href="#cli-reference">CLI Reference</a></li>
<li>Explore <a href="configuration/README.html">Configuration Options</a></li>
<li>See <a href="use-cases/README.html">Use Cases</a> for real-world examples</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="user-guide"><a class="header" href="#user-guide">User Guide</a></h1>
<p>This section covers the different ways to use SyntheticData.</p>
<h2 id="interfaces"><a class="header" href="#interfaces">Interfaces</a></h2>
<p>SyntheticData offers three interfaces:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Interface</th><th>Use Case</th></tr>
</thead>
<tbody>
<tr><td><strong><a href="#cli-reference">CLI</a></strong></td><td>Command-line generation, scripting, automation</td></tr>
<tr><td><strong><a href="#server-api">Server API</a></strong></td><td>REST/gRPC/WebSocket for applications</td></tr>
<tr><td><strong><a href="#desktop-ui">Desktop UI</a></strong></td><td>Visual configuration and monitoring</td></tr>
</tbody>
</table>
</div>
<h2 id="quick-comparison"><a class="header" href="#quick-comparison">Quick Comparison</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Feature</th><th>CLI</th><th>Server</th><th>Desktop UI</th></tr>
</thead>
<tbody>
<tr><td>Configuration editing</td><td>YAML files</td><td>API endpoints</td><td>Visual forms</td></tr>
<tr><td>Batch generation</td><td>Yes</td><td>Yes</td><td>Yes</td></tr>
<tr><td>Streaming generation</td><td>No</td><td>Yes</td><td>Yes (view)</td></tr>
<tr><td>Progress monitoring</td><td>Progress bar</td><td>WebSocket</td><td>Real-time</td></tr>
<tr><td>Scripting/automation</td><td>Yes</td><td>Yes</td><td>No</td></tr>
<tr><td>Visual feedback</td><td>Minimal</td><td>None</td><td>Full</td></tr>
</tbody>
</table>
</div>
<h2 id="cli-overview"><a class="header" href="#cli-overview">CLI Overview</a></h2>
<p>The command-line interface (<code>synth-data</code>) is ideal for:</p>
<ul>
<li>Batch generation</li>
<li>CI/CD pipelines</li>
<li>Scripting and automation</li>
<li>Server environments</li>
</ul>
<pre><code class="language-bash">synth-data generate --config config.yaml --output ./output
</code></pre>
<h2 id="server-overview"><a class="header" href="#server-overview">Server Overview</a></h2>
<p>The server (<code>synth-server</code>) provides:</p>
<ul>
<li>REST API for configuration and control</li>
<li>gRPC for high-performance integration</li>
<li>WebSocket for real-time streaming</li>
</ul>
<pre><code class="language-bash">cargo run -p synth-server -- --port 3000
</code></pre>
<h2 id="desktop-ui-overview"><a class="header" href="#desktop-ui-overview">Desktop UI Overview</a></h2>
<p>The desktop application offers:</p>
<ul>
<li>Visual configuration editor</li>
<li>Industry preset selector</li>
<li>Real-time generation monitoring</li>
<li>Cross-platform support (Windows, macOS, Linux)</li>
</ul>
<pre><code class="language-bash">cd crates/synth-ui &amp;&amp; npm run tauri dev
</code></pre>
<h2 id="output-formats"><a class="header" href="#output-formats">Output Formats</a></h2>
<p>SyntheticData produces various output formats:</p>
<ul>
<li><strong>CSV</strong>: Standard tabular data</li>
<li><strong>JSON</strong>: Structured data with nested objects</li>
<li><strong>ACDOCA</strong>: SAP HANA Universal Journal format</li>
<li><strong>PyTorch Geometric</strong>: ML-ready graph tensors</li>
<li><strong>Neo4j</strong>: Graph database import format</li>
</ul>
<p>See <a href="#output-formats-1">Output Formats</a> for details.</p>
<h2 id="choosing-an-interface"><a class="header" href="#choosing-an-interface">Choosing an Interface</a></h2>
<p><strong>Use the CLI if you:</strong></p>
<ul>
<li>Need to automate generation</li>
<li>Work in headless/server environments</li>
<li>Prefer command-line tools</li>
<li>Want to integrate with shell scripts</li>
</ul>
<p><strong>Use the Server if you:</strong></p>
<ul>
<li>Build applications that consume synthetic data</li>
<li>Need streaming generation</li>
<li>Want API-based control</li>
<li>Integrate with microservices</li>
</ul>
<p><strong>Use the Desktop UI if you:</strong></p>
<ul>
<li>Prefer visual configuration</li>
<li>Want to explore options interactively</li>
<li>Need real-time monitoring</li>
<li>Are new to SyntheticData</li>
</ul>
<h2 id="next-steps-4"><a class="header" href="#next-steps-4">Next Steps</a></h2>
<ul>
<li><a href="#cli-reference">CLI Reference</a> - Complete command documentation</li>
<li><a href="#server-api">Server API</a> - REST, gRPC, and WebSocket endpoints</li>
<li><a href="#desktop-ui">Desktop UI</a> - Desktop application guide</li>
<li><a href="#output-formats-1">Output Formats</a> - Detailed output file documentation</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="cli-reference"><a class="header" href="#cli-reference">CLI Reference</a></h1>
<p>The <code>synth-data</code> command-line tool provides commands for generating synthetic financial data.</p>
<h2 id="installation-1"><a class="header" href="#installation-1">Installation</a></h2>
<p>After building the project, the binary is at <code>target/release/synth-data</code>.</p>
<pre><code class="language-bash">cargo build --release
./target/release/synth-data --help
</code></pre>
<h2 id="global-options"><a class="header" href="#global-options">Global Options</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Option</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>-h, --help</code></td><td>Show help information</td></tr>
<tr><td><code>-V, --version</code></td><td>Show version number</td></tr>
<tr><td><code>-v, --verbose</code></td><td>Enable verbose output</td></tr>
<tr><td><code>-q, --quiet</code></td><td>Suppress non-error output</td></tr>
</tbody>
</table>
</div>
<h2 id="commands"><a class="header" href="#commands">Commands</a></h2>
<h3 id="generate"><a class="header" href="#generate">generate</a></h3>
<p>Generate synthetic financial data.</p>
<pre><code class="language-bash">synth-data generate [OPTIONS]
</code></pre>
<p><strong>Options:</strong></p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Option</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>--config &lt;PATH&gt;</code></td><td>Path</td><td>Configuration YAML file</td></tr>
<tr><td><code>--demo</code></td><td>Flag</td><td>Use demo preset instead of config</td></tr>
<tr><td><code>--output &lt;DIR&gt;</code></td><td>Path</td><td>Output directory (required)</td></tr>
<tr><td><code>--format &lt;FMT&gt;</code></td><td>String</td><td>Output format: csv, json</td></tr>
<tr><td><code>--seed &lt;NUM&gt;</code></td><td>u64</td><td>Override random seed</td></tr>
</tbody>
</table>
</div>
<p><strong>Examples:</strong></p>
<pre><code class="language-bash"># Generate with configuration file
synth-data generate --config config.yaml --output ./output

# Use demo mode
synth-data generate --demo --output ./demo-output

# Override seed for reproducibility
synth-data generate --config config.yaml --output ./output --seed 12345

# JSON output format
synth-data generate --config config.yaml --output ./output --format json
</code></pre>
<h3 id="init"><a class="header" href="#init">init</a></h3>
<p>Create a new configuration file from industry presets.</p>
<pre><code class="language-bash">synth-data init [OPTIONS]
</code></pre>
<p><strong>Options:</strong></p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Option</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>--industry &lt;NAME&gt;</code></td><td>String</td><td>Industry preset</td></tr>
<tr><td><code>--complexity &lt;LEVEL&gt;</code></td><td>String</td><td>small, medium, large</td></tr>
<tr><td><code>-o, --output &lt;PATH&gt;</code></td><td>Path</td><td>Output file path</td></tr>
</tbody>
</table>
</div>
<p><strong>Available Industries:</strong></p>
<ul>
<li><code>manufacturing</code></li>
<li><code>retail</code></li>
<li><code>financial_services</code></li>
<li><code>healthcare</code></li>
<li><code>technology</code></li>
</ul>
<p><strong>Examples:</strong></p>
<pre><code class="language-bash"># Create manufacturing config
synth-data init --industry manufacturing --complexity medium -o config.yaml

# Create large retail config
synth-data init --industry retail --complexity large -o retail.yaml
</code></pre>
<h3 id="validate"><a class="header" href="#validate">validate</a></h3>
<p>Validate a configuration file.</p>
<pre><code class="language-bash">synth-data validate --config &lt;PATH&gt;
</code></pre>
<p><strong>Options:</strong></p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Option</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>--config &lt;PATH&gt;</code></td><td>Path</td><td>Configuration file to validate</td></tr>
</tbody>
</table>
</div>
<p><strong>Example:</strong></p>
<pre><code class="language-bash">synth-data validate --config config.yaml
</code></pre>
<p><strong>Validation Checks:</strong></p>
<ul>
<li>Required fields present</li>
<li>Value ranges (period_months: 1-120)</li>
<li>Distribution weights sum to 1.0</li>
<li>Date consistency</li>
<li>Company code uniqueness</li>
</ul>
<h3 id="info"><a class="header" href="#info">info</a></h3>
<p>Display available presets and configuration options.</p>
<pre><code class="language-bash">synth-data info
</code></pre>
<p><strong>Output includes:</strong></p>
<ul>
<li>Available industry presets</li>
<li>Complexity levels</li>
<li>Supported output formats</li>
<li>Feature capabilities</li>
</ul>
<h2 id="signal-handling-unix"><a class="header" href="#signal-handling-unix">Signal Handling (Unix)</a></h2>
<p>On Unix systems, you can pause and resume generation:</p>
<pre><code class="language-bash"># Start generation in background
synth-data generate --config config.yaml --output ./output &amp;

# Pause generation
kill -USR1 $(pgrep synth-data)

# Resume generation
kill -USR1 $(pgrep synth-data)
</code></pre>
<h2 id="exit-codes"><a class="header" href="#exit-codes">Exit Codes</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Code</th><th>Meaning</th></tr>
</thead>
<tbody>
<tr><td>0</td><td>Success</td></tr>
<tr><td>1</td><td>General error</td></tr>
<tr><td>2</td><td>Configuration error</td></tr>
<tr><td>3</td><td>I/O error</td></tr>
</tbody>
</table>
</div>
<h2 id="environment-variables"><a class="header" href="#environment-variables">Environment Variables</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Variable</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>SYNTH_DATA_LOG</code></td><td>Log level (error, warn, info, debug, trace)</td></tr>
<tr><td><code>SYNTH_DATA_THREADS</code></td><td>Number of worker threads</td></tr>
</tbody>
</table>
</div>
<p><strong>Example:</strong></p>
<pre><code class="language-bash">SYNTH_DATA_LOG=debug synth-data generate --config config.yaml --output ./output
</code></pre>
<h2 id="configuration-file-location"><a class="header" href="#configuration-file-location">Configuration File Location</a></h2>
<p>The tool looks for configuration files in this order:</p>
<ol>
<li>Path specified with <code>--config</code></li>
<li><code>./synth-data.yaml</code> in current directory</li>
<li><code>~/.config/synth-data/config.yaml</code></li>
</ol>
<h2 id="output-directory-structure"><a class="header" href="#output-directory-structure">Output Directory Structure</a></h2>
<p>Generation creates this structure:</p>
<pre><code>output/
├── master_data/
├── transactions/
├── subledgers/
├── period_close/
├── consolidation/
├── fx/
├── graphs/          # If graph_export enabled
├── labels/          # If anomaly/fraud enabled
└── controls/
</code></pre>
<h2 id="scripting-examples"><a class="header" href="#scripting-examples">Scripting Examples</a></h2>
<h3 id="batch-generation"><a class="header" href="#batch-generation">Batch Generation</a></h3>
<pre><code class="language-bash">#!/bin/bash
for industry in manufacturing retail healthcare; do
    synth-data init --industry $industry --complexity medium -o ${industry}.yaml
    synth-data generate --config ${industry}.yaml --output ./output/${industry}
done
</code></pre>
<h3 id="cicd-pipeline"><a class="header" href="#cicd-pipeline">CI/CD Pipeline</a></h3>
<pre><code class="language-yaml"># GitHub Actions example
- name: Generate Test Data
  run: |
    cargo build --release
    ./target/release/synth-data generate --demo --output ./test-data
</code></pre>
<h3 id="reproducible-generation"><a class="header" href="#reproducible-generation">Reproducible Generation</a></h3>
<pre><code class="language-bash"># Same seed produces identical output
synth-data generate --config config.yaml --output ./run1 --seed 42
synth-data generate --config config.yaml --output ./run2 --seed 42
diff -r run1 run2  # No differences
</code></pre>
<h2 id="troubleshooting-1"><a class="header" href="#troubleshooting-1">Troubleshooting</a></h2>
<h3 id="common-issues"><a class="header" href="#common-issues">Common Issues</a></h3>
<p><strong>“Configuration file not found”</strong></p>
<pre><code class="language-bash"># Check file path
ls -la config.yaml
# Use absolute path
synth-data generate --config /full/path/to/config.yaml --output ./output
</code></pre>
<p><strong>“Invalid configuration”</strong></p>
<pre><code class="language-bash"># Validate first
synth-data validate --config config.yaml
</code></pre>
<p><strong>“Permission denied”</strong></p>
<pre><code class="language-bash"># Check output directory permissions
mkdir -p ./output
chmod 755 ./output
</code></pre>
<p><strong>“Out of memory”</strong>
Reduce transaction count or enable streaming in configuration.</p>
<h2 id="see-also"><a class="header" href="#see-also">See Also</a></h2>
<ul>
<li><a href="#quick-start-1">Quick Start</a></li>
<li><a href="configuration/README.html">Configuration Reference</a></li>
<li><a href="#output-formats-1">Output Formats</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="server-api"><a class="header" href="#server-api">Server API</a></h1>
<p>SyntheticData provides a server component with REST, gRPC, and WebSocket APIs for application integration.</p>
<h2 id="starting-the-server"><a class="header" href="#starting-the-server">Starting the Server</a></h2>
<pre><code class="language-bash">cargo run -p synth-server -- --port 3000 --worker-threads 4
</code></pre>
<p><strong>Options:</strong></p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Option</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>--port</code></td><td>3000</td><td>HTTP/WebSocket port</td></tr>
<tr><td><code>--grpc-port</code></td><td>50051</td><td>gRPC port</td></tr>
<tr><td><code>--worker-threads</code></td><td>CPU cores</td><td>Worker thread count</td></tr>
<tr><td><code>--api-key</code></td><td>None</td><td>Required API key</td></tr>
<tr><td><code>--rate-limit</code></td><td>100</td><td>Max requests per minute</td></tr>
</tbody>
</table>
</div>
<h2 id="authentication"><a class="header" href="#authentication">Authentication</a></h2>
<p>When <code>--api-key</code> is set, include it in requests:</p>
<pre><code class="language-bash">curl -H "X-API-Key: your-api-key" http://localhost:3000/api/config
</code></pre>
<h2 id="rest-api"><a class="header" href="#rest-api">REST API</a></h2>
<h3 id="configuration-endpoints"><a class="header" href="#configuration-endpoints">Configuration Endpoints</a></h3>
<h4 id="get-apiconfig"><a class="header" href="#get-apiconfig">GET /api/config</a></h4>
<p>Retrieve current configuration.</p>
<pre><code class="language-bash">curl http://localhost:3000/api/config
</code></pre>
<p><strong>Response:</strong></p>
<pre><code class="language-json">{
  "global": {
    "seed": 42,
    "industry": "manufacturing",
    "start_date": "2024-01-01",
    "period_months": 12
  },
  "transactions": {
    "target_count": 100000
  }
}
</code></pre>
<h4 id="post-apiconfig"><a class="header" href="#post-apiconfig">POST /api/config</a></h4>
<p>Update configuration.</p>
<pre><code class="language-bash">curl -X POST http://localhost:3000/api/config \
  -H "Content-Type: application/json" \
  -d '{"transactions": {"target_count": 50000}}'
</code></pre>
<h4 id="post-apiconfigvalidate"><a class="header" href="#post-apiconfigvalidate">POST /api/config/validate</a></h4>
<p>Validate configuration without applying.</p>
<pre><code class="language-bash">curl -X POST http://localhost:3000/api/config/validate \
  -H "Content-Type: application/json" \
  -d @config.json
</code></pre>
<h3 id="stream-control-endpoints"><a class="header" href="#stream-control-endpoints">Stream Control Endpoints</a></h3>
<h4 id="post-apistreamstart"><a class="header" href="#post-apistreamstart">POST /api/stream/start</a></h4>
<p>Start data generation.</p>
<pre><code class="language-bash">curl -X POST http://localhost:3000/api/stream/start
</code></pre>
<p><strong>Response:</strong></p>
<pre><code class="language-json">{
  "status": "started",
  "stream_id": "abc123"
}
</code></pre>
<h4 id="post-apistreamstop"><a class="header" href="#post-apistreamstop">POST /api/stream/stop</a></h4>
<p>Stop current generation.</p>
<pre><code class="language-bash">curl -X POST http://localhost:3000/api/stream/stop
</code></pre>
<h4 id="post-apistreampause"><a class="header" href="#post-apistreampause">POST /api/stream/pause</a></h4>
<p>Pause generation.</p>
<pre><code class="language-bash">curl -X POST http://localhost:3000/api/stream/pause
</code></pre>
<h4 id="post-apistreamresume"><a class="header" href="#post-apistreamresume">POST /api/stream/resume</a></h4>
<p>Resume paused generation.</p>
<pre><code class="language-bash">curl -X POST http://localhost:3000/api/stream/resume
</code></pre>
<h3 id="pattern-trigger-endpoints"><a class="header" href="#pattern-trigger-endpoints">Pattern Trigger Endpoints</a></h3>
<h4 pattern="" id="post-apistreamtrigger"><a class="header" href="#post-apistreamtrigger">POST /api/stream/trigger/</a></h4>
<p>Trigger special event patterns.</p>
<p><strong>Available patterns:</strong></p>
<ul>
<li><code>month_end</code> - Month-end close activities</li>
<li><code>quarter_end</code> - Quarter-end activities</li>
<li><code>year_end</code> - Year-end close activities</li>
</ul>
<pre><code class="language-bash">curl -X POST http://localhost:3000/api/stream/trigger/month_end
</code></pre>
<h3 id="health-check"><a class="header" href="#health-check">Health Check</a></h3>
<h4 id="get-health"><a class="header" href="#get-health">GET /health</a></h4>
<pre><code class="language-bash">curl http://localhost:3000/health
</code></pre>
<p><strong>Response:</strong></p>
<pre><code class="language-json">{
  "status": "healthy",
  "uptime_seconds": 3600
}
</code></pre>
<h2 id="websocket-api"><a class="header" href="#websocket-api">WebSocket API</a></h2>
<p>Connect to receive real-time events during generation.</p>
<h3 id="connection"><a class="header" href="#connection">Connection</a></h3>
<pre><code class="language-javascript">const ws = new WebSocket('ws://localhost:3000/ws/events');

ws.onmessage = (event) =&gt; {
  const data = JSON.parse(event.data);
  console.log(data);
};
</code></pre>
<h3 id="event-types"><a class="header" href="#event-types">Event Types</a></h3>
<p><strong>Progress Event:</strong></p>
<pre><code class="language-json">{
  "type": "progress",
  "current": 50000,
  "total": 100000,
  "percent": 50.0,
  "rate": 85000.5
}
</code></pre>
<p><strong>Entry Event:</strong></p>
<pre><code class="language-json">{
  "type": "entry",
  "data": {
    "document_id": "abc-123",
    "posting_date": "2024-03-15",
    "account": "1100",
    "debit": "1000.00",
    "credit": "0.00"
  }
}
</code></pre>
<p><strong>Error Event:</strong></p>
<pre><code class="language-json">{
  "type": "error",
  "message": "Memory limit exceeded"
}
</code></pre>
<p><strong>Complete Event:</strong></p>
<pre><code class="language-json">{
  "type": "complete",
  "total_entries": 100000,
  "duration_ms": 1200
}
</code></pre>
<h2 id="grpc-api"><a class="header" href="#grpc-api">gRPC API</a></h2>
<h3 id="proto-definition"><a class="header" href="#proto-definition">Proto Definition</a></h3>
<pre><code class="language-protobuf">syntax = "proto3";

package synth;

service SynthService {
  rpc GetConfig(Empty) returns (Config);
  rpc SetConfig(Config) returns (Status);
  rpc StartGeneration(GenerationRequest) returns (stream Entry);
  rpc StopGeneration(Empty) returns (Status);
}

message Config {
  string yaml = 1;
}

message GenerationRequest {
  optional int64 count = 1;
}

message Entry {
  string document_id = 1;
  string posting_date = 2;
  string company_code = 3;
  repeated LineItem lines = 4;
}

message LineItem {
  string account = 1;
  string debit = 2;
  string credit = 3;
}
</code></pre>
<h3 id="client-example-rust"><a class="header" href="#client-example-rust">Client Example (Rust)</a></h3>
<pre class="playground"><code class="language-rust edition2021">use synth::synth_client::SynthClient;

#[tokio::main]
async fn main() -&gt; Result&lt;(), Box&lt;dyn std::error::Error&gt;&gt; {
    let mut client = SynthClient::connect("http://localhost:50051").await?;

    let request = tonic::Request::new(GenerationRequest { count: Some(1000) });
    let mut stream = client.start_generation(request).await?.into_inner();

    while let Some(entry) = stream.message().await? {
        println!("Entry: {:?}", entry.document_id);
    }

    Ok(())
}</code></pre>
<h2 id="rate-limiting"><a class="header" href="#rate-limiting">Rate Limiting</a></h2>
<p>The server implements sliding window rate limiting:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Metric</th><th>Default</th></tr>
</thead>
<tbody>
<tr><td>Window</td><td>1 minute</td></tr>
<tr><td>Max requests</td><td>100</td></tr>
</tbody>
</table>
</div>
<p>Exceeding the limit returns <code>429 Too Many Requests</code>:</p>
<pre><code class="language-json">{
  "error": "rate_limit_exceeded",
  "retry_after": 30
}
</code></pre>
<h2 id="memory-management"><a class="header" href="#memory-management">Memory Management</a></h2>
<p>The server enforces memory limits:</p>
<pre><code class="language-bash"># Set memory limit (bytes)
cargo run -p synth-server -- --memory-limit 1073741824  # 1GB
</code></pre>
<p>When memory is low:</p>
<ul>
<li>Generation pauses automatically</li>
<li>WebSocket sends warning event</li>
<li>New requests may be rejected</li>
</ul>
<h2 id="error-responses"><a class="header" href="#error-responses">Error Responses</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>HTTP Status</th><th>Meaning</th></tr>
</thead>
<tbody>
<tr><td>400</td><td>Invalid request/configuration</td></tr>
<tr><td>401</td><td>Missing or invalid API key</td></tr>
<tr><td>429</td><td>Rate limit exceeded</td></tr>
<tr><td>500</td><td>Internal server error</td></tr>
<tr><td>503</td><td>Server overloaded</td></tr>
</tbody>
</table>
</div>
<p><strong>Error Response Format:</strong></p>
<pre><code class="language-json">{
  "error": "error_code",
  "message": "Human readable description",
  "details": {}
}
</code></pre>
<h2 id="integration-examples"><a class="header" href="#integration-examples">Integration Examples</a></h2>
<h3 id="python-client"><a class="header" href="#python-client">Python Client</a></h3>
<pre><code class="language-python">import requests
import websocket
import json

BASE_URL = "http://localhost:3000"

# Set configuration
config = {
    "transactions": {"target_count": 10000}
}
requests.post(f"{BASE_URL}/api/config", json=config)

# Start generation
requests.post(f"{BASE_URL}/api/stream/start")

# Monitor via WebSocket
ws = websocket.create_connection(f"ws://localhost:3000/ws/events")
while True:
    event = json.loads(ws.recv())
    if event["type"] == "complete":
        break
    print(f"Progress: {event.get('percent', 0)}%")
</code></pre>
<h3 id="nodejs-client"><a class="header" href="#nodejs-client">Node.js Client</a></h3>
<pre><code class="language-javascript">const axios = require('axios');
const WebSocket = require('ws');

const BASE_URL = 'http://localhost:3000';

async function generate() {
    // Configure
    await axios.post(`${BASE_URL}/api/config`, {
        transactions: { target_count: 10000 }
    });

    // Start
    await axios.post(`${BASE_URL}/api/stream/start`);

    // Monitor
    const ws = new WebSocket('ws://localhost:3000/ws/events');
    ws.on('message', (data) =&gt; {
        const event = JSON.parse(data);
        console.log(event);
    });
}
</code></pre>
<h2 id="see-also-1"><a class="header" href="#see-also-1">See Also</a></h2>
<ul>
<li><a href="#cli-reference">CLI Reference</a></li>
<li><a href="configuration/README.html">Configuration</a></li>
<li><a href="#performance-tuning">Performance Tuning</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="desktop-ui"><a class="header" href="#desktop-ui">Desktop UI</a></h1>
<p>SyntheticData includes a cross-platform desktop application built with Tauri and SvelteKit.</p>
<h2 id="overview-1"><a class="header" href="#overview-1">Overview</a></h2>
<p>The desktop UI provides:</p>
<ul>
<li>Visual configuration editing</li>
<li>Industry preset selection</li>
<li>Real-time generation monitoring</li>
<li>Configuration validation feedback</li>
</ul>
<h2 id="installation-2"><a class="header" href="#installation-2">Installation</a></h2>
<h3 id="prerequisites-2"><a class="header" href="#prerequisites-2">Prerequisites</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Requirement</th><th>Version</th></tr>
</thead>
<tbody>
<tr><td>Node.js</td><td>18+</td></tr>
<tr><td>npm</td><td>9+</td></tr>
<tr><td>Rust</td><td>1.75+</td></tr>
<tr><td>Platform dependencies</td><td>See below</td></tr>
</tbody>
</table>
</div>
<h3 id="platform-dependencies"><a class="header" href="#platform-dependencies">Platform Dependencies</a></h3>
<p><strong>Linux (Ubuntu/Debian):</strong></p>
<pre><code class="language-bash">sudo apt-get install libwebkit2gtk-4.1-dev \
    libgtk-3-dev \
    libayatana-appindicator3-dev \
    librsvg2-dev
</code></pre>
<p><strong>macOS:</strong>
No additional dependencies required.</p>
<p><strong>Windows:</strong>
WebView2 runtime (usually pre-installed on Windows 10/11).</p>
<h3 id="running-in-development"><a class="header" href="#running-in-development">Running in Development</a></h3>
<pre><code class="language-bash">cd crates/synth-ui
npm install
npm run tauri dev
</code></pre>
<h3 id="building-for-production"><a class="header" href="#building-for-production">Building for Production</a></h3>
<pre><code class="language-bash">cd crates/synth-ui
npm run tauri build
</code></pre>
<p>Build outputs are in <code>crates/synth-ui/src-tauri/target/release/bundle/</code>.</p>
<h2 id="application-layout"><a class="header" href="#application-layout">Application Layout</a></h2>
<h3 id="dashboard"><a class="header" href="#dashboard">Dashboard</a></h3>
<p>The main dashboard provides:</p>
<ul>
<li>Quick stats overview</li>
<li>Recent generation history</li>
<li>System status</li>
</ul>
<h3 id="configuration-editor"><a class="header" href="#configuration-editor">Configuration Editor</a></h3>
<p>Access via the sidebar. Configuration is organized into sections:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Section</th><th>Contents</th></tr>
</thead>
<tbody>
<tr><td>Global</td><td>Industry, dates, seed, performance</td></tr>
<tr><td>Companies</td><td>Company definitions and weights</td></tr>
<tr><td>Transactions</td><td>Target count, line items, amounts</td></tr>
<tr><td>Master Data</td><td>Vendors, customers, materials</td></tr>
<tr><td>Document Flows</td><td>P2P, O2C configuration</td></tr>
<tr><td>Financial</td><td>Balance, subledger, FX, period close</td></tr>
<tr><td>Compliance</td><td>Fraud, controls, approval</td></tr>
<tr><td>Analytics</td><td>Graph export, anomaly, data quality</td></tr>
<tr><td>Output</td><td>Formats, compression</td></tr>
</tbody>
</table>
</div>
<h3 id="configuration-sections"><a class="header" href="#configuration-sections">Configuration Sections</a></h3>
<h4 id="global-settings"><a class="header" href="#global-settings">Global Settings</a></h4>
<ul>
<li><strong>Industry</strong>: Select from presets (manufacturing, retail, etc.)</li>
<li><strong>Start Date</strong>: Beginning of simulation period</li>
<li><strong>Period Months</strong>: Duration (1-120 months)</li>
<li><strong>Group Currency</strong>: Base currency for consolidation</li>
<li><strong>Random Seed</strong>: For reproducible generation</li>
</ul>
<h4 id="chart-of-accounts"><a class="header" href="#chart-of-accounts">Chart of Accounts</a></h4>
<ul>
<li><strong>Complexity</strong>: Small (~100), Medium (~400), Large (~2500) accounts</li>
<li><strong>Structure</strong>: Industry-specific account hierarchies</li>
</ul>
<h4 id="transactions"><a class="header" href="#transactions">Transactions</a></h4>
<ul>
<li><strong>Target Count</strong>: Number of journal entries to generate</li>
<li><strong>Line Item Distribution</strong>: Configure line count probabilities</li>
<li><strong>Amount Distribution</strong>: Log-normal parameters, round number bias</li>
</ul>
<h4 id="master-data"><a class="header" href="#master-data">Master Data</a></h4>
<p>Configure generation parameters for:</p>
<ul>
<li>Vendors (count, payment terms, intercompany flags)</li>
<li>Customers (count, credit terms, payment behavior)</li>
<li>Materials (count, valuation methods)</li>
<li>Fixed Assets (count, depreciation methods)</li>
<li>Employees (count, hierarchy depth)</li>
</ul>
<h4 id="document-flows"><a class="header" href="#document-flows">Document Flows</a></h4>
<ul>
<li><strong>P2P (Procure-to-Pay)</strong>: PO → GR → Invoice → Payment rates</li>
<li><strong>O2C (Order-to-Cash)</strong>: SO → Delivery → Invoice → Receipt rates</li>
<li><strong>Three-Way Match</strong>: Tolerance settings</li>
</ul>
<h4 id="financial-settings"><a class="header" href="#financial-settings">Financial Settings</a></h4>
<ul>
<li><strong>Balance</strong>: Opening balance configuration</li>
<li><strong>Subledger</strong>: AR, AP, FA, Inventory settings</li>
<li><strong>FX</strong>: Currency pairs, rate volatility</li>
<li><strong>Period Close</strong>: Accrual, depreciation, closing settings</li>
</ul>
<h4 id="compliance"><a class="header" href="#compliance">Compliance</a></h4>
<ul>
<li><strong>Fraud</strong>: Enable/disable, fraud rate, fraud types</li>
<li><strong>Controls</strong>: Internal control definitions</li>
<li><strong>Approval</strong>: Threshold configuration, SoD rules</li>
</ul>
<h4 id="analytics"><a class="header" href="#analytics">Analytics</a></h4>
<ul>
<li><strong>Graph Export</strong>: Format selection (PyTorch Geometric, Neo4j, DGL)</li>
<li><strong>Anomaly Injection</strong>: Rate, types, labeling</li>
<li><strong>Data Quality</strong>: Missing values, format variations, duplicates</li>
</ul>
<h4 id="output-settings"><a class="header" href="#output-settings">Output Settings</a></h4>
<ul>
<li><strong>Format</strong>: CSV or JSON</li>
<li><strong>Compression</strong>: None, gzip, or zstd</li>
<li><strong>File Organization</strong>: Directory structure options</li>
</ul>
<h3 id="preset-selector"><a class="header" href="#preset-selector">Preset Selector</a></h3>
<p>Quickly load industry presets:</p>
<ol>
<li>Click “Load Preset” in the header</li>
<li>Select industry</li>
<li>Choose complexity level</li>
<li>Click “Apply”</li>
</ol>
<h3 id="real-time-streaming"><a class="header" href="#real-time-streaming">Real-time Streaming</a></h3>
<p>During generation, view:</p>
<ul>
<li>Progress bar with percentage</li>
<li>Entries per second</li>
<li>Memory usage</li>
<li>Recent entries table</li>
</ul>
<p>Access streaming view via “Generate” → “Stream”.</p>
<h3 id="validation"><a class="header" href="#validation">Validation</a></h3>
<p>The UI validates configuration in real-time:</p>
<ul>
<li>Required fields are highlighted</li>
<li>Invalid values show error messages</li>
<li>Distribution weights are checked</li>
<li>Constraints are enforced</li>
</ul>
<h2 id="keyboard-shortcuts"><a class="header" href="#keyboard-shortcuts">Keyboard Shortcuts</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Shortcut</th><th>Action</th></tr>
</thead>
<tbody>
<tr><td><code>Ctrl/Cmd + S</code></td><td>Save configuration</td></tr>
<tr><td><code>Ctrl/Cmd + G</code></td><td>Start generation</td></tr>
<tr><td><code>Ctrl/Cmd + ,</code></td><td>Open settings</td></tr>
<tr><td><code>Escape</code></td><td>Close modal</td></tr>
</tbody>
</table>
</div>
<h2 id="configuration-files"><a class="header" href="#configuration-files">Configuration Files</a></h2>
<p>The UI stores configurations in:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Platform</th><th>Location</th></tr>
</thead>
<tbody>
<tr><td>Linux</td><td><code>~/.config/synth-data/</code></td></tr>
<tr><td>macOS</td><td><code>~/Library/Application Support/synth-data/</code></td></tr>
<tr><td>Windows</td><td><code>%APPDATA%\synth-data\</code></td></tr>
</tbody>
</table>
</div>
<h2 id="exporting-configuration"><a class="header" href="#exporting-configuration">Exporting Configuration</a></h2>
<p>To use your configuration with the CLI:</p>
<ol>
<li>Configure in the UI</li>
<li>Click “Export” → “Export YAML”</li>
<li>Save the <code>.yaml</code> file</li>
<li>Use with CLI: <code>synth-data generate --config exported.yaml --output ./output</code></li>
</ol>
<h2 id="development"><a class="header" href="#development">Development</a></h2>
<h3 id="project-structure"><a class="header" href="#project-structure">Project Structure</a></h3>
<pre><code>crates/synth-ui/
├── src/                      # SvelteKit frontend
│   ├── routes/               # Page routes
│   │   ├── +page.svelte      # Dashboard
│   │   ├── generate/         # Generation views
│   │   └── config/           # Configuration pages
│   └── lib/
│       ├── stores/           # State management
│       └── components/       # Reusable components
├── src-tauri/                # Rust backend
│   └── src/
│       └── main.rs           # Tauri commands
├── package.json
└── tauri.conf.json
</code></pre>
<h3 id="adding-a-configuration-page"><a class="header" href="#adding-a-configuration-page">Adding a Configuration Page</a></h3>
<ol>
<li>Create route in <code>src/routes/config/&lt;section&gt;/+page.svelte</code></li>
<li>Add form components</li>
<li>Connect to config store</li>
<li>Add navigation link</li>
</ol>
<h3 id="debugging"><a class="header" href="#debugging">Debugging</a></h3>
<pre><code class="language-bash"># Enable Tauri dev tools
npm run tauri dev

# View browser console (Ctrl/Cmd + Shift + I in dev mode)
</code></pre>
<h2 id="troubleshooting-2"><a class="header" href="#troubleshooting-2">Troubleshooting</a></h2>
<h3 id="ui-doesnt-start"><a class="header" href="#ui-doesnt-start">UI Doesn’t Start</a></h3>
<pre><code class="language-bash"># Check Node dependencies
npm install

# Rebuild native modules
npm run tauri clean
npm run tauri build
</code></pre>
<h3 id="configuration-not-saving"><a class="header" href="#configuration-not-saving">Configuration Not Saving</a></h3>
<p>Check file permissions in the config directory.</p>
<h3 id="websocket-connection-failed"><a class="header" href="#websocket-connection-failed">WebSocket Connection Failed</a></h3>
<p>Ensure the server is running if using streaming features:</p>
<pre><code class="language-bash">cargo run -p synth-server -- --port 3000
</code></pre>
<h2 id="see-also-2"><a class="header" href="#see-also-2">See Also</a></h2>
<ul>
<li><a href="#cli-reference">CLI Reference</a></li>
<li><a href="#server-api">Server API</a></li>
<li><a href="configuration/README.html">Configuration</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="output-formats-1"><a class="header" href="#output-formats-1">Output Formats</a></h1>
<p>SyntheticData generates multiple file types organized into categories.</p>
<h2 id="output-directory-structure-1"><a class="header" href="#output-directory-structure-1">Output Directory Structure</a></h2>
<pre><code>output/
├── master_data/          # Entity master records
├── transactions/         # Journal entries and documents
├── subledgers/           # Subsidiary ledger records
├── period_close/         # Trial balances and closing
├── consolidation/        # Elimination entries
├── fx/                   # Exchange rates
├── graphs/               # ML-ready graph exports
├── labels/               # Anomaly/fraud labels
└── controls/             # Internal control mappings
</code></pre>
<h2 id="file-formats"><a class="header" href="#file-formats">File Formats</a></h2>
<h3 id="csv"><a class="header" href="#csv">CSV</a></h3>
<p>Default format with standard conventions:</p>
<ul>
<li>UTF-8 encoding</li>
<li>Comma-separated values</li>
<li>Header row included</li>
<li>Quoted strings when needed</li>
</ul>
<p><strong>Example (journal_entries.csv):</strong></p>
<pre><code class="language-csv">document_id,posting_date,company_code,account,description,debit,credit,is_fraud
abc-123,2024-01-15,1000,1100,Customer payment,"1000.00","0.00",false
abc-123,2024-01-15,1000,1200,Cash receipt,"0.00","1000.00",false
</code></pre>
<h3 id="json"><a class="header" href="#json">JSON</a></h3>
<p>Structured format with nested objects:</p>
<p><strong>Example (journal_entries.json):</strong></p>
<pre><code class="language-json">[
  {
    "header": {
      "document_id": "abc-123",
      "posting_date": "2024-01-15",
      "company_code": "1000",
      "source": "Manual",
      "is_fraud": false
    },
    "lines": [
      {
        "account": "1100",
        "description": "Customer payment",
        "debit": "1000.00",
        "credit": "0.00"
      },
      {
        "account": "1200",
        "description": "Cash receipt",
        "debit": "0.00",
        "credit": "1000.00"
      }
    ]
  }
]
</code></pre>
<h3 id="acdoca-sap-hana"><a class="header" href="#acdoca-sap-hana">ACDOCA (SAP HANA)</a></h3>
<p>SAP Universal Journal format with simulation fields:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Field</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>RCLNT</td><td>Client</td></tr>
<tr><td>RLDNR</td><td>Ledger</td></tr>
<tr><td>RBUKRS</td><td>Company code</td></tr>
<tr><td>GJAHR</td><td>Fiscal year</td></tr>
<tr><td>BELNR</td><td>Document number</td></tr>
<tr><td>DOCLN</td><td>Line item</td></tr>
<tr><td>RYEAR</td><td>Year</td></tr>
<tr><td>POPER</td><td>Posting period</td></tr>
<tr><td>RACCT</td><td>Account</td></tr>
<tr><td>DRCRK</td><td>Debit/Credit indicator</td></tr>
<tr><td>HSL</td><td>Amount in local currency</td></tr>
<tr><td>ZSIM_*</td><td>Simulation metadata fields</td></tr>
</tbody>
</table>
</div>
<h2 id="master-data-files"><a class="header" href="#master-data-files">Master Data Files</a></h2>
<h3 id="chart_of_accountscsv"><a class="header" href="#chart_of_accountscsv">chart_of_accounts.csv</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Field</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>account_number</td><td>GL account code</td></tr>
<tr><td>account_name</td><td>Display name</td></tr>
<tr><td>account_type</td><td>Asset, Liability, Equity, Revenue, Expense</td></tr>
<tr><td>account_subtype</td><td>Detailed classification</td></tr>
<tr><td>is_control_account</td><td>Links to subledger</td></tr>
<tr><td>normal_balance</td><td>Debit or Credit</td></tr>
</tbody>
</table>
</div>
<h3 id="vendorscsv"><a class="header" href="#vendorscsv">vendors.csv</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Field</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>vendor_id</td><td>Unique identifier</td></tr>
<tr><td>vendor_name</td><td>Company name</td></tr>
<tr><td>tax_id</td><td>Tax identification</td></tr>
<tr><td>payment_terms</td><td>Standard terms</td></tr>
<tr><td>currency</td><td>Transaction currency</td></tr>
<tr><td>is_intercompany</td><td>IC flag</td></tr>
</tbody>
</table>
</div>
<h3 id="customerscsv"><a class="header" href="#customerscsv">customers.csv</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Field</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>customer_id</td><td>Unique identifier</td></tr>
<tr><td>customer_name</td><td>Company/person name</td></tr>
<tr><td>credit_limit</td><td>Maximum credit</td></tr>
<tr><td>credit_rating</td><td>Rating code</td></tr>
<tr><td>payment_behavior</td><td>Typical payment pattern</td></tr>
</tbody>
</table>
</div>
<h3 id="materialscsv"><a class="header" href="#materialscsv">materials.csv</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Field</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>material_id</td><td>Unique identifier</td></tr>
<tr><td>description</td><td>Material name</td></tr>
<tr><td>material_type</td><td>Classification</td></tr>
<tr><td>valuation_method</td><td>FIFO, LIFO, Avg</td></tr>
<tr><td>standard_cost</td><td>Unit cost</td></tr>
</tbody>
</table>
</div>
<h3 id="employeescsv"><a class="header" href="#employeescsv">employees.csv</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Field</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>employee_id</td><td>Unique identifier</td></tr>
<tr><td>name</td><td>Full name</td></tr>
<tr><td>department</td><td>Department code</td></tr>
<tr><td>manager_id</td><td>Hierarchy link</td></tr>
<tr><td>approval_limit</td><td>Maximum approval amount</td></tr>
<tr><td>transaction_codes</td><td>Authorized T-codes</td></tr>
</tbody>
</table>
</div>
<h2 id="transaction-files"><a class="header" href="#transaction-files">Transaction Files</a></h2>
<h3 id="journal_entriescsv"><a class="header" href="#journal_entriescsv">journal_entries.csv</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Field</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>document_id</td><td>Entry identifier</td></tr>
<tr><td>company_code</td><td>Company</td></tr>
<tr><td>fiscal_year</td><td>Year</td></tr>
<tr><td>fiscal_period</td><td>Period</td></tr>
<tr><td>posting_date</td><td>Date posted</td></tr>
<tr><td>document_date</td><td>Original date</td></tr>
<tr><td>source</td><td>Transaction source</td></tr>
<tr><td>business_process</td><td>Process category</td></tr>
<tr><td>is_fraud</td><td>Fraud indicator</td></tr>
<tr><td>is_anomaly</td><td>Anomaly indicator</td></tr>
</tbody>
</table>
</div>
<h3 id="line-items-embedded-or-separate"><a class="header" href="#line-items-embedded-or-separate">Line Items (embedded or separate)</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Field</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>line_number</td><td>Sequence</td></tr>
<tr><td>account_number</td><td>GL account</td></tr>
<tr><td>cost_center</td><td>Cost center</td></tr>
<tr><td>profit_center</td><td>Profit center</td></tr>
<tr><td>debit_amount</td><td>Debit</td></tr>
<tr><td>credit_amount</td><td>Credit</td></tr>
<tr><td>description</td><td>Line description</td></tr>
</tbody>
</table>
</div>
<h3 id="document-flow-files"><a class="header" href="#document-flow-files">Document Flow Files</a></h3>
<p><strong>purchase_orders.csv:</strong></p>
<ul>
<li>Order header with vendor, dates, status</li>
<li>Line items with materials, quantities, prices</li>
</ul>
<p><strong>goods_receipts.csv:</strong></p>
<ul>
<li>Receipt linked to PO</li>
<li>Quantities received, variances</li>
</ul>
<p><strong>vendor_invoices.csv:</strong></p>
<ul>
<li>Invoice with three-way match status</li>
<li>Payment terms, due date</li>
</ul>
<p><strong>payments.csv:</strong></p>
<ul>
<li>Payment documents</li>
<li>Bank references, cleared invoices</li>
</ul>
<h2 id="subledger-files"><a class="header" href="#subledger-files">Subledger Files</a></h2>
<h3 id="ar_open_itemscsv"><a class="header" href="#ar_open_itemscsv">ar_open_items.csv</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Field</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>customer_id</td><td>Customer reference</td></tr>
<tr><td>invoice_number</td><td>Document number</td></tr>
<tr><td>invoice_date</td><td>Date issued</td></tr>
<tr><td>due_date</td><td>Payment due</td></tr>
<tr><td>original_amount</td><td>Invoice total</td></tr>
<tr><td>open_amount</td><td>Remaining balance</td></tr>
<tr><td>aging_bucket</td><td>0-30, 31-60, 61-90, 90+</td></tr>
</tbody>
</table>
</div>
<h3 id="ap_open_itemscsv"><a class="header" href="#ap_open_itemscsv">ap_open_items.csv</a></h3>
<p>Similar structure for payables.</p>
<h3 id="fa_registercsv"><a class="header" href="#fa_registercsv">fa_register.csv</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Field</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>asset_id</td><td>Asset identifier</td></tr>
<tr><td>description</td><td>Asset name</td></tr>
<tr><td>acquisition_date</td><td>Purchase date</td></tr>
<tr><td>acquisition_cost</td><td>Original cost</td></tr>
<tr><td>useful_life_years</td><td>Depreciation period</td></tr>
<tr><td>depreciation_method</td><td>Straight-line, etc.</td></tr>
<tr><td>accumulated_depreciation</td><td>Total depreciation</td></tr>
<tr><td>net_book_value</td><td>Current value</td></tr>
</tbody>
</table>
</div>
<h3 id="inventory_positionscsv"><a class="header" href="#inventory_positionscsv">inventory_positions.csv</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Field</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>material_id</td><td>Material reference</td></tr>
<tr><td>warehouse</td><td>Location</td></tr>
<tr><td>quantity</td><td>Units on hand</td></tr>
<tr><td>unit_cost</td><td>Current cost</td></tr>
<tr><td>total_value</td><td>Extended value</td></tr>
</tbody>
</table>
</div>
<h2 id="period-close-files"><a class="header" href="#period-close-files">Period Close Files</a></h2>
<h3 id="trial_balancesyyyy_mmcsv"><a class="header" href="#trial_balancesyyyy_mmcsv">trial_balances/YYYY_MM.csv</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Field</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>account_number</td><td>GL account</td></tr>
<tr><td>account_name</td><td>Description</td></tr>
<tr><td>opening_balance</td><td>Period start</td></tr>
<tr><td>period_debits</td><td>Total debits</td></tr>
<tr><td>period_credits</td><td>Total credits</td></tr>
<tr><td>closing_balance</td><td>Period end</td></tr>
</tbody>
</table>
</div>
<h3 id="accrualscsv"><a class="header" href="#accrualscsv">accruals.csv</a></h3>
<p>Accrual entries with reversal dates.</p>
<h3 id="depreciationcsv"><a class="header" href="#depreciationcsv">depreciation.csv</a></h3>
<p>Monthly depreciation entries per asset.</p>
<h2 id="graph-export-files"><a class="header" href="#graph-export-files">Graph Export Files</a></h2>
<h3 id="pytorch-geometric"><a class="header" href="#pytorch-geometric">PyTorch Geometric</a></h3>
<pre><code>graphs/transaction_network/pytorch_geometric/
├── node_features.pt    # [num_nodes, features]
├── edge_index.pt       # [2, num_edges]
├── edge_attr.pt        # [num_edges, edge_features]
├── labels.pt           # Node/edge labels
├── train_mask.pt       # Training split
├── val_mask.pt         # Validation split
└── test_mask.pt        # Test split
</code></pre>
<h3 id="neo4j"><a class="header" href="#neo4j">Neo4j</a></h3>
<pre><code>graphs/entity_relationship/neo4j/
├── nodes_account.csv
├── nodes_entity.csv
├── nodes_user.csv
├── edges_transaction.csv
├── edges_approval.csv
└── import.cypher        # Import script
</code></pre>
<h2 id="label-files"><a class="header" href="#label-files">Label Files</a></h2>
<h3 id="anomaly_labelscsv"><a class="header" href="#anomaly_labelscsv">anomaly_labels.csv</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Field</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>document_id</td><td>Entry reference</td></tr>
<tr><td>anomaly_id</td><td>Unique anomaly ID</td></tr>
<tr><td>anomaly_type</td><td>Classification</td></tr>
<tr><td>anomaly_category</td><td>Fraud, Error, Process, etc.</td></tr>
<tr><td>severity</td><td>Low, Medium, High</td></tr>
<tr><td>description</td><td>Human-readable explanation</td></tr>
</tbody>
</table>
</div>
<h3 id="fraud_labelscsv"><a class="header" href="#fraud_labelscsv">fraud_labels.csv</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Field</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>document_id</td><td>Entry reference</td></tr>
<tr><td>fraud_type</td><td>Specific fraud pattern</td></tr>
<tr><td>detection_difficulty</td><td>Easy, Medium, Hard</td></tr>
<tr><td>description</td><td>Fraud scenario description</td></tr>
</tbody>
</table>
</div>
<h2 id="control-files"><a class="header" href="#control-files">Control Files</a></h2>
<h3 id="internal_controlscsv"><a class="header" href="#internal_controlscsv">internal_controls.csv</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Field</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>control_id</td><td>Unique identifier</td></tr>
<tr><td>control_name</td><td>Description</td></tr>
<tr><td>control_type</td><td>Preventive, Detective</td></tr>
<tr><td>frequency</td><td>Continuous, Daily, etc.</td></tr>
<tr><td>assertions</td><td>Completeness, Accuracy, etc.</td></tr>
</tbody>
</table>
</div>
<h3 id="sod_rulescsv"><a class="header" href="#sod_rulescsv">sod_rules.csv</a></h3>
<p>Segregation of duties conflict definitions.</p>
<h2 id="compression-options"><a class="header" href="#compression-options">Compression Options</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Option</th><th>Extension</th><th>Use Case</th></tr>
</thead>
<tbody>
<tr><td>none</td><td>.csv/.json</td><td>Development, small datasets</td></tr>
<tr><td>gzip</td><td>.csv.gz</td><td>General compression</td></tr>
<tr><td>zstd</td><td>.csv.zst</td><td>High performance</td></tr>
</tbody>
</table>
</div>
<h2 id="configuration"><a class="header" href="#configuration">Configuration</a></h2>
<pre><code class="language-yaml">output:
  format: csv              # csv or json
  compression: none        # none, gzip, zstd
  compression_level: 6     # 1-9 (if compression enabled)
</code></pre>
<h2 id="see-also-3"><a class="header" href="#see-also-3">See Also</a></h2>
<ul>
<li><a href="#output-settings-1">Configuration</a></li>
<li><a href="#graph-export">Graph Export</a></li>
<li><a href="#anomaly-injection-1">Anomaly Injection</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="configuration-1"><a class="header" href="#configuration-1">Configuration</a></h1>
<p>SyntheticData uses YAML configuration files to control all aspects of data generation.</p>
<h2 id="quick-start-2"><a class="header" href="#quick-start-2">Quick Start</a></h2>
<pre><code class="language-bash"># Create configuration from preset
synth-data init --industry manufacturing --complexity medium -o config.yaml

# Validate configuration
synth-data validate --config config.yaml

# Generate with configuration
synth-data generate --config config.yaml --output ./output
</code></pre>
<h2 id="configuration-sections-1"><a class="header" href="#configuration-sections-1">Configuration Sections</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Section</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><a href="#global-settings-1">Global Settings</a></td><td>Industry, dates, seed, performance</td></tr>
<tr><td><a href="#companies-1">Companies</a></td><td>Company codes, currencies, volume weights</td></tr>
<tr><td><a href="#transactions-2">Transactions</a></td><td>Line items, amounts, sources</td></tr>
<tr><td><a href="#master-data-1">Master Data</a></td><td>Vendors, customers, materials, assets</td></tr>
<tr><td><a href="#document-flows-1">Document Flows</a></td><td>P2P, O2C configuration</td></tr>
<tr><td><a href="#financial-settings-1">Financial Settings</a></td><td>Balance, subledger, FX, period close</td></tr>
<tr><td><a href="#compliance-1">Compliance</a></td><td>Fraud, controls, approval</td></tr>
<tr><td><a href="#output-settings-1">Output Settings</a></td><td>Format, compression</td></tr>
</tbody>
</table>
</div>
<h2 id="reference"><a class="header" href="#reference">Reference</a></h2>
<ul>
<li><a href="#yaml-schema-reference">Complete YAML Schema</a></li>
<li><a href="#industry-presets">Industry Presets</a></li>
</ul>
<h2 id="minimal-configuration"><a class="header" href="#minimal-configuration">Minimal Configuration</a></h2>
<pre><code class="language-yaml">global:
  industry: manufacturing
  start_date: 2024-01-01
  period_months: 12

transactions:
  target_count: 10000

output:
  format: csv
</code></pre>
<h2 id="full-configuration-example"><a class="header" href="#full-configuration-example">Full Configuration Example</a></h2>
<pre><code class="language-yaml">global:
  seed: 42
  industry: manufacturing
  start_date: 2024-01-01
  period_months: 12
  group_currency: USD

companies:
  - code: "1000"
    name: "Headquarters"
    currency: USD
    country: US
    volume_weight: 0.6
  - code: "2000"
    name: "European Subsidiary"
    currency: EUR
    country: DE
    volume_weight: 0.4

chart_of_accounts:
  complexity: medium

transactions:
  target_count: 100000
  line_items:
    distribution: empirical
  amounts:
    min: 100
    max: 1000000

master_data:
  vendors:
    count: 200
  customers:
    count: 500
  materials:
    count: 1000

document_flows:
  p2p:
    enabled: true
    flow_rate: 0.3
  o2c:
    enabled: true
    flow_rate: 0.3

fraud:
  enabled: true
  fraud_rate: 0.005

anomaly_injection:
  enabled: true
  total_rate: 0.02
  generate_labels: true

graph_export:
  enabled: true
  formats:
    - pytorch_geometric
    - neo4j

output:
  format: csv
  compression: none
</code></pre>
<h2 id="configuration-loading"><a class="header" href="#configuration-loading">Configuration Loading</a></h2>
<p>Configuration can be loaded from:</p>
<ol>
<li>
<p><strong>YAML file</strong> (recommended):</p>
<pre><code class="language-bash">synth-data generate --config config.yaml --output ./output
</code></pre>
</li>
<li>
<p><strong>JSON file</strong>:</p>
<pre><code class="language-bash">synth-data generate --config config.json --output ./output
</code></pre>
</li>
<li>
<p><strong>Demo preset</strong>:</p>
<pre><code class="language-bash">synth-data generate --demo --output ./output
</code></pre>
</li>
</ol>
<h2 id="validation-1"><a class="header" href="#validation-1">Validation</a></h2>
<p>The configuration is validated for:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Rule</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>Required fields</td><td>All mandatory fields must be present</td></tr>
<tr><td>Value ranges</td><td>Numbers within valid bounds</td></tr>
<tr><td>Distributions</td><td>Weights sum to 1.0 (±0.01 tolerance)</td></tr>
<tr><td>Dates</td><td>Valid date ranges</td></tr>
<tr><td>Uniqueness</td><td>Company codes must be unique</td></tr>
<tr><td>Consistency</td><td>Cross-field validations</td></tr>
</tbody>
</table>
</div>
<p>Run validation:</p>
<pre><code class="language-bash">synth-data validate --config config.yaml
</code></pre>
<h2 id="overriding-values"><a class="header" href="#overriding-values">Overriding Values</a></h2>
<p>Command-line options override configuration file values:</p>
<pre><code class="language-bash"># Override seed
synth-data generate --config config.yaml --seed 12345 --output ./output

# Override format
synth-data generate --config config.yaml --format json --output ./output
</code></pre>
<h2 id="environment-variables-1"><a class="header" href="#environment-variables-1">Environment Variables</a></h2>
<p>Some settings can be controlled via environment variables:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Variable</th><th>Configuration Equivalent</th></tr>
</thead>
<tbody>
<tr><td><code>SYNTH_DATA_SEED</code></td><td><code>global.seed</code></td></tr>
<tr><td><code>SYNTH_DATA_THREADS</code></td><td><code>global.worker_threads</code></td></tr>
<tr><td><code>SYNTH_DATA_MEMORY_LIMIT</code></td><td><code>global.memory_limit</code></td></tr>
</tbody>
</table>
</div>
<h2 id="see-also-4"><a class="header" href="#see-also-4">See Also</a></h2>
<ul>
<li><a href="#quick-start-1">Quick Start</a></li>
<li><a href="#cli-reference">CLI Reference</a></li>
<li><a href="#synth-config">synth-config Crate</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="yaml-schema-reference"><a class="header" href="#yaml-schema-reference">YAML Schema Reference</a></h1>
<p>Complete reference for all configuration options.</p>
<h2 id="schema-overview"><a class="header" href="#schema-overview">Schema Overview</a></h2>
<pre><code class="language-yaml">global:                    # Global settings
companies:                 # Company definitions
chart_of_accounts:         # COA structure
transactions:              # Transaction settings
master_data:               # Master data settings
document_flows:            # P2P, O2C flows
intercompany:              # IC settings
balance:                   # Balance settings
subledger:                 # Subledger settings
fx:                        # FX settings
period_close:              # Period close settings
fraud:                     # Fraud injection
internal_controls:         # SOX controls
anomaly_injection:         # Anomaly injection
data_quality:              # Data quality variations
graph_export:              # Graph export settings
output:                    # Output settings
business_processes:        # Process distribution
templates:                 # External templates
approval:                  # Approval thresholds
departments:               # Department distribution
</code></pre>
<h2 id="global"><a class="header" href="#global">global</a></h2>
<pre><code class="language-yaml">global:
  seed: 42                           # u64, optional - RNG seed
  industry: manufacturing            # string - industry preset
  start_date: 2024-01-01             # date - generation start
  period_months: 12                  # u32, 1-120 - duration
  group_currency: USD                # string - base currency
  worker_threads: 4                  # usize, optional - parallelism
  memory_limit: 2147483648           # u64, optional - bytes
</code></pre>
<p><strong>Industries:</strong> <code>manufacturing</code>, <code>retail</code>, <code>financial_services</code>, <code>healthcare</code>, <code>technology</code>, <code>energy</code>, <code>telecom</code>, <code>transportation</code>, <code>hospitality</code></p>
<h2 id="companies"><a class="header" href="#companies">companies</a></h2>
<pre><code class="language-yaml">companies:
  - code: "1000"                     # string - unique code
    name: "Headquarters"             # string - display name
    currency: USD                    # string - local currency
    country: US                      # string - ISO country code
    volume_weight: 0.6               # f64, 0-1 - transaction weight
    is_parent: true                  # bool - consolidation parent
    parent_code: null                # string, optional - parent ref
</code></pre>
<p><strong>Constraints:</strong></p>
<ul>
<li><code>volume_weight</code> across all companies must sum to 1.0</li>
<li><code>code</code> must be unique</li>
</ul>
<h2 id="chart_of_accounts"><a class="header" href="#chart_of_accounts">chart_of_accounts</a></h2>
<pre><code class="language-yaml">chart_of_accounts:
  complexity: medium                 # small, medium, large
  industry_specific: true            # bool - use industry COA
  custom_accounts: []                # list - additional accounts
</code></pre>
<p><strong>Complexity levels:</strong></p>
<ul>
<li><code>small</code>: ~100 accounts</li>
<li><code>medium</code>: ~400 accounts</li>
<li><code>large</code>: ~2500 accounts</li>
</ul>
<h2 id="transactions-1"><a class="header" href="#transactions-1">transactions</a></h2>
<pre><code class="language-yaml">transactions:
  target_count: 100000               # u64 - total JEs to generate

  line_items:
    distribution: empirical          # empirical, uniform, custom
    min_lines: 2                     # u32 - minimum line items
    max_lines: 20                    # u32 - maximum line items
    custom_distribution:             # only if distribution: custom
      2: 0.6068
      3: 0.0524
      4: 0.1732

  amounts:
    min: 100                         # f64 - minimum amount
    max: 1000000                     # f64 - maximum amount
    distribution: log_normal         # log_normal, uniform, custom
    round_number_bias: 0.15          # f64, 0-1 - round number preference

  sources:                           # transaction source weights
    manual: 0.3
    automated: 0.5
    recurring: 0.15
    adjustment: 0.05

  benford:
    enabled: true                    # bool - Benford's Law compliance

  temporal:
    month_end_spike: 2.5             # f64 - month-end volume multiplier
    quarter_end_spike: 3.0           # f64 - quarter-end multiplier
    year_end_spike: 4.0              # f64 - year-end multiplier
    working_hours_only: true         # bool - restrict to business hours
</code></pre>
<h2 id="master_data"><a class="header" href="#master_data">master_data</a></h2>
<pre><code class="language-yaml">master_data:
  vendors:
    count: 200                       # u32 - number of vendors
    intercompany_ratio: 0.05         # f64, 0-1 - IC vendor ratio

  customers:
    count: 500                       # u32 - number of customers
    intercompany_ratio: 0.05         # f64, 0-1 - IC customer ratio

  materials:
    count: 1000                      # u32 - number of materials

  fixed_assets:
    count: 100                       # u32 - number of assets

  employees:
    count: 50                        # u32 - number of employees
    hierarchy_depth: 4               # u32 - org chart depth
</code></pre>
<h2 id="document_flows"><a class="header" href="#document_flows">document_flows</a></h2>
<pre><code class="language-yaml">document_flows:
  p2p:                               # Procure-to-Pay
    enabled: true
    flow_rate: 0.3                   # f64, 0-1 - JE percentage
    completion_rate: 0.95            # f64, 0-1 - full flow rate
    three_way_match:
      quantity_tolerance: 0.02       # f64, 0-1 - qty variance allowed
      price_tolerance: 0.01          # f64, 0-1 - price variance allowed

  o2c:                               # Order-to-Cash
    enabled: true
    flow_rate: 0.3                   # f64, 0-1 - JE percentage
    completion_rate: 0.95            # f64, 0-1 - full flow rate
</code></pre>
<h2 id="intercompany"><a class="header" href="#intercompany">intercompany</a></h2>
<pre><code class="language-yaml">intercompany:
  enabled: true
  transaction_types:                 # weights must sum to 1.0
    goods_sale: 0.4
    service_provided: 0.2
    loan: 0.15
    dividend: 0.1
    management_fee: 0.1
    royalty: 0.05

  transfer_pricing:
    method: cost_plus                # cost_plus, resale_minus, comparable
    markup_range:
      min: 0.03
      max: 0.10
</code></pre>
<h2 id="balance"><a class="header" href="#balance">balance</a></h2>
<pre><code class="language-yaml">balance:
  opening_balance:
    enabled: true
    total_assets: 10000000           # f64 - opening balance sheet size

  coherence_check:
    enabled: true                    # bool - verify A = L + E
    tolerance: 0.01                  # f64 - allowed imbalance
</code></pre>
<h2 id="subledger"><a class="header" href="#subledger">subledger</a></h2>
<pre><code class="language-yaml">subledger:
  ar:
    enabled: true
    aging_buckets: [30, 60, 90]      # list of days

  ap:
    enabled: true
    aging_buckets: [30, 60, 90]

  fixed_assets:
    enabled: true
    depreciation_methods:
      - straight_line
      - declining_balance

  inventory:
    enabled: true
    valuation_methods:
      - fifo
      - weighted_average
</code></pre>
<h2 id="fx"><a class="header" href="#fx">fx</a></h2>
<pre><code class="language-yaml">fx:
  enabled: true
  base_currency: USD

  currency_pairs:                    # currencies to generate
    - EUR
    - GBP
    - CHF
    - JPY

  volatility: 0.01                   # f64 - daily volatility

  translation:
    method: current_rate             # current_rate, temporal
</code></pre>
<h2 id="period_close"><a class="header" href="#period_close">period_close</a></h2>
<pre><code class="language-yaml">period_close:
  enabled: true

  monthly:
    accruals: true
    depreciation: true

  quarterly:
    intercompany_elimination: true

  annual:
    closing_entries: true
    retained_earnings: true
</code></pre>
<h2 id="fraud"><a class="header" href="#fraud">fraud</a></h2>
<pre><code class="language-yaml">fraud:
  enabled: true
  fraud_rate: 0.005                  # f64, 0-1 - fraud percentage

  types:                             # weights must sum to 1.0
    fictitious_transaction: 0.15
    revenue_manipulation: 0.10
    expense_capitalization: 0.10
    split_transaction: 0.15
    round_tripping: 0.05
    kickback_scheme: 0.10
    ghost_employee: 0.05
    duplicate_payment: 0.15
    unauthorized_discount: 0.10
    suspense_abuse: 0.05
</code></pre>
<h2 id="internal_controls"><a class="header" href="#internal_controls">internal_controls</a></h2>
<pre><code class="language-yaml">internal_controls:
  enabled: true

  controls:
    - id: "CTL-001"
      name: "Payment Approval"
      type: preventive
      frequency: continuous

  sod_rules:
    - conflict_type: create_approve
      processes: [ap_invoice, ap_payment]
</code></pre>
<h2 id="anomaly_injection"><a class="header" href="#anomaly_injection">anomaly_injection</a></h2>
<pre><code class="language-yaml">anomaly_injection:
  enabled: true
  total_rate: 0.02                   # f64, 0-1 - total anomaly rate
  generate_labels: true              # bool - output ML labels

  categories:                        # weights must sum to 1.0
    fraud: 0.25
    error: 0.40
    process_issue: 0.20
    statistical: 0.10
    relational: 0.05

  temporal_pattern:
    year_end_spike: 1.5              # f64 - year-end multiplier

  clustering:
    enabled: true
    cluster_probability: 0.2
</code></pre>
<h2 id="data_quality"><a class="header" href="#data_quality">data_quality</a></h2>
<pre><code class="language-yaml">data_quality:
  enabled: true

  missing_values:
    rate: 0.01                       # f64, 0-1
    pattern: mcar                    # mcar, mar, mnar, systematic

  format_variations:
    date_formats: true
    amount_formats: true

  duplicates:
    rate: 0.001                      # f64, 0-1
    types: [exact, near, fuzzy]

  typos:
    rate: 0.005                      # f64, 0-1
    keyboard_aware: true
</code></pre>
<h2 id="graph_export"><a class="header" href="#graph_export">graph_export</a></h2>
<pre><code class="language-yaml">graph_export:
  enabled: true

  formats:
    - pytorch_geometric
    - neo4j
    - dgl

  graphs:
    - transaction_network
    - approval_network
    - entity_relationship

  split:
    train: 0.7
    val: 0.15
    test: 0.15
    stratify: is_anomaly

  features:
    temporal: true
    amount: true
    structural: true
    categorical: true
</code></pre>
<h2 id="output"><a class="header" href="#output">output</a></h2>
<pre><code class="language-yaml">output:
  format: csv                        # csv, json
  compression: none                  # none, gzip, zstd
  compression_level: 6               # u32, 1-9 (if compression enabled)

  files:
    journal_entries: true
    acdoca: true
    master_data: true
    documents: true
    subledgers: true
    trial_balances: true
    labels: true
    controls: true
</code></pre>
<h2 id="validation-summary"><a class="header" href="#validation-summary">Validation Summary</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Field</th><th>Constraint</th></tr>
</thead>
<tbody>
<tr><td><code>period_months</code></td><td>1-120</td></tr>
<tr><td><code>compression_level</code></td><td>1-9</td></tr>
<tr><td>All rates/percentages</td><td>0.0-1.0</td></tr>
<tr><td>Distributions</td><td>Sum to 1.0 (±0.01)</td></tr>
<tr><td>Company codes</td><td>Unique</td></tr>
<tr><td>Dates</td><td>Valid and consistent</td></tr>
</tbody>
</table>
</div>
<h2 id="see-also-5"><a class="header" href="#see-also-5">See Also</a></h2>
<ul>
<li><a href="configuration/README.html">Configuration Overview</a></li>
<li><a href="#industry-presets">Industry Presets</a></li>
<li><a href="#synth-config">synth-config Crate</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="industry-presets"><a class="header" href="#industry-presets">Industry Presets</a></h1>
<p>SyntheticData includes pre-configured settings for common industries.</p>
<h2 id="using-presets"><a class="header" href="#using-presets">Using Presets</a></h2>
<pre><code class="language-bash"># Create configuration from preset
synth-data init --industry manufacturing --complexity medium -o config.yaml
</code></pre>
<h2 id="available-industries"><a class="header" href="#available-industries">Available Industries</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Industry</th><th>Key Characteristics</th></tr>
</thead>
<tbody>
<tr><td><a href="#manufacturing">Manufacturing</a></td><td>Heavy P2P, inventory, fixed assets</td></tr>
<tr><td><a href="#retail">Retail</a></td><td>High O2C volume, seasonal patterns</td></tr>
<tr><td><a href="#financial-services">Financial Services</a></td><td>Complex intercompany, high controls</td></tr>
<tr><td><a href="#healthcare">Healthcare</a></td><td>Regulatory focus, insurance seasonality</td></tr>
<tr><td><a href="#technology">Technology</a></td><td>SaaS revenue, R&amp;D capitalization</td></tr>
</tbody>
</table>
</div>
<h2 id="complexity-levels-1"><a class="header" href="#complexity-levels-1">Complexity Levels</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Level</th><th>Accounts</th><th>Vendors</th><th>Customers</th><th>Materials</th></tr>
</thead>
<tbody>
<tr><td>Small</td><td>~100</td><td>50</td><td>100</td><td>200</td></tr>
<tr><td>Medium</td><td>~400</td><td>200</td><td>500</td><td>1000</td></tr>
<tr><td>Large</td><td>~2500</td><td>1000</td><td>5000</td><td>10000</td></tr>
</tbody>
</table>
</div>
<hr>
<h2 id="manufacturing"><a class="header" href="#manufacturing">Manufacturing</a></h2>
<p><strong>Characteristics:</strong></p>
<ul>
<li>High P2P activity (procurement, production)</li>
<li>Significant inventory and WIP</li>
<li>Fixed asset intensive</li>
<li>Cost accounting emphasis</li>
</ul>
<p><strong>Key Settings:</strong></p>
<pre><code class="language-yaml">global:
  industry: manufacturing

transactions:
  sources:
    manual: 0.2
    automated: 0.6
    recurring: 0.15
    adjustment: 0.05

document_flows:
  p2p:
    enabled: true
    flow_rate: 0.4          # 40% of JEs from P2P
  o2c:
    enabled: true
    flow_rate: 0.25         # 25% of JEs from O2C

master_data:
  materials:
    count: 1000
  fixed_assets:
    count: 200

subledger:
  inventory:
    enabled: true
    valuation_methods:
      - weighted_average
      - fifo
</code></pre>
<p><strong>Typical Account Distribution:</strong></p>
<ul>
<li>45% expense accounts (production costs)</li>
<li>25% asset accounts (inventory, equipment)</li>
<li>15% liability accounts</li>
<li>10% revenue accounts</li>
<li>5% equity accounts</li>
</ul>
<hr>
<h2 id="retail"><a class="header" href="#retail">Retail</a></h2>
<p><strong>Characteristics:</strong></p>
<ul>
<li>High transaction volume</li>
<li>Strong seasonal patterns</li>
<li>High O2C activity</li>
<li>Inventory turnover focus</li>
</ul>
<p><strong>Key Settings:</strong></p>
<pre><code class="language-yaml">global:
  industry: retail

transactions:
  target_count: 500000      # High volume
  temporal:
    month_end_spike: 1.5
    quarter_end_spike: 2.0
    year_end_spike: 5.0     # Holiday season

document_flows:
  p2p:
    enabled: true
    flow_rate: 0.25
  o2c:
    enabled: true
    flow_rate: 0.45         # High sales activity

master_data:
  customers:
    count: 2000
  materials:
    count: 5000

subledger:
  ar:
    enabled: true
    aging_buckets: [30, 60, 90, 120]
</code></pre>
<p><strong>Seasonal Pattern:</strong></p>
<ul>
<li>Q4 volume: 200-300% of Q1-Q3 average</li>
<li>Black Friday/holiday spikes</li>
<li>Post-holiday returns</li>
</ul>
<hr>
<h2 id="financial-services"><a class="header" href="#financial-services">Financial Services</a></h2>
<p><strong>Characteristics:</strong></p>
<ul>
<li>Complex intercompany structures</li>
<li>High regulatory requirements</li>
<li>Sophisticated controls</li>
<li>Mark-to-market adjustments</li>
</ul>
<p><strong>Key Settings:</strong></p>
<pre><code class="language-yaml">global:
  industry: financial_services

transactions:
  sources:
    automated: 0.7          # High automation
    adjustment: 0.15        # MTM adjustments

intercompany:
  enabled: true
  transaction_types:
    loan: 0.3
    service_provided: 0.25
    dividend: 0.2
    management_fee: 0.15
    royalty: 0.1

internal_controls:
  enabled: true
  controls:
    - id: "SOX-001"
      type: preventive
      frequency: continuous

fx:
  enabled: true
  currency_pairs:
    - EUR
    - GBP
    - CHF
    - JPY
    - CNY
  volatility: 0.015
</code></pre>
<p><strong>Control Requirements:</strong></p>
<ul>
<li>SOX 404 compliance mandatory</li>
<li>High SoD enforcement</li>
<li>Continuous monitoring</li>
</ul>
<hr>
<h2 id="healthcare"><a class="header" href="#healthcare">Healthcare</a></h2>
<p><strong>Characteristics:</strong></p>
<ul>
<li>Complex revenue recognition (insurance)</li>
<li>Regulatory compliance (HIPAA)</li>
<li>Seasonal patterns (flu season, open enrollment)</li>
<li>High accounts receivable</li>
</ul>
<p><strong>Key Settings:</strong></p>
<pre><code class="language-yaml">global:
  industry: healthcare

transactions:
  amounts:
    min: 50
    max: 500000
    distribution: log_normal

document_flows:
  o2c:
    enabled: true
    flow_rate: 0.5          # Revenue cycle focus

master_data:
  customers:
    count: 1000             # Patient/payer mix

subledger:
  ar:
    enabled: true
    aging_buckets: [30, 60, 90, 120, 180]  # Extended aging

fraud:
  types:
    fictitious_transaction: 0.2
    revenue_manipulation: 0.3   # Upcoding focus
    duplicate_payment: 0.2
</code></pre>
<p><strong>Seasonal Pattern:</strong></p>
<ul>
<li>Q1 spike (insurance deductible reset)</li>
<li>Flu season (Oct-Feb)</li>
<li>Open enrollment (Nov-Dec)</li>
</ul>
<hr>
<h2 id="technology"><a class="header" href="#technology">Technology</a></h2>
<p><strong>Characteristics:</strong></p>
<ul>
<li>SaaS/subscription revenue</li>
<li>R&amp;D capitalization</li>
<li>Stock compensation</li>
<li>Deferred revenue management</li>
</ul>
<p><strong>Key Settings:</strong></p>
<pre><code class="language-yaml">global:
  industry: technology

transactions:
  sources:
    automated: 0.65
    recurring: 0.25         # Subscription billing
    manual: 0.08
    adjustment: 0.02

document_flows:
  o2c:
    enabled: true
    flow_rate: 0.35

subledger:
  ar:
    enabled: true

# Additional technology-specific
deferred_revenue:
  enabled: true
  recognition_period: monthly

capitalization:
  r_and_d:
    enabled: true
    threshold: 50000
</code></pre>
<p><strong>Revenue Pattern:</strong></p>
<ul>
<li>Monthly recurring revenue (MRR)</li>
<li>Annual contract billing (ACV)</li>
<li>Usage-based components</li>
</ul>
<hr>
<h2 id="customizing-presets"><a class="header" href="#customizing-presets">Customizing Presets</a></h2>
<p>Start with a preset and customize:</p>
<pre><code class="language-bash"># Generate preset
synth-data init --industry manufacturing -o config.yaml

# Edit config.yaml
# - Adjust transaction counts
# - Add companies
# - Enable additional features

# Validate and generate
synth-data validate --config config.yaml
synth-data generate --config config.yaml --output ./output
</code></pre>
<h2 id="combining-industries"><a class="header" href="#combining-industries">Combining Industries</a></h2>
<p>For conglomerates, use multiple companies with different characteristics:</p>
<pre><code class="language-yaml">companies:
  - code: "1000"
    name: "Manufacturing Division"
    volume_weight: 0.5

  - code: "2000"
    name: "Retail Division"
    volume_weight: 0.3

  - code: "3000"
    name: "Services Division"
    volume_weight: 0.2
</code></pre>
<h2 id="see-also-6"><a class="header" href="#see-also-6">See Also</a></h2>
<ul>
<li><a href="configuration/README.html">Configuration Overview</a></li>
<li><a href="#global-settings-1">Global Settings</a></li>
<li><a href="#companies-1">Companies</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="global-settings-1"><a class="header" href="#global-settings-1">Global Settings</a></h1>
<p>Global settings control overall generation behavior.</p>
<h2 id="configuration-2"><a class="header" href="#configuration-2">Configuration</a></h2>
<pre><code class="language-yaml">global:
  seed: 42                           # Random seed for reproducibility
  industry: manufacturing            # Industry preset
  start_date: 2024-01-01             # Generation start date
  period_months: 12                  # Duration in months
  group_currency: USD                # Base/reporting currency
  worker_threads: 4                  # Parallel workers (optional)
  memory_limit: 2147483648           # Memory limit in bytes (optional)
</code></pre>
<h2 id="fields"><a class="header" href="#fields">Fields</a></h2>
<h3 id="seed"><a class="header" href="#seed">seed</a></h3>
<p>Random number generator seed for reproducible output.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Property</th><th>Value</th></tr>
</thead>
<tbody>
<tr><td>Type</td><td><code>u64</code></td></tr>
<tr><td>Required</td><td>No</td></tr>
<tr><td>Default</td><td>Random</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-yaml">global:
  seed: 42  # Same seed = same output
</code></pre>
<p><strong>Use cases:</strong></p>
<ul>
<li>Reproducible test datasets</li>
<li>Debugging</li>
<li>Consistent benchmarks</li>
</ul>
<h3 id="industry"><a class="header" href="#industry">industry</a></h3>
<p>Industry preset for domain-specific settings.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Property</th><th>Value</th></tr>
</thead>
<tbody>
<tr><td>Type</td><td><code>string</code></td></tr>
<tr><td>Required</td><td>Yes</td></tr>
<tr><td>Values</td><td>See below</td></tr>
</tbody>
</table>
</div>
<p><strong>Available industries:</strong></p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Industry</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>manufacturing</code></td><td>Production, inventory, cost accounting</td></tr>
<tr><td><code>retail</code></td><td>High volume sales, seasonal patterns</td></tr>
<tr><td><code>financial_services</code></td><td>Complex IC, regulatory compliance</td></tr>
<tr><td><code>healthcare</code></td><td>Insurance billing, compliance</td></tr>
<tr><td><code>technology</code></td><td>SaaS revenue, R&amp;D</td></tr>
<tr><td><code>energy</code></td><td>Long-term assets, commodity trading</td></tr>
<tr><td><code>telecom</code></td><td>Subscription revenue, network assets</td></tr>
<tr><td><code>transportation</code></td><td>Fleet assets, fuel costs</td></tr>
<tr><td><code>hospitality</code></td><td>Seasonal, revenue management</td></tr>
</tbody>
</table>
</div>
<h3 id="start_date"><a class="header" href="#start_date">start_date</a></h3>
<p>Beginning date for generated data.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Property</th><th>Value</th></tr>
</thead>
<tbody>
<tr><td>Type</td><td><code>date</code> (YYYY-MM-DD)</td></tr>
<tr><td>Required</td><td>Yes</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-yaml">global:
  start_date: 2024-01-01
</code></pre>
<p><strong>Notes:</strong></p>
<ul>
<li>First transaction will be on or after this date</li>
<li>Combined with <code>period_months</code> to determine date range</li>
</ul>
<h3 id="period_months"><a class="header" href="#period_months">period_months</a></h3>
<p>Duration of generation period.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Property</th><th>Value</th></tr>
</thead>
<tbody>
<tr><td>Type</td><td><code>u32</code></td></tr>
<tr><td>Required</td><td>Yes</td></tr>
<tr><td>Range</td><td>1-120</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-yaml">global:
  period_months: 12    # One year
  period_months: 36    # Three years
  period_months: 1     # One month
</code></pre>
<p><strong>Considerations:</strong></p>
<ul>
<li>Longer periods = more data</li>
<li>Period close features require at least 1 month</li>
<li>Year-end close requires at least 12 months</li>
</ul>
<h3 id="group_currency"><a class="header" href="#group_currency">group_currency</a></h3>
<p>Base currency for consolidation and reporting.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Property</th><th>Value</th></tr>
</thead>
<tbody>
<tr><td>Type</td><td><code>string</code> (ISO 4217)</td></tr>
<tr><td>Required</td><td>Yes</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-yaml">global:
  group_currency: USD
  group_currency: EUR
  group_currency: CHF
</code></pre>
<p><strong>Used for:</strong></p>
<ul>
<li>Currency translation</li>
<li>Consolidation</li>
<li>Intercompany eliminations</li>
</ul>
<h3 id="worker_threads"><a class="header" href="#worker_threads">worker_threads</a></h3>
<p>Number of parallel worker threads.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Property</th><th>Value</th></tr>
</thead>
<tbody>
<tr><td>Type</td><td><code>usize</code></td></tr>
<tr><td>Required</td><td>No</td></tr>
<tr><td>Default</td><td>Number of CPU cores</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-yaml">global:
  worker_threads: 4    # Use 4 threads
  worker_threads: 1    # Single-threaded
</code></pre>
<p><strong>Guidance:</strong></p>
<ul>
<li>Default (CPU cores) is usually optimal</li>
<li>Reduce for memory-constrained systems</li>
<li>Increase may not improve performance beyond CPU cores</li>
</ul>
<h3 id="memory_limit"><a class="header" href="#memory_limit">memory_limit</a></h3>
<p>Maximum memory usage in bytes.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Property</th><th>Value</th></tr>
</thead>
<tbody>
<tr><td>Type</td><td><code>u64</code></td></tr>
<tr><td>Required</td><td>No</td></tr>
<tr><td>Default</td><td>None (system limit)</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-yaml">global:
  memory_limit: 1073741824    # 1 GB
  memory_limit: 2147483648    # 2 GB
  memory_limit: 4294967296    # 4 GB
</code></pre>
<p><strong>Behavior:</strong></p>
<ul>
<li>Soft limit: Generation slows down</li>
<li>Hard limit: Generation pauses until memory freed</li>
<li>Streaming output to reduce memory pressure</li>
</ul>
<h2 id="environment-variable-overrides"><a class="header" href="#environment-variable-overrides">Environment Variable Overrides</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Variable</th><th>Setting</th></tr>
</thead>
<tbody>
<tr><td><code>SYNTH_DATA_SEED</code></td><td><code>global.seed</code></td></tr>
<tr><td><code>SYNTH_DATA_THREADS</code></td><td><code>global.worker_threads</code></td></tr>
<tr><td><code>SYNTH_DATA_MEMORY_LIMIT</code></td><td><code>global.memory_limit</code></td></tr>
</tbody>
</table>
</div>
<pre><code class="language-bash">SYNTH_DATA_SEED=12345 synth-data generate --config config.yaml --output ./output
</code></pre>
<h2 id="examples"><a class="header" href="#examples">Examples</a></h2>
<h3 id="minimal"><a class="header" href="#minimal">Minimal</a></h3>
<pre><code class="language-yaml">global:
  industry: manufacturing
  start_date: 2024-01-01
  period_months: 12
  group_currency: USD
</code></pre>
<h3 id="full-control"><a class="header" href="#full-control">Full Control</a></h3>
<pre><code class="language-yaml">global:
  seed: 42
  industry: financial_services
  start_date: 2023-01-01
  period_months: 36
  group_currency: USD
  worker_threads: 8
  memory_limit: 8589934592  # 8 GB
</code></pre>
<h3 id="developmenttesting"><a class="header" href="#developmenttesting">Development/Testing</a></h3>
<pre><code class="language-yaml">global:
  seed: 42                # Reproducible
  industry: manufacturing
  start_date: 2024-01-01
  period_months: 1        # Short period
  group_currency: USD
  worker_threads: 1       # Single thread for debugging
</code></pre>
<h2 id="validation-2"><a class="header" href="#validation-2">Validation</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Check</th><th>Rule</th></tr>
</thead>
<tbody>
<tr><td><code>period_months</code></td><td>1 ≤ value ≤ 120</td></tr>
<tr><td><code>start_date</code></td><td>Valid date</td></tr>
<tr><td><code>industry</code></td><td>Known industry preset</td></tr>
<tr><td><code>group_currency</code></td><td>Valid ISO 4217 code</td></tr>
</tbody>
</table>
</div>
<h2 id="see-also-7"><a class="header" href="#see-also-7">See Also</a></h2>
<ul>
<li><a href="#industry-presets">Industry Presets</a></li>
<li><a href="#companies-1">Companies</a></li>
<li><a href="#performance-tuning">Performance Tuning</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="companies-1"><a class="header" href="#companies-1">Companies</a></h1>
<p>Company configuration defines the legal entities for data generation.</p>
<h2 id="configuration-3"><a class="header" href="#configuration-3">Configuration</a></h2>
<pre><code class="language-yaml">companies:
  - code: "1000"
    name: "Headquarters"
    currency: USD
    country: US
    volume_weight: 0.6
    is_parent: true
    parent_code: null

  - code: "2000"
    name: "European Subsidiary"
    currency: EUR
    country: DE
    volume_weight: 0.4
    is_parent: false
    parent_code: "1000"
</code></pre>
<h2 id="fields-1"><a class="header" href="#fields-1">Fields</a></h2>
<h3 id="code"><a class="header" href="#code">code</a></h3>
<p>Unique identifier for the company.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Property</th><th>Value</th></tr>
</thead>
<tbody>
<tr><td>Type</td><td><code>string</code></td></tr>
<tr><td>Required</td><td>Yes</td></tr>
<tr><td>Constraints</td><td>Unique across all companies</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-yaml">companies:
  - code: "1000"      # Four-digit SAP-style
  - code: "US01"      # Region-based
  - code: "HQ"        # Abbreviated
</code></pre>
<h3 id="name"><a class="header" href="#name">name</a></h3>
<p>Display name for the company.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Property</th><th>Value</th></tr>
</thead>
<tbody>
<tr><td>Type</td><td><code>string</code></td></tr>
<tr><td>Required</td><td>Yes</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-yaml">companies:
  - name: "Headquarters"
  - name: "European Operations GmbH"
  - name: "Asia Pacific Holdings"
</code></pre>
<h3 id="currency"><a class="header" href="#currency">currency</a></h3>
<p>Local currency for the company.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Property</th><th>Value</th></tr>
</thead>
<tbody>
<tr><td>Type</td><td><code>string</code> (ISO 4217)</td></tr>
<tr><td>Required</td><td>Yes</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-yaml">companies:
  - currency: USD
  - currency: EUR
  - currency: CHF
  - currency: JPY
</code></pre>
<p><strong>Used for:</strong></p>
<ul>
<li>Transaction amounts</li>
<li>Local reporting</li>
<li>FX translation</li>
</ul>
<h3 id="country"><a class="header" href="#country">country</a></h3>
<p>Country code for the company.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Property</th><th>Value</th></tr>
</thead>
<tbody>
<tr><td>Type</td><td><code>string</code> (ISO 3166-1 alpha-2)</td></tr>
<tr><td>Required</td><td>Yes</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-yaml">companies:
  - country: US
  - country: DE
  - country: CH
  - country: JP
</code></pre>
<p><strong>Affects:</strong></p>
<ul>
<li>Holiday calendars</li>
<li>Tax calculations</li>
<li>Regional templates</li>
</ul>
<h3 id="volume_weight"><a class="header" href="#volume_weight">volume_weight</a></h3>
<p>Relative transaction volume for this company.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Property</th><th>Value</th></tr>
</thead>
<tbody>
<tr><td>Type</td><td><code>f64</code></td></tr>
<tr><td>Required</td><td>Yes</td></tr>
<tr><td>Range</td><td>0.0 - 1.0</td></tr>
<tr><td>Constraint</td><td>Sum across all companies = 1.0</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-yaml">companies:
  - code: "1000"
    volume_weight: 0.5    # 50% of transactions

  - code: "2000"
    volume_weight: 0.3    # 30% of transactions

  - code: "3000"
    volume_weight: 0.2    # 20% of transactions
</code></pre>
<h3 id="is_parent"><a class="header" href="#is_parent">is_parent</a></h3>
<p>Whether this company is the consolidation parent.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Property</th><th>Value</th></tr>
</thead>
<tbody>
<tr><td>Type</td><td><code>bool</code></td></tr>
<tr><td>Required</td><td>No</td></tr>
<tr><td>Default</td><td><code>false</code></td></tr>
</tbody>
</table>
</div>
<pre><code class="language-yaml">companies:
  - code: "1000"
    is_parent: true       # Consolidation parent

  - code: "2000"
    is_parent: false      # Subsidiary
</code></pre>
<p><strong>Notes:</strong></p>
<ul>
<li>Exactly one company should be <code>is_parent: true</code> for consolidation</li>
<li>Parent receives elimination entries</li>
</ul>
<h3 id="parent_code"><a class="header" href="#parent_code">parent_code</a></h3>
<p>Reference to parent company for subsidiaries.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Property</th><th>Value</th></tr>
</thead>
<tbody>
<tr><td>Type</td><td><code>string</code> or <code>null</code></td></tr>
<tr><td>Required</td><td>No</td></tr>
<tr><td>Default</td><td><code>null</code></td></tr>
</tbody>
</table>
</div>
<pre><code class="language-yaml">companies:
  - code: "1000"
    is_parent: true
    parent_code: null     # No parent (is the parent)

  - code: "2000"
    is_parent: false
    parent_code: "1000"   # Owned by 1000

  - code: "3000"
    is_parent: false
    parent_code: "2000"   # Owned by 2000 (nested)
</code></pre>
<h2 id="examples-1"><a class="header" href="#examples-1">Examples</a></h2>
<h3 id="single-company"><a class="header" href="#single-company">Single Company</a></h3>
<pre><code class="language-yaml">companies:
  - code: "1000"
    name: "Demo Company"
    currency: USD
    country: US
    volume_weight: 1.0
</code></pre>
<h3 id="multi-national"><a class="header" href="#multi-national">Multi-National</a></h3>
<pre><code class="language-yaml">companies:
  - code: "1000"
    name: "Global Holdings Inc"
    currency: USD
    country: US
    volume_weight: 0.4
    is_parent: true

  - code: "2000"
    name: "European Operations GmbH"
    currency: EUR
    country: DE
    volume_weight: 0.25
    parent_code: "1000"

  - code: "3000"
    name: "UK Limited"
    currency: GBP
    country: GB
    volume_weight: 0.15
    parent_code: "2000"

  - code: "4000"
    name: "Asia Pacific Pte Ltd"
    currency: SGD
    country: SG
    volume_weight: 0.2
    parent_code: "1000"
</code></pre>
<h3 id="regional-structure"><a class="header" href="#regional-structure">Regional Structure</a></h3>
<pre><code class="language-yaml">companies:
  - code: "HQ"
    name: "Headquarters"
    currency: USD
    country: US
    volume_weight: 0.3
    is_parent: true

  - code: "NA01"
    name: "North America Operations"
    currency: USD
    country: US
    volume_weight: 0.3
    parent_code: "HQ"

  - code: "EU01"
    name: "EMEA Operations"
    currency: EUR
    country: DE
    volume_weight: 0.25
    parent_code: "HQ"

  - code: "AP01"
    name: "APAC Operations"
    currency: JPY
    country: JP
    volume_weight: 0.15
    parent_code: "HQ"
</code></pre>
<h2 id="validation-3"><a class="header" href="#validation-3">Validation</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Check</th><th>Rule</th></tr>
</thead>
<tbody>
<tr><td><code>code</code></td><td>Must be unique</td></tr>
<tr><td><code>volume_weight</code></td><td>Sum must equal 1.0 (±0.01)</td></tr>
<tr><td><code>parent_code</code></td><td>Must reference existing company or be null</td></tr>
<tr><td><code>is_parent</code></td><td>At most one true (if intercompany enabled)</td></tr>
</tbody>
</table>
</div>
<h2 id="intercompany-implications"><a class="header" href="#intercompany-implications">Intercompany Implications</a></h2>
<p>When multiple companies exist:</p>
<ul>
<li>Intercompany transactions generated between companies</li>
<li>FX rates generated for currency pairs</li>
<li>Elimination entries created for parent</li>
<li>Transfer pricing applied</li>
</ul>
<p>See <a href="#intercompany-processing">Intercompany Processing</a> for details.</p>
<h2 id="see-also-8"><a class="header" href="#see-also-8">See Also</a></h2>
<ul>
<li><a href="#global-settings-1">Global Settings</a></li>
<li><a href="#intercompany-processing">Intercompany Processing</a></li>
<li><a href="#financial-settings-1">FX Settings</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="transactions-2"><a class="header" href="#transactions-2">Transactions</a></h1>
<p>Transaction settings control journal entry generation.</p>
<h2 id="configuration-4"><a class="header" href="#configuration-4">Configuration</a></h2>
<pre><code class="language-yaml">transactions:
  target_count: 100000

  line_items:
    distribution: empirical
    min_lines: 2
    max_lines: 20

  amounts:
    min: 100
    max: 1000000
    distribution: log_normal
    round_number_bias: 0.15

  sources:
    manual: 0.3
    automated: 0.5
    recurring: 0.15
    adjustment: 0.05

  benford:
    enabled: true

  temporal:
    month_end_spike: 2.5
    quarter_end_spike: 3.0
    year_end_spike: 4.0
    working_hours_only: true
</code></pre>
<h2 id="fields-2"><a class="header" href="#fields-2">Fields</a></h2>
<h3 id="target_count"><a class="header" href="#target_count">target_count</a></h3>
<p>Total number of journal entries to generate.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Property</th><th>Value</th></tr>
</thead>
<tbody>
<tr><td>Type</td><td><code>u64</code></td></tr>
<tr><td>Required</td><td>Yes</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-yaml">transactions:
  target_count: 10000      # Small dataset
  target_count: 100000     # Medium dataset
  target_count: 1000000    # Large dataset
</code></pre>
<h3 id="line_items"><a class="header" href="#line_items">line_items</a></h3>
<p>Controls the number of line items per journal entry.</p>
<h4 id="distribution"><a class="header" href="#distribution">distribution</a></h4>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Value</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>empirical</code></td><td>Based on real-world GL research</td></tr>
<tr><td><code>uniform</code></td><td>Equal probability for all counts</td></tr>
<tr><td><code>custom</code></td><td>User-defined probabilities</td></tr>
</tbody>
</table>
</div>
<p><strong>Empirical distribution</strong> (default):</p>
<ul>
<li>2 lines: 60.68%</li>
<li>3 lines: 5.24%</li>
<li>4 lines: 17.32%</li>
<li>Even counts: 88% preference</li>
</ul>
<pre><code class="language-yaml">line_items:
  distribution: empirical
</code></pre>
<p><strong>Custom distribution:</strong></p>
<pre><code class="language-yaml">line_items:
  distribution: custom
  custom_distribution:
    2: 0.50
    3: 0.10
    4: 0.20
    5: 0.10
    6: 0.10
</code></pre>
<h4 id="min_lines--max_lines"><a class="header" href="#min_lines--max_lines">min_lines / max_lines</a></h4>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Property</th><th>Value</th></tr>
</thead>
<tbody>
<tr><td>Type</td><td><code>u32</code></td></tr>
<tr><td>Default</td><td>2 / 20</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-yaml">line_items:
  min_lines: 2
  max_lines: 10
</code></pre>
<h3 id="amounts"><a class="header" href="#amounts">amounts</a></h3>
<p>Controls transaction amounts.</p>
<h4 id="min--max"><a class="header" href="#min--max">min / max</a></h4>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Property</th><th>Value</th></tr>
</thead>
<tbody>
<tr><td>Type</td><td><code>f64</code></td></tr>
<tr><td>Required</td><td>Yes</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-yaml">amounts:
  min: 100           # Minimum amount
  max: 1000000       # Maximum amount
</code></pre>
<h4 id="distribution-1"><a class="header" href="#distribution-1">distribution</a></h4>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Value</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>log_normal</code></td><td>Log-normal distribution (realistic)</td></tr>
<tr><td><code>uniform</code></td><td>Equal probability across range</td></tr>
<tr><td><code>custom</code></td><td>User-defined</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-yaml">amounts:
  distribution: log_normal
</code></pre>
<h4 id="round_number_bias"><a class="header" href="#round_number_bias">round_number_bias</a></h4>
<p>Preference for round numbers (100, 500, 1000, etc.).</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Property</th><th>Value</th></tr>
</thead>
<tbody>
<tr><td>Type</td><td><code>f64</code></td></tr>
<tr><td>Range</td><td>0.0 - 1.0</td></tr>
<tr><td>Default</td><td>0.15</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-yaml">amounts:
  round_number_bias: 0.15    # 15% round numbers
  round_number_bias: 0.0     # No round number bias
</code></pre>
<h3 id="sources"><a class="header" href="#sources">sources</a></h3>
<p>Transaction source distribution (weights must sum to 1.0).</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Source</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>manual</code></td><td>Manual journal entries</td></tr>
<tr><td><code>automated</code></td><td>System-generated</td></tr>
<tr><td><code>recurring</code></td><td>Scheduled recurring entries</td></tr>
<tr><td><code>adjustment</code></td><td>Period-end adjustments</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-yaml">sources:
  manual: 0.3
  automated: 0.5
  recurring: 0.15
  adjustment: 0.05
</code></pre>
<h3 id="benford"><a class="header" href="#benford">benford</a></h3>
<p>Benford’s Law compliance for first-digit distribution.</p>
<pre><code class="language-yaml">benford:
  enabled: true       # Follow P(d) = log10(1 + 1/d)
  enabled: false      # Disable Benford compliance
</code></pre>
<p><strong>Expected distribution (enabled):</strong></p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Digit</th><th>Probability</th></tr>
</thead>
<tbody>
<tr><td>1</td><td>30.1%</td></tr>
<tr><td>2</td><td>17.6%</td></tr>
<tr><td>3</td><td>12.5%</td></tr>
<tr><td>4</td><td>9.7%</td></tr>
<tr><td>5</td><td>7.9%</td></tr>
<tr><td>6</td><td>6.7%</td></tr>
<tr><td>7</td><td>5.8%</td></tr>
<tr><td>8</td><td>5.1%</td></tr>
<tr><td>9</td><td>4.6%</td></tr>
</tbody>
</table>
</div>
<h3 id="temporal"><a class="header" href="#temporal">temporal</a></h3>
<p>Temporal patterns for transaction timing.</p>
<h4 id="spikes"><a class="header" href="#spikes">Spikes</a></h4>
<p>Volume multipliers for period ends:</p>
<pre><code class="language-yaml">temporal:
  month_end_spike: 2.5    # 2.5x volume at month end
  quarter_end_spike: 3.0  # 3.0x at quarter end
  year_end_spike: 4.0     # 4.0x at year end
</code></pre>
<h4 id="working-hours"><a class="header" href="#working-hours">Working Hours</a></h4>
<p>Restrict transactions to business hours:</p>
<pre><code class="language-yaml">temporal:
  working_hours_only: true   # Mon-Fri, 8am-6pm
  working_hours_only: false  # Any time
</code></pre>
<h2 id="examples-2"><a class="header" href="#examples-2">Examples</a></h2>
<h3 id="high-volume-retail"><a class="header" href="#high-volume-retail">High Volume Retail</a></h3>
<pre><code class="language-yaml">transactions:
  target_count: 500000

  line_items:
    distribution: empirical
    min_lines: 2
    max_lines: 6

  amounts:
    min: 10
    max: 50000
    distribution: log_normal
    round_number_bias: 0.3

  sources:
    manual: 0.1
    automated: 0.8
    recurring: 0.08
    adjustment: 0.02

  temporal:
    month_end_spike: 1.5
    quarter_end_spike: 2.0
    year_end_spike: 5.0
</code></pre>
<h3 id="low-volume-manual"><a class="header" href="#low-volume-manual">Low Volume Manual</a></h3>
<pre><code class="language-yaml">transactions:
  target_count: 5000

  line_items:
    distribution: empirical

  amounts:
    min: 1000
    max: 10000000

  sources:
    manual: 0.6
    automated: 0.2
    recurring: 0.1
    adjustment: 0.1

  temporal:
    month_end_spike: 3.0
    quarter_end_spike: 4.0
    year_end_spike: 5.0
    working_hours_only: true
</code></pre>
<h3 id="testingdevelopment"><a class="header" href="#testingdevelopment">Testing/Development</a></h3>
<pre><code class="language-yaml">transactions:
  target_count: 1000

  line_items:
    distribution: uniform
    min_lines: 2
    max_lines: 4

  amounts:
    min: 100
    max: 10000
    distribution: uniform
    round_number_bias: 0.0

  sources:
    manual: 1.0

  benford:
    enabled: false
</code></pre>
<h2 id="validation-4"><a class="header" href="#validation-4">Validation</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Check</th><th>Rule</th></tr>
</thead>
<tbody>
<tr><td><code>target_count</code></td><td>&gt; 0</td></tr>
<tr><td><code>min_lines</code></td><td>≥ 2</td></tr>
<tr><td><code>max_lines</code></td><td>≥ min_lines</td></tr>
<tr><td><code>amounts.min</code></td><td>&gt; 0</td></tr>
<tr><td><code>amounts.max</code></td><td>&gt; min</td></tr>
<tr><td><code>round_number_bias</code></td><td>0.0 - 1.0</td></tr>
<tr><td><code>sources</code></td><td>Sum = 1.0 (±0.01)</td></tr>
<tr><td><code>*_spike</code></td><td>≥ 1.0</td></tr>
</tbody>
</table>
</div>
<h2 id="see-also-9"><a class="header" href="#see-also-9">See Also</a></h2>
<ul>
<li><a href="configuration/README.html">Configuration Overview</a></li>
<li><a href="#document-flows-1">Document Flows</a></li>
<li><a href="#anomaly-injection-1">Anomaly Injection</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="master-data-1"><a class="header" href="#master-data-1">Master Data</a></h1>
<p>Master data settings control generation of business entities.</p>
<h2 id="configuration-5"><a class="header" href="#configuration-5">Configuration</a></h2>
<pre><code class="language-yaml">master_data:
  vendors:
    count: 200
    intercompany_ratio: 0.05

  customers:
    count: 500
    intercompany_ratio: 0.05

  materials:
    count: 1000

  fixed_assets:
    count: 100

  employees:
    count: 50
    hierarchy_depth: 4
</code></pre>
<h2 id="vendors"><a class="header" href="#vendors">Vendors</a></h2>
<p>Supplier master data configuration.</p>
<pre><code class="language-yaml">master_data:
  vendors:
    count: 200                    # Number of vendors
    intercompany_ratio: 0.05      # IC vendor percentage

    payment_terms:
      - code: "NET30"
        days: 30
        weight: 0.5
      - code: "NET60"
        days: 60
        weight: 0.3
      - code: "NET10"
        days: 10
        weight: 0.2

    behavior:
      late_payment_rate: 0.1      # % with late payment tendency
      discount_usage_rate: 0.3    # % that take early pay discounts
</code></pre>
<h3 id="generated-fields"><a class="header" href="#generated-fields">Generated Fields</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Field</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>vendor_id</code></td><td>Unique identifier</td></tr>
<tr><td><code>vendor_name</code></td><td>Company name</td></tr>
<tr><td><code>tax_id</code></td><td>Tax identification number</td></tr>
<tr><td><code>payment_terms</code></td><td>Default payment terms</td></tr>
<tr><td><code>currency</code></td><td>Transaction currency</td></tr>
<tr><td><code>bank_account</code></td><td>Bank details</td></tr>
<tr><td><code>is_intercompany</code></td><td>IC vendor flag</td></tr>
<tr><td><code>valid_from</code></td><td>Temporal validity start</td></tr>
</tbody>
</table>
</div>
<h2 id="customers"><a class="header" href="#customers">Customers</a></h2>
<p>Customer master data configuration.</p>
<pre><code class="language-yaml">master_data:
  customers:
    count: 500                    # Number of customers
    intercompany_ratio: 0.05      # IC customer percentage

    credit_rating:
      - code: "AAA"
        limit_multiplier: 10.0
        weight: 0.1
      - code: "AA"
        limit_multiplier: 5.0
        weight: 0.2
      - code: "A"
        limit_multiplier: 2.0
        weight: 0.4
      - code: "B"
        limit_multiplier: 1.0
        weight: 0.3

    payment_behavior:
      on_time_rate: 0.7           # % that pay on time
      early_payment_rate: 0.1     # % that pay early
      late_payment_rate: 0.2      # % that pay late
</code></pre>
<h3 id="generated-fields-1"><a class="header" href="#generated-fields-1">Generated Fields</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Field</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>customer_id</code></td><td>Unique identifier</td></tr>
<tr><td><code>customer_name</code></td><td>Company/person name</td></tr>
<tr><td><code>credit_limit</code></td><td>Maximum credit</td></tr>
<tr><td><code>credit_rating</code></td><td>Rating code</td></tr>
<tr><td><code>payment_behavior</code></td><td>Payment tendency</td></tr>
<tr><td><code>currency</code></td><td>Transaction currency</td></tr>
<tr><td><code>is_intercompany</code></td><td>IC customer flag</td></tr>
</tbody>
</table>
</div>
<h2 id="materials"><a class="header" href="#materials">Materials</a></h2>
<p>Product/material master data.</p>
<pre><code class="language-yaml">master_data:
  materials:
    count: 1000                   # Number of materials

    types:
      raw_material: 0.3
      work_in_progress: 0.1
      finished_goods: 0.4
      services: 0.2

    valuation:
      - method: fifo
        weight: 0.3
      - method: weighted_average
        weight: 0.5
      - method: standard_cost
        weight: 0.2
</code></pre>
<h3 id="generated-fields-2"><a class="header" href="#generated-fields-2">Generated Fields</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Field</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>material_id</code></td><td>Unique identifier</td></tr>
<tr><td><code>description</code></td><td>Material name</td></tr>
<tr><td><code>material_type</code></td><td>Classification</td></tr>
<tr><td><code>unit_of_measure</code></td><td>UOM</td></tr>
<tr><td><code>valuation_method</code></td><td>Costing method</td></tr>
<tr><td><code>standard_cost</code></td><td>Unit cost</td></tr>
<tr><td><code>gl_account</code></td><td>Inventory account</td></tr>
</tbody>
</table>
</div>
<h2 id="fixed-assets"><a class="header" href="#fixed-assets">Fixed Assets</a></h2>
<p>Capital asset master data.</p>
<pre><code class="language-yaml">master_data:
  fixed_assets:
    count: 100                    # Number of assets

    categories:
      buildings: 0.1
      machinery: 0.3
      vehicles: 0.2
      furniture: 0.2
      it_equipment: 0.2

    depreciation:
      - method: straight_line
        weight: 0.7
      - method: declining_balance
        weight: 0.2
      - method: units_of_production
        weight: 0.1
</code></pre>
<h3 id="generated-fields-3"><a class="header" href="#generated-fields-3">Generated Fields</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Field</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>asset_id</code></td><td>Unique identifier</td></tr>
<tr><td><code>description</code></td><td>Asset name</td></tr>
<tr><td><code>asset_class</code></td><td>Category</td></tr>
<tr><td><code>acquisition_date</code></td><td>Purchase date</td></tr>
<tr><td><code>acquisition_cost</code></td><td>Original cost</td></tr>
<tr><td><code>useful_life</code></td><td>Years</td></tr>
<tr><td><code>depreciation_method</code></td><td>Method</td></tr>
<tr><td><code>salvage_value</code></td><td>Residual value</td></tr>
</tbody>
</table>
</div>
<h2 id="employees"><a class="header" href="#employees">Employees</a></h2>
<p>User/employee master data.</p>
<pre><code class="language-yaml">master_data:
  employees:
    count: 50                     # Number of employees
    hierarchy_depth: 4            # Org chart depth

    roles:
      - name: "AP Clerk"
        approval_limit: 5000
        weight: 0.3
      - name: "AP Manager"
        approval_limit: 50000
        weight: 0.1
      - name: "AR Clerk"
        approval_limit: 5000
        weight: 0.3
      - name: "Controller"
        approval_limit: 500000
        weight: 0.1
      - name: "CFO"
        approval_limit: 999999999
        weight: 0.05

    transaction_codes:
      - "FB01"     # Post document
      - "FB50"     # Enter GL
      - "F-28"     # Post incoming payment
      - "F-53"     # Post outgoing payment
</code></pre>
<h3 id="generated-fields-4"><a class="header" href="#generated-fields-4">Generated Fields</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Field</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>employee_id</code></td><td>Unique identifier</td></tr>
<tr><td><code>name</code></td><td>Full name</td></tr>
<tr><td><code>department</code></td><td>Department code</td></tr>
<tr><td><code>role</code></td><td>Job role</td></tr>
<tr><td><code>manager_id</code></td><td>Supervisor reference</td></tr>
<tr><td><code>approval_limit</code></td><td>Max approval amount</td></tr>
<tr><td><code>transaction_codes</code></td><td>Authorized T-codes</td></tr>
</tbody>
</table>
</div>
<h2 id="examples-3"><a class="header" href="#examples-3">Examples</a></h2>
<h3 id="small-company"><a class="header" href="#small-company">Small Company</a></h3>
<pre><code class="language-yaml">master_data:
  vendors:
    count: 50
  customers:
    count: 100
  materials:
    count: 200
  fixed_assets:
    count: 20
  employees:
    count: 10
    hierarchy_depth: 2
</code></pre>
<h3 id="large-enterprise"><a class="header" href="#large-enterprise">Large Enterprise</a></h3>
<pre><code class="language-yaml">master_data:
  vendors:
    count: 2000
    intercompany_ratio: 0.1
  customers:
    count: 10000
    intercompany_ratio: 0.1
  materials:
    count: 50000
  fixed_assets:
    count: 5000
  employees:
    count: 500
    hierarchy_depth: 8
</code></pre>
<h2 id="validation-5"><a class="header" href="#validation-5">Validation</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Check</th><th>Rule</th></tr>
</thead>
<tbody>
<tr><td><code>count</code></td><td>&gt; 0</td></tr>
<tr><td><code>intercompany_ratio</code></td><td>0.0 - 1.0</td></tr>
<tr><td><code>hierarchy_depth</code></td><td>≥ 1</td></tr>
<tr><td>Distribution weights</td><td>Sum = 1.0</td></tr>
</tbody>
</table>
</div>
<h2 id="see-also-10"><a class="header" href="#see-also-10">See Also</a></h2>
<ul>
<li><a href="#document-flows-1">Document Flows</a></li>
<li><a href="#compliance-1">Compliance</a></li>
<li><a href="#synth-generators">synth-generators</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="document-flows-1"><a class="header" href="#document-flows-1">Document Flows</a></h1>
<p>Document flow settings control P2P and O2C process generation.</p>
<h2 id="configuration-6"><a class="header" href="#configuration-6">Configuration</a></h2>
<pre><code class="language-yaml">document_flows:
  p2p:
    enabled: true
    flow_rate: 0.3
    completion_rate: 0.95
    three_way_match:
      quantity_tolerance: 0.02
      price_tolerance: 0.01

  o2c:
    enabled: true
    flow_rate: 0.3
    completion_rate: 0.95
</code></pre>
<h2 id="procure-to-pay-p2p"><a class="header" href="#procure-to-pay-p2p">Procure-to-Pay (P2P)</a></h2>
<p>Purchase requisition through payment.</p>
<h3 id="flow"><a class="header" href="#flow">Flow</a></h3>
<pre><code>Create PO → Goods Receipt → Vendor Invoice → Payment
</code></pre>
<h3 id="configuration-1-1"><a class="header" href="#configuration-1-1">Configuration</a></h3>
<pre><code class="language-yaml">document_flows:
  p2p:
    enabled: true                    # Enable P2P generation
    flow_rate: 0.3                   # % of JEs from P2P
    completion_rate: 0.95            # % completing full flow

    stages:
      po_approval_rate: 0.9          # POs that get approved
      gr_rate: 0.98                  # POs with goods receipts
      invoice_rate: 0.95             # GRs with invoices
      payment_rate: 0.92             # Invoices that get paid

    three_way_match:
      enabled: true
      quantity_tolerance: 0.02       # 2% quantity variance allowed
      price_tolerance: 0.01          # 1% price variance allowed

    timing:
      po_to_gr_days:
        min: 1
        max: 30
      gr_to_invoice_days:
        min: 1
        max: 14
      invoice_to_payment_days:
        min: 10
        max: 60
</code></pre>
<h3 id="generated-documents"><a class="header" href="#generated-documents">Generated Documents</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Document</th><th>Fields</th></tr>
</thead>
<tbody>
<tr><td><strong>Purchase Order</strong></td><td>PO number, vendor, items, quantities, prices</td></tr>
<tr><td><strong>Goods Receipt</strong></td><td>GR number, PO reference, received quantities</td></tr>
<tr><td><strong>Vendor Invoice</strong></td><td>Invoice number, PO/GR reference, amounts</td></tr>
<tr><td><strong>Payment</strong></td><td>Payment number, invoice references</td></tr>
</tbody>
</table>
</div>
<h3 id="three-way-match"><a class="header" href="#three-way-match">Three-Way Match</a></h3>
<p>Validates PO, GR, and Invoice alignment:</p>
<pre><code class="language-yaml">three_way_match:
  enabled: true
  quantity_tolerance: 0.02    # Allow 2% quantity variance
  price_tolerance: 0.01       # Allow 1% price variance

  variance_types:
    - over_receipt             # GR &gt; PO quantity
    - under_receipt            # GR &lt; PO quantity
    - price_variance           # Invoice price ≠ PO price
</code></pre>
<p><strong>Match outcomes:</strong></p>
<ul>
<li><code>matched</code>: All within tolerance</li>
<li><code>quantity_variance</code>: Quantity outside tolerance</li>
<li><code>price_variance</code>: Price outside tolerance</li>
<li><code>blocked</code>: Manual review required</li>
</ul>
<h3 id="journal-entries-generated"><a class="header" href="#journal-entries-generated">Journal Entries Generated</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Stage</th><th>Debit</th><th>Credit</th></tr>
</thead>
<tbody>
<tr><td>Goods Receipt</td><td>Inventory</td><td>GR/IR Clearing</td></tr>
<tr><td>Invoice Receipt</td><td>GR/IR Clearing</td><td>Accounts Payable</td></tr>
<tr><td>Payment</td><td>Accounts Payable</td><td>Cash</td></tr>
</tbody>
</table>
</div>
<hr>
<h2 id="order-to-cash-o2c"><a class="header" href="#order-to-cash-o2c">Order-to-Cash (O2C)</a></h2>
<p>Sales order through cash receipt.</p>
<h3 id="flow-1"><a class="header" href="#flow-1">Flow</a></h3>
<pre><code>Create SO → Delivery → Customer Invoice → Customer Receipt
</code></pre>
<h3 id="configuration-2-1"><a class="header" href="#configuration-2-1">Configuration</a></h3>
<pre><code class="language-yaml">document_flows:
  o2c:
    enabled: true                    # Enable O2C generation
    flow_rate: 0.3                   # % of JEs from O2C
    completion_rate: 0.95            # % completing full flow

    stages:
      so_approval_rate: 0.95         # SOs that get approved
      credit_check_pass_rate: 0.9    # Pass credit check
      delivery_rate: 0.98            # SOs with deliveries
      invoice_rate: 0.95             # Deliveries with invoices
      collection_rate: 0.85          # Invoices that get paid

    timing:
      so_to_delivery_days:
        min: 1
        max: 14
      delivery_to_invoice_days:
        min: 0
        max: 3
      invoice_to_payment_days:
        min: 15
        max: 90
</code></pre>
<h3 id="generated-documents-1"><a class="header" href="#generated-documents-1">Generated Documents</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Document</th><th>Fields</th></tr>
</thead>
<tbody>
<tr><td><strong>Sales Order</strong></td><td>SO number, customer, items, quantities, prices</td></tr>
<tr><td><strong>Delivery</strong></td><td>Delivery number, SO reference, shipped quantities</td></tr>
<tr><td><strong>Customer Invoice</strong></td><td>Invoice number, SO/delivery reference, amounts</td></tr>
<tr><td><strong>Customer Receipt</strong></td><td>Receipt number, invoice references</td></tr>
</tbody>
</table>
</div>
<h3 id="credit-check"><a class="header" href="#credit-check">Credit Check</a></h3>
<pre><code class="language-yaml">o2c:
  credit_check:
    enabled: true
    check_credit_limit: true       # Verify customer limit
    check_overdue: true            # Check for past-due AR
    block_threshold: 0.9           # Block if &gt;90% of limit used
</code></pre>
<h3 id="journal-entries-generated-1"><a class="header" href="#journal-entries-generated-1">Journal Entries Generated</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Stage</th><th>Debit</th><th>Credit</th></tr>
</thead>
<tbody>
<tr><td>Delivery</td><td>Cost of Goods Sold</td><td>Inventory</td></tr>
<tr><td>Invoice</td><td>Accounts Receivable</td><td>Revenue</td></tr>
<tr><td>Receipt</td><td>Cash</td><td>Accounts Receivable</td></tr>
</tbody>
</table>
</div>
<hr>
<h2 id="combined-example"><a class="header" href="#combined-example">Combined Example</a></h2>
<pre><code class="language-yaml">document_flows:
  p2p:
    enabled: true
    flow_rate: 0.35
    completion_rate: 0.95

    three_way_match:
      quantity_tolerance: 0.02
      price_tolerance: 0.01

    timing:
      po_to_gr_days:
        min: 3
        max: 21
      gr_to_invoice_days:
        min: 1
        max: 10
      invoice_to_payment_days:
        min: 20
        max: 45

  o2c:
    enabled: true
    flow_rate: 0.35
    completion_rate: 0.90

    credit_check:
      enabled: true
      block_threshold: 0.85

    timing:
      so_to_delivery_days:
        min: 1
        max: 7
      delivery_to_invoice_days:
        min: 0
        max: 1
      invoice_to_payment_days:
        min: 30
        max: 60
</code></pre>
<h2 id="document-references"><a class="header" href="#document-references">Document References</a></h2>
<p>Documents maintain proper reference chains:</p>
<pre><code>PO-001 → GR-001 → INV-001 → PAY-001
   │         │         │         │
   └─────────┴─────────┴─────────┘
              Document Chain
</code></pre>
<p>Reference types:</p>
<ul>
<li><code>follows_from</code>: Next document in flow</li>
<li><code>payment_for</code>: Payment → Invoice link</li>
<li><code>reversal_of</code>: Credit memo / reversal</li>
</ul>
<h2 id="validation-6"><a class="header" href="#validation-6">Validation</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Check</th><th>Rule</th></tr>
</thead>
<tbody>
<tr><td><code>flow_rate</code></td><td>0.0 - 1.0</td></tr>
<tr><td><code>completion_rate</code></td><td>0.0 - 1.0</td></tr>
<tr><td><code>tolerance</code> values</td><td>0.0 - 1.0</td></tr>
<tr><td><code>timing.min</code></td><td>≥ 0</td></tr>
<tr><td><code>timing.max</code></td><td>≥ min</td></tr>
</tbody>
</table>
</div>
<h2 id="see-also-11"><a class="header" href="#see-also-11">See Also</a></h2>
<ul>
<li><a href="#master-data-1">Master Data</a></li>
<li><a href="#financial-settings-1">Financial Settings</a></li>
<li><a href="#synth-generators">synth-generators</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="financial-settings-1"><a class="header" href="#financial-settings-1">Financial Settings</a></h1>
<p>Financial settings control balance, subledger, FX, and period close.</p>
<h2 id="balance-configuration"><a class="header" href="#balance-configuration">Balance Configuration</a></h2>
<pre><code class="language-yaml">balance:
  opening_balance:
    enabled: true
    total_assets: 10000000

  coherence_check:
    enabled: true
    tolerance: 0.01
</code></pre>
<h3 id="opening-balance"><a class="header" href="#opening-balance">Opening Balance</a></h3>
<p>Generate coherent opening balance sheet:</p>
<pre><code class="language-yaml">balance:
  opening_balance:
    enabled: true
    total_assets: 10000000           # Total asset value

    structure:                        # Balance sheet structure
      current_assets: 0.3
      fixed_assets: 0.5
      other_assets: 0.2

      current_liabilities: 0.2
      long_term_debt: 0.3
      equity: 0.5
</code></pre>
<h3 id="balance-coherence"><a class="header" href="#balance-coherence">Balance Coherence</a></h3>
<p>Verify accounting equation:</p>
<pre><code class="language-yaml">balance:
  coherence_check:
    enabled: true                    # Verify Assets = L + E
    tolerance: 0.01                  # Allowed rounding variance
    frequency: monthly               # When to check
</code></pre>
<hr>
<h2 id="subledger-configuration"><a class="header" href="#subledger-configuration">Subledger Configuration</a></h2>
<pre><code class="language-yaml">subledger:
  ar:
    enabled: true
    aging_buckets: [30, 60, 90, 120]

  ap:
    enabled: true
    aging_buckets: [30, 60, 90]

  fixed_assets:
    enabled: true
    depreciation_methods:
      - straight_line
      - declining_balance

  inventory:
    enabled: true
    valuation_methods:
      - fifo
      - weighted_average
</code></pre>
<h3 id="accounts-receivable"><a class="header" href="#accounts-receivable">Accounts Receivable</a></h3>
<pre><code class="language-yaml">subledger:
  ar:
    enabled: true
    aging_buckets: [30, 60, 90, 120]  # Aging period boundaries

    collection:
      on_time_rate: 0.7               # % paid within terms
      write_off_rate: 0.02            # % written off

    reconciliation:
      enabled: true                   # Reconcile to GL
      control_account: "1100"         # AR control account
</code></pre>
<h3 id="accounts-payable"><a class="header" href="#accounts-payable">Accounts Payable</a></h3>
<pre><code class="language-yaml">subledger:
  ap:
    enabled: true
    aging_buckets: [30, 60, 90]

    payment:
      discount_usage_rate: 0.3        # % taking early pay discount
      late_payment_rate: 0.1          # % paid late

    reconciliation:
      enabled: true
      control_account: "2000"         # AP control account
</code></pre>
<h3 id="fixed-assets-1"><a class="header" href="#fixed-assets-1">Fixed Assets</a></h3>
<pre><code class="language-yaml">subledger:
  fixed_assets:
    enabled: true

    depreciation_methods:
      - method: straight_line
        weight: 0.7
      - method: declining_balance
        rate: 0.2
        weight: 0.2
      - method: units_of_production
        weight: 0.1

    disposal:
      rate: 0.05                      # Annual disposal rate
      gain_loss_account: "8000"       # Gain/loss account

    reconciliation:
      enabled: true
      control_accounts:
        asset: "1500"
        depreciation: "1510"
</code></pre>
<h3 id="inventory"><a class="header" href="#inventory">Inventory</a></h3>
<pre><code class="language-yaml">subledger:
  inventory:
    enabled: true

    valuation_methods:
      - method: fifo
        weight: 0.3
      - method: weighted_average
        weight: 0.5
      - method: standard_cost
        weight: 0.2

    movements:
      receipt_weight: 0.4
      issue_weight: 0.4
      adjustment_weight: 0.1
      transfer_weight: 0.1

    reconciliation:
      enabled: true
      control_account: "1200"
</code></pre>
<hr>
<h2 id="fx-configuration"><a class="header" href="#fx-configuration">FX Configuration</a></h2>
<pre><code class="language-yaml">fx:
  enabled: true
  base_currency: USD

  currency_pairs:
    - EUR
    - GBP
    - CHF
    - JPY

  volatility: 0.01

  translation:
    method: current_rate
</code></pre>
<h3 id="exchange-rates"><a class="header" href="#exchange-rates">Exchange Rates</a></h3>
<pre><code class="language-yaml">fx:
  enabled: true
  base_currency: USD                  # Reporting currency

  currency_pairs:                     # Currencies to generate
    - EUR
    - GBP
    - CHF

  rate_types:
    - spot                            # Daily spot rates
    - closing                         # Period closing rates
    - average                         # Period average rates

  volatility: 0.01                    # Daily volatility
  mean_reversion: 0.1                 # Ornstein-Uhlenbeck parameter
</code></pre>
<h3 id="currency-translation"><a class="header" href="#currency-translation">Currency Translation</a></h3>
<pre><code class="language-yaml">fx:
  translation:
    method: current_rate              # current_rate, temporal

    rate_mapping:
      assets: closing_rate
      liabilities: closing_rate
      equity: historical_rate
      revenue: average_rate
      expense: average_rate

    cta_account: "3500"               # CTA equity account
</code></pre>
<hr>
<h2 id="period-close-configuration"><a class="header" href="#period-close-configuration">Period Close Configuration</a></h2>
<pre><code class="language-yaml">period_close:
  enabled: true

  monthly:
    accruals: true
    depreciation: true

  quarterly:
    intercompany_elimination: true

  annual:
    closing_entries: true
    retained_earnings: true
</code></pre>
<h3 id="monthly-close"><a class="header" href="#monthly-close">Monthly Close</a></h3>
<pre><code class="language-yaml">period_close:
  monthly:
    accruals:
      enabled: true
      auto_reverse: true              # Reverse in next period
      categories:
        - expense_accrual
        - revenue_accrual
        - payroll_accrual

    depreciation:
      enabled: true
      run_date: last_day              # When to run

    reconciliation:
      enabled: true
      subledger_to_gl: true
</code></pre>
<h3 id="quarterly-close"><a class="header" href="#quarterly-close">Quarterly Close</a></h3>
<pre><code class="language-yaml">period_close:
  quarterly:
    intercompany_elimination:
      enabled: true
      types:
        - intercompany_sales
        - intercompany_profit
        - intercompany_dividends

    currency_translation:
      enabled: true
</code></pre>
<h3 id="annual-close"><a class="header" href="#annual-close">Annual Close</a></h3>
<pre><code class="language-yaml">period_close:
  annual:
    closing_entries:
      enabled: true
      close_revenue: true
      close_expense: true

    retained_earnings:
      enabled: true
      account: "3100"

    year_end_adjustments:
      - bad_debt_provision
      - inventory_reserve
      - bonus_accrual
</code></pre>
<hr>
<h2 id="combined-example-1"><a class="header" href="#combined-example-1">Combined Example</a></h2>
<pre><code class="language-yaml">balance:
  opening_balance:
    enabled: true
    total_assets: 50000000
  coherence_check:
    enabled: true

subledger:
  ar:
    enabled: true
    aging_buckets: [30, 60, 90, 120, 180]
  ap:
    enabled: true
    aging_buckets: [30, 60, 90]
  fixed_assets:
    enabled: true
  inventory:
    enabled: true

fx:
  enabled: true
  base_currency: USD
  currency_pairs: [EUR, GBP, CHF, JPY, CNY]
  volatility: 0.012

period_close:
  enabled: true
  monthly:
    accruals: true
    depreciation: true
  quarterly:
    intercompany_elimination: true
  annual:
    closing_entries: true
    retained_earnings: true
</code></pre>
<h2 id="see-also-12"><a class="header" href="#see-also-12">See Also</a></h2>
<ul>
<li><a href="#companies-1">Companies</a></li>
<li><a href="#document-flows-1">Document Flows</a></li>
<li><a href="#period-close-engine">Period Close Engine</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="compliance-1"><a class="header" href="#compliance-1">Compliance</a></h1>
<p>Compliance settings control fraud injection, internal controls, and approval workflows.</p>
<h2 id="fraud-configuration"><a class="header" href="#fraud-configuration">Fraud Configuration</a></h2>
<pre><code class="language-yaml">fraud:
  enabled: true
  fraud_rate: 0.005

  types:
    fictitious_transaction: 0.15
    revenue_manipulation: 0.10
    expense_capitalization: 0.10
    split_transaction: 0.15
    round_tripping: 0.05
    kickback_scheme: 0.10
    ghost_employee: 0.05
    duplicate_payment: 0.15
    unauthorized_discount: 0.10
    suspense_abuse: 0.05
</code></pre>
<h3 id="fraud-rate"><a class="header" href="#fraud-rate">Fraud Rate</a></h3>
<p>Overall percentage of fraudulent transactions:</p>
<pre><code class="language-yaml">fraud:
  enabled: true
  fraud_rate: 0.005    # 0.5% fraud rate
  fraud_rate: 0.01     # 1% fraud rate
  fraud_rate: 0.001    # 0.1% fraud rate
</code></pre>
<h3 id="fraud-types"><a class="header" href="#fraud-types">Fraud Types</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>fictitious_transaction</code></td><td>Completely fabricated entries</td></tr>
<tr><td><code>revenue_manipulation</code></td><td>Premature/delayed revenue recognition</td></tr>
<tr><td><code>expense_capitalization</code></td><td>Improper capitalization of expenses</td></tr>
<tr><td><code>split_transaction</code></td><td>Split to avoid approval thresholds</td></tr>
<tr><td><code>round_tripping</code></td><td>Circular transactions to inflate revenue</td></tr>
<tr><td><code>kickback_scheme</code></td><td>Vendor kickback arrangements</td></tr>
<tr><td><code>ghost_employee</code></td><td>Payments to non-existent employees</td></tr>
<tr><td><code>duplicate_payment</code></td><td>Same invoice paid multiple times</td></tr>
<tr><td><code>unauthorized_discount</code></td><td>Unapproved customer discounts</td></tr>
<tr><td><code>suspense_abuse</code></td><td>Hiding items in suspense accounts</td></tr>
</tbody>
</table>
</div>
<h3 id="fraud-patterns"><a class="header" href="#fraud-patterns">Fraud Patterns</a></h3>
<pre><code class="language-yaml">fraud:
  patterns:
    threshold_adjacent:
      enabled: true
      threshold: 10000             # Approval threshold
      range: 0.1                   # % below threshold

    time_based:
      weekend_preference: 0.3      # Weekend entry rate
      after_hours_preference: 0.2  # After hours rate

    entity_targeting:
      repeat_offender_rate: 0.4    # Same user commits multiple
</code></pre>
<hr>
<h2 id="internal-controls-configuration"><a class="header" href="#internal-controls-configuration">Internal Controls Configuration</a></h2>
<pre><code class="language-yaml">internal_controls:
  enabled: true

  controls:
    - id: "CTL-001"
      name: "Payment Approval"
      type: preventive
      frequency: continuous
      assertions:
        - authorization
        - validity

  sod_rules:
    - conflict_type: create_approve
      processes: [ap_invoice, ap_payment]
</code></pre>
<h3 id="control-definition"><a class="header" href="#control-definition">Control Definition</a></h3>
<pre><code class="language-yaml">internal_controls:
  controls:
    - id: "CTL-001"
      name: "Payment Approval"
      description: "Payments require manager approval"
      type: preventive              # preventive, detective
      frequency: continuous         # continuous, daily, weekly, monthly
      assertions:
        - authorization
        - validity
        - completeness
      accounts: ["2000"]            # Applicable accounts
      threshold: 5000               # Trigger threshold

    - id: "CTL-002"
      name: "Journal Entry Review"
      type: detective
      frequency: daily
      assertions:
        - accuracy
        - completeness
</code></pre>
<h3 id="control-types"><a class="header" href="#control-types">Control Types</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>preventive</code></td><td>Prevents errors/fraud before occurrence</td></tr>
<tr><td><code>detective</code></td><td>Detects errors/fraud after occurrence</td></tr>
</tbody>
</table>
</div>
<h3 id="control-assertions"><a class="header" href="#control-assertions">Control Assertions</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Assertion</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>authorization</code></td><td>Proper approval obtained</td></tr>
<tr><td><code>validity</code></td><td>Transaction is legitimate</td></tr>
<tr><td><code>completeness</code></td><td>All transactions recorded</td></tr>
<tr><td><code>accuracy</code></td><td>Amounts are correct</td></tr>
<tr><td><code>cutoff</code></td><td>Recorded in correct period</td></tr>
<tr><td><code>classification</code></td><td>Properly categorized</td></tr>
</tbody>
</table>
</div>
<h3 id="segregation-of-duties"><a class="header" href="#segregation-of-duties">Segregation of Duties</a></h3>
<pre><code class="language-yaml">internal_controls:
  sod_rules:
    - conflict_type: create_approve
      processes: [ap_invoice, ap_payment]
      description: "Cannot create and approve payments"

    - conflict_type: create_approve
      processes: [ar_invoice, ar_receipt]

    - conflict_type: custody_recording
      processes: [cash_handling, cash_recording]

    - conflict_type: authorization_custody
      processes: [vendor_master, ap_payment]
</code></pre>
<h3 id="sod-conflict-types"><a class="header" href="#sod-conflict-types">SoD Conflict Types</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>create_approve</code></td><td>Create and approve same transaction</td></tr>
<tr><td><code>custody_recording</code></td><td>Physical custody and recording</td></tr>
<tr><td><code>authorization_custody</code></td><td>Authorization and physical access</td></tr>
<tr><td><code>create_modify</code></td><td>Create and modify master data</td></tr>
</tbody>
</table>
</div>
<hr>
<h2 id="approval-configuration"><a class="header" href="#approval-configuration">Approval Configuration</a></h2>
<pre><code class="language-yaml">approval:
  enabled: true

  thresholds:
    - level: 1
      name: "Clerk"
      max_amount: 5000
    - level: 2
      name: "Supervisor"
      max_amount: 25000
    - level: 3
      name: "Manager"
      max_amount: 100000
    - level: 4
      name: "Director"
      max_amount: 500000
    - level: 5
      name: "Executive"
      max_amount: null          # Unlimited
</code></pre>
<h3 id="approval-thresholds"><a class="header" href="#approval-thresholds">Approval Thresholds</a></h3>
<pre><code class="language-yaml">approval:
  thresholds:
    - level: 1
      name: "Level 1 - Clerk"
      max_amount: 5000
      auto_approve: false

    - level: 2
      name: "Level 2 - Supervisor"
      max_amount: 25000
      auto_approve: false

    - level: 3
      name: "Level 3 - Manager"
      max_amount: 100000
      requires_dual: false        # Single approver

    - level: 4
      name: "Level 4 - Director"
      max_amount: 500000
      requires_dual: true         # Dual approval required
</code></pre>
<h3 id="approval-process"><a class="header" href="#approval-process">Approval Process</a></h3>
<pre><code class="language-yaml">approval:
  process:
    workflow: hierarchical        # hierarchical, matrix
    escalation_days: 3            # Auto-escalate after N days
    reminder_days: 1              # Send reminder after N days

  exceptions:
    recurring_exempt: true        # Skip for recurring entries
    system_exempt: true           # Skip for system entries
</code></pre>
<hr>
<h2 id="combined-example-2"><a class="header" href="#combined-example-2">Combined Example</a></h2>
<pre><code class="language-yaml">fraud:
  enabled: true
  fraud_rate: 0.005
  types:
    fictitious_transaction: 0.15
    split_transaction: 0.20
    duplicate_payment: 0.15
    ghost_employee: 0.10
    kickback_scheme: 0.10
    revenue_manipulation: 0.10
    expense_capitalization: 0.10
    unauthorized_discount: 0.10

internal_controls:
  enabled: true
  controls:
    - id: "SOX-001"
      name: "Payment Authorization"
      type: preventive
      frequency: continuous
      threshold: 10000

    - id: "SOX-002"
      name: "JE Review"
      type: detective
      frequency: daily

  sod_rules:
    - conflict_type: create_approve
      processes: [ap_invoice, ap_payment]
    - conflict_type: create_approve
      processes: [ar_invoice, ar_receipt]
    - conflict_type: create_modify
      processes: [vendor_master, ap_invoice]

approval:
  enabled: true
  thresholds:
    - level: 1
      max_amount: 5000
    - level: 2
      max_amount: 25000
    - level: 3
      max_amount: 100000
    - level: 4
      max_amount: null
</code></pre>
<h2 id="validation-7"><a class="header" href="#validation-7">Validation</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Check</th><th>Rule</th></tr>
</thead>
<tbody>
<tr><td><code>fraud_rate</code></td><td>0.0 - 1.0</td></tr>
<tr><td><code>fraud.types</code></td><td>Sum = 1.0</td></tr>
<tr><td><code>control.id</code></td><td>Unique</td></tr>
<tr><td><code>thresholds</code></td><td>Strictly ascending</td></tr>
</tbody>
</table>
</div>
<h2 id="see-also-13"><a class="header" href="#see-also-13">See Also</a></h2>
<ul>
<li><a href="#anomaly-injection-1">Anomaly Injection</a></li>
<li><a href="#master-data-1">Master Data</a></li>
<li><a href="#sox-compliance-testing">SOX Compliance Use Case</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="output-settings-1"><a class="header" href="#output-settings-1">Output Settings</a></h1>
<p>Output settings control file formats and organization.</p>
<h2 id="configuration-7"><a class="header" href="#configuration-7">Configuration</a></h2>
<pre><code class="language-yaml">output:
  format: csv
  compression: none
  compression_level: 6

  files:
    journal_entries: true
    acdoca: true
    master_data: true
    documents: true
    subledgers: true
    trial_balances: true
    labels: true
    controls: true
</code></pre>
<h2 id="format"><a class="header" href="#format">Format</a></h2>
<p>Output file format selection.</p>
<pre><code class="language-yaml">output:
  format: csv    # CSV format (default)
  format: json   # JSON format
</code></pre>
<h3 id="csv-format"><a class="header" href="#csv-format">CSV Format</a></h3>
<p>Standard comma-separated values:</p>
<pre><code class="language-csv">document_id,posting_date,company_code,account,debit,credit
abc-123,2024-01-15,1000,1100,"1000.00","0.00"
abc-123,2024-01-15,1000,4000,"0.00","1000.00"
</code></pre>
<p><strong>Characteristics:</strong></p>
<ul>
<li>UTF-8 encoding</li>
<li>Header row included</li>
<li>Quoted strings when needed</li>
<li>Decimals as strings</li>
</ul>
<h3 id="json-format"><a class="header" href="#json-format">JSON Format</a></h3>
<p>Structured JSON with nested objects:</p>
<pre><code class="language-json">[
  {
    "header": {
      "document_id": "abc-123",
      "posting_date": "2024-01-15",
      "company_code": "1000"
    },
    "lines": [
      {"account": "1100", "debit": "1000.00", "credit": "0.00"},
      {"account": "4000", "debit": "0.00", "credit": "1000.00"}
    ]
  }
]
</code></pre>
<h2 id="compression"><a class="header" href="#compression">Compression</a></h2>
<p>File compression options.</p>
<pre><code class="language-yaml">output:
  compression: none     # No compression
  compression: gzip     # Gzip compression (.gz)
  compression: zstd     # Zstandard compression (.zst)
</code></pre>
<h3 id="compression-level"><a class="header" href="#compression-level">Compression Level</a></h3>
<p>When compression is enabled:</p>
<pre><code class="language-yaml">output:
  compression: gzip
  compression_level: 6    # 1-9, higher = smaller + slower
</code></pre>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Level</th><th>Speed</th><th>Size</th><th>Use Case</th></tr>
</thead>
<tbody>
<tr><td>1</td><td>Fastest</td><td>Largest</td><td>Quick compression</td></tr>
<tr><td>6</td><td>Balanced</td><td>Medium</td><td>General use (default)</td></tr>
<tr><td>9</td><td>Slowest</td><td>Smallest</td><td>Maximum compression</td></tr>
</tbody>
</table>
</div>
<h3 id="compression-comparison"><a class="header" href="#compression-comparison">Compression Comparison</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Compression</th><th>Extension</th><th>Speed</th><th>Ratio</th></tr>
</thead>
<tbody>
<tr><td><code>none</code></td><td><code>.csv</code></td><td>N/A</td><td>1.0</td></tr>
<tr><td><code>gzip</code></td><td><code>.csv.gz</code></td><td>Medium</td><td>~0.15</td></tr>
<tr><td><code>zstd</code></td><td><code>.csv.zst</code></td><td>Fast</td><td>~0.12</td></tr>
</tbody>
</table>
</div>
<h2 id="file-selection"><a class="header" href="#file-selection">File Selection</a></h2>
<p>Control which files are generated:</p>
<pre><code class="language-yaml">output:
  files:
    # Core transaction data
    journal_entries: true    # journal_entries.csv
    acdoca: true             # acdoca.csv (SAP format)

    # Master data
    master_data: true        # vendors.csv, customers.csv, etc.

    # Document flow
    documents: true          # purchase_orders.csv, invoices.csv, etc.

    # Subsidiary ledgers
    subledgers: true         # ar_open_items.csv, ap_open_items.csv, etc.

    # Period close
    trial_balances: true     # trial_balances/*.csv

    # ML labels
    labels: true             # anomaly_labels.csv, fraud_labels.csv

    # Controls
    controls: true           # internal_controls.csv, sod_rules.csv
</code></pre>
<h2 id="output-directory-structure-2"><a class="header" href="#output-directory-structure-2">Output Directory Structure</a></h2>
<p>With all files enabled:</p>
<pre><code>output/
├── master_data/
│   ├── chart_of_accounts.csv
│   ├── vendors.csv
│   ├── customers.csv
│   ├── materials.csv
│   ├── fixed_assets.csv
│   └── employees.csv
├── transactions/
│   ├── journal_entries.csv
│   └── acdoca.csv
├── documents/
│   ├── purchase_orders.csv
│   ├── goods_receipts.csv
│   ├── vendor_invoices.csv
│   ├── payments.csv
│   ├── sales_orders.csv
│   ├── deliveries.csv
│   ├── customer_invoices.csv
│   └── customer_receipts.csv
├── subledgers/
│   ├── ar_open_items.csv
│   ├── ar_aging.csv
│   ├── ap_open_items.csv
│   ├── ap_aging.csv
│   ├── fa_register.csv
│   ├── fa_depreciation.csv
│   ├── inventory_positions.csv
│   └── inventory_movements.csv
├── period_close/
│   └── trial_balances/
│       ├── 2024_01.csv
│       ├── 2024_02.csv
│       └── ...
├── consolidation/
│   ├── eliminations.csv
│   └── currency_translation.csv
├── fx/
│   ├── daily_rates.csv
│   └── period_rates.csv
├── graphs/                      # If graph_export enabled
│   ├── pytorch_geometric/
│   └── neo4j/
├── labels/
│   ├── anomaly_labels.csv
│   └── fraud_labels.csv
└── controls/
    ├── internal_controls.csv
    ├── control_mappings.csv
    └── sod_rules.csv
</code></pre>
<h2 id="examples-4"><a class="header" href="#examples-4">Examples</a></h2>
<h3 id="development-fast"><a class="header" href="#development-fast">Development (Fast)</a></h3>
<pre><code class="language-yaml">output:
  format: csv
  compression: none
  files:
    journal_entries: true
    master_data: true
    labels: true
</code></pre>
<h3 id="production-compact"><a class="header" href="#production-compact">Production (Compact)</a></h3>
<pre><code class="language-yaml">output:
  format: csv
  compression: zstd
  compression_level: 6
  files:
    journal_entries: true
    acdoca: true
    master_data: true
    documents: true
    subledgers: true
    trial_balances: true
    labels: true
    controls: true
</code></pre>
<h3 id="ml-training-focus"><a class="header" href="#ml-training-focus">ML Training Focus</a></h3>
<pre><code class="language-yaml">output:
  format: csv
  compression: gzip
  files:
    journal_entries: true
    labels: true                 # Important for supervised learning
    master_data: true            # For feature engineering
</code></pre>
<h3 id="sap-integration"><a class="header" href="#sap-integration">SAP Integration</a></h3>
<pre><code class="language-yaml">output:
  format: csv
  compression: none
  files:
    journal_entries: false
    acdoca: true                 # SAP ACDOCA format
    master_data: true
    documents: true
</code></pre>
<h2 id="validation-8"><a class="header" href="#validation-8">Validation</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Check</th><th>Rule</th></tr>
</thead>
<tbody>
<tr><td><code>format</code></td><td><code>csv</code> or <code>json</code></td></tr>
<tr><td><code>compression</code></td><td><code>none</code>, <code>gzip</code>, or <code>zstd</code></td></tr>
<tr><td><code>compression_level</code></td><td>1-9 (only when compression enabled)</td></tr>
</tbody>
</table>
</div>
<h2 id="see-also-14"><a class="header" href="#see-also-14">See Also</a></h2>
<ul>
<li><a href="#output-formats-1">Output Formats</a></li>
<li><a href="#graph-export">Graph Export</a></li>
<li><a href="#synth-output">synth-output Crate</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="architecture"><a class="header" href="#architecture">Architecture</a></h1>
<p>SyntheticData is designed as a modular, high-performance data generation system.</p>
<h2 id="overview-2"><a class="header" href="#overview-2">Overview</a></h2>
<pre><code>┌─────────────────────────────────────────────────────────────────────┐
│                         Application Layer                            │
│   synth-cli │ synth-server │ synth-ui                               │
├─────────────────────────────────────────────────────────────────────┤
│                        Orchestration Layer                           │
│                         synth-runtime                                │
├─────────────────────────────────────────────────────────────────────┤
│                        Generation Layer                              │
│   synth-generators │ synth-graph                                    │
├─────────────────────────────────────────────────────────────────────┤
│                        Foundation Layer                              │
│   synth-core │ synth-config │ synth-output                          │
└─────────────────────────────────────────────────────────────────────┘
</code></pre>
<h2 id="key-characteristics"><a class="header" href="#key-characteristics">Key Characteristics</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Characteristic</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><strong>Modular</strong></td><td>12 independent crates with clear boundaries</td></tr>
<tr><td><strong>Layered</strong></td><td>Strict dependency hierarchy prevents cycles</td></tr>
<tr><td><strong>High-Performance</strong></td><td>Parallel execution, memory-efficient streaming</td></tr>
<tr><td><strong>Deterministic</strong></td><td>Seeded RNG for reproducible output</td></tr>
<tr><td><strong>Type-Safe</strong></td><td>Rust’s type system ensures correctness</td></tr>
</tbody>
</table>
</div>
<h2 id="architecture-sections"><a class="header" href="#architecture-sections">Architecture Sections</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Section</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><a href="#workspace-layout">Workspace Layout</a></td><td>Crate organization and dependencies</td></tr>
<tr><td><a href="#domain-models">Domain Models</a></td><td>Core data structures</td></tr>
<tr><td><a href="#data-flow">Data Flow</a></td><td>How data moves through the system</td></tr>
<tr><td><a href="#generation-pipeline">Generation Pipeline</a></td><td>Step-by-step generation process</td></tr>
<tr><td><a href="#memory-management-1">Memory Management</a></td><td>Memory tracking and limits</td></tr>
<tr><td><a href="#design-decisions">Design Decisions</a></td><td>Key architectural choices</td></tr>
</tbody>
</table>
</div>
<h2 id="design-principles"><a class="header" href="#design-principles">Design Principles</a></h2>
<h3 id="separation-of-concerns"><a class="header" href="#separation-of-concerns">Separation of Concerns</a></h3>
<p>Each crate has a single responsibility:</p>
<ul>
<li><code>synth-core</code>: Domain models and distributions</li>
<li><code>synth-config</code>: Configuration and validation</li>
<li><code>synth-generators</code>: Data generation logic</li>
<li><code>synth-output</code>: File writing</li>
<li><code>synth-runtime</code>: Orchestration</li>
</ul>
<h3 id="dependency-inversion"><a class="header" href="#dependency-inversion">Dependency Inversion</a></h3>
<p>Core components define traits, implementations provided by higher layers:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// synth-core defines the trait
pub trait Generator&lt;T&gt; {
    fn generate_batch(&amp;mut self, count: usize) -&gt; Result&lt;Vec&lt;T&gt;&gt;;
}

// synth-generators implements it
impl Generator&lt;JournalEntry&gt; for JournalEntryGenerator {
    fn generate_batch(&amp;mut self, count: usize) -&gt; Result&lt;Vec&lt;JournalEntry&gt;&gt; {
        // Implementation
    }
}
<span class="boring">}</span></code></pre>
<h3 id="configuration-driven"><a class="header" href="#configuration-driven">Configuration-Driven</a></h3>
<p>All behavior controlled by configuration:</p>
<pre><code class="language-yaml">transactions:
  target_count: 100000
  benford:
    enabled: true
</code></pre>
<h3 id="memory-safety"><a class="header" href="#memory-safety">Memory Safety</a></h3>
<p>Rust’s ownership system prevents:</p>
<ul>
<li>Data races in parallel generation</li>
<li>Memory leaks</li>
<li>Buffer overflows</li>
</ul>
<h2 id="component-interactions"><a class="header" href="#component-interactions">Component Interactions</a></h2>
<pre><code>                    ┌─────────────┐
                    │   Config    │
                    └──────┬──────┘
                           │
        ┌──────────────────┼──────────────────┐
        │                  │                  │
        ▼                  ▼                  ▼
┌──────────────┐  ┌──────────────┐  ┌──────────────┐
│  JE Generator│  │ Doc Generator│  │ Master Data  │
└──────┬───────┘  └──────┬───────┘  └──────┬───────┘
       │                 │                 │
       └─────────────────┼─────────────────┘
                         │
                         ▼
                ┌──────────────┐
                │ Orchestrator │
                └──────┬───────┘
                       │
        ┌──────────────┼──────────────┐
        │              │              │
        ▼              ▼              ▼
   ┌─────────┐   ┌─────────┐   ┌─────────┐
   │   CSV   │   │  Graph  │   │  JSON   │
   └─────────┘   └─────────┘   └─────────┘
</code></pre>
<h2 id="performance-architecture"><a class="header" href="#performance-architecture">Performance Architecture</a></h2>
<h3 id="parallel-execution"><a class="header" href="#parallel-execution">Parallel Execution</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Thread pool distributes work
let entries: Vec&lt;JournalEntry&gt; = (0..num_threads)
    .into_par_iter()
    .flat_map(|thread_id| {
        let mut gen = generator_for_thread(thread_id);
        gen.generate_batch(batch_size)
    })
    .collect();
<span class="boring">}</span></code></pre>
<h3 id="streaming-output"><a class="header" href="#streaming-output">Streaming Output</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Memory-efficient streaming
for entry in generator.generate_stream() {
    sink.write(&amp;entry)?;
}
<span class="boring">}</span></code></pre>
<h3 id="memory-guards"><a class="header" href="#memory-guards">Memory Guards</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Memory limits enforced
let guard = MemoryGuard::new(config);
while !guard.check().exceeds_hard_limit {
    generate_batch();
}
<span class="boring">}</span></code></pre>
<h2 id="extension-points"><a class="header" href="#extension-points">Extension Points</a></h2>
<h3 id="custom-generators"><a class="header" href="#custom-generators">Custom Generators</a></h3>
<p>Implement the <code>Generator</code> trait:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl Generator&lt;CustomType&gt; for CustomGenerator {
    fn generate_batch(&amp;mut self, count: usize) -&gt; Result&lt;Vec&lt;CustomType&gt;&gt; {
        // Custom logic
    }
}
<span class="boring">}</span></code></pre>
<h3 id="custom-output-sinks"><a class="header" href="#custom-output-sinks">Custom Output Sinks</a></h3>
<p>Implement the <code>Sink</code> trait:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl Sink&lt;JournalEntry&gt; for CustomSink {
    fn write(&amp;mut self, entry: &amp;JournalEntry) -&gt; Result&lt;()&gt; {
        // Custom output logic
    }
}
<span class="boring">}</span></code></pre>
<h3 id="custom-distributions"><a class="header" href="#custom-distributions">Custom Distributions</a></h3>
<p>Create specialized samplers:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl AmountSampler for CustomAmountSampler {
    fn sample(&amp;mut self) -&gt; Decimal {
        // Custom distribution
    }
}
<span class="boring">}</span></code></pre>
<h2 id="see-also-15"><a class="header" href="#see-also-15">See Also</a></h2>
<ul>
<li><a href="crates/README.html">Crate Reference</a></li>
<li><a href="#synth-core">synth-core</a></li>
<li><a href="#synth-runtime">synth-runtime</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="workspace-layout"><a class="header" href="#workspace-layout">Workspace Layout</a></h1>
<p>SyntheticData is organized as a Rust workspace with 12 crates.</p>
<h2 id="crate-hierarchy"><a class="header" href="#crate-hierarchy">Crate Hierarchy</a></h2>
<pre><code>synth-cli          → Binary entry point
synth-server       → REST/gRPC/WebSocket server
synth-ui           → Desktop application
    │
    ▼
synth-runtime      → Generation orchestration
    │
    ├─────────────────┐
    ▼                 ▼
synth-generators  synth-graph
    │                 │
    └────────┬────────┘
             ▼
    ┌────────┴────────┐
    ▼                 ▼
synth-config     synth-output
    │
    ▼
synth-core         → Foundation layer

synth-eval         → Evaluation (standalone)
synth-ocpm         → Process mining (standalone)
synth-test-utils   → Testing utilities
</code></pre>
<h2 id="dependency-matrix"><a class="header" href="#dependency-matrix">Dependency Matrix</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Crate</th><th>Depends On</th></tr>
</thead>
<tbody>
<tr><td>synth-core</td><td>(none)</td></tr>
<tr><td>synth-config</td><td>synth-core</td></tr>
<tr><td>synth-output</td><td>synth-core</td></tr>
<tr><td>synth-generators</td><td>synth-core, synth-config</td></tr>
<tr><td>synth-graph</td><td>synth-core, synth-generators</td></tr>
<tr><td>synth-runtime</td><td>synth-core, synth-config, synth-generators, synth-output, synth-graph</td></tr>
<tr><td>synth-cli</td><td>synth-runtime</td></tr>
<tr><td>synth-server</td><td>synth-runtime</td></tr>
<tr><td>synth-ui</td><td>synth-runtime (via Tauri)</td></tr>
<tr><td>synth-eval</td><td>synth-core</td></tr>
<tr><td>synth-ocpm</td><td>synth-core</td></tr>
<tr><td>synth-test-utils</td><td>synth-core</td></tr>
</tbody>
</table>
</div>
<h2 id="directory-structure"><a class="header" href="#directory-structure">Directory Structure</a></h2>
<pre><code>SyntheticData/
├── Cargo.toml              # Workspace manifest
├── crates/
│   ├── synth-core/
│   │   ├── Cargo.toml
│   │   ├── README.md
│   │   └── src/
│   │       ├── lib.rs
│   │       ├── models/
│   │       ├── distributions/
│   │       ├── traits/
│   │       └── templates/
│   ├── synth-config/
│   │   ├── Cargo.toml
│   │   └── src/
│   │       ├── lib.rs
│   │       ├── schema.rs
│   │       ├── validation.rs
│   │       └── presets/
│   ├── synth-generators/
│   │   ├── Cargo.toml
│   │   └── src/
│   │       ├── lib.rs
│   │       ├── je_generator.rs
│   │       ├── master_data/
│   │       ├── document_flow/
│   │       ├── intercompany/
│   │       ├── balance/
│   │       ├── subledger/
│   │       ├── fx/
│   │       ├── period_close/
│   │       ├── anomaly/
│   │       └── data_quality/
│   ├── synth-output/
│   │   ├── Cargo.toml
│   │   └── src/
│   │       ├── lib.rs
│   │       ├── csv_sink.rs
│   │       └── json_sink.rs
│   ├── synth-graph/
│   │   ├── Cargo.toml
│   │   └── src/
│   │       ├── lib.rs
│   │       ├── builders/
│   │       ├── exporters/
│   │       └── features/
│   ├── synth-runtime/
│   │   ├── Cargo.toml
│   │   └── src/
│   │       ├── lib.rs
│   │       ├── orchestrator.rs
│   │       └── progress.rs
│   ├── synth-cli/
│   │   ├── Cargo.toml
│   │   └── src/
│   │       └── main.rs
│   ├── synth-server/
│   │   ├── Cargo.toml
│   │   └── src/
│   │       ├── main.rs
│   │       ├── rest/
│   │       ├── grpc/
│   │       └── websocket/
│   ├── synth-ui/
│   │   ├── package.json
│   │   ├── src/              # Svelte frontend
│   │   └── src-tauri/        # Rust backend
│   ├── synth-eval/
│   ├── synth-ocpm/
│   └── synth-test-utils/
├── benches/                  # Benchmark suite
├── docs/                     # This documentation
└── tests/                    # Integration tests
</code></pre>
<h2 id="crate-purposes"><a class="header" href="#crate-purposes">Crate Purposes</a></h2>
<h3 id="application-layer"><a class="header" href="#application-layer">Application Layer</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Crate</th><th>Purpose</th></tr>
</thead>
<tbody>
<tr><td><strong>synth-cli</strong></td><td>Command-line interface</td></tr>
<tr><td><strong>synth-server</strong></td><td>REST/gRPC/WebSocket API</td></tr>
<tr><td><strong>synth-ui</strong></td><td>Desktop application</td></tr>
</tbody>
</table>
</div>
<h3 id="processing-layer"><a class="header" href="#processing-layer">Processing Layer</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Crate</th><th>Purpose</th></tr>
</thead>
<tbody>
<tr><td><strong>synth-runtime</strong></td><td>Orchestrates generation workflow</td></tr>
<tr><td><strong>synth-generators</strong></td><td>All data generation logic</td></tr>
<tr><td><strong>synth-graph</strong></td><td>Graph construction and export</td></tr>
</tbody>
</table>
</div>
<h3 id="foundation-layer"><a class="header" href="#foundation-layer">Foundation Layer</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Crate</th><th>Purpose</th></tr>
</thead>
<tbody>
<tr><td><strong>synth-core</strong></td><td>Domain models, traits, distributions</td></tr>
<tr><td><strong>synth-config</strong></td><td>Configuration schema and validation</td></tr>
<tr><td><strong>synth-output</strong></td><td>Output sinks (CSV, JSON)</td></tr>
</tbody>
</table>
</div>
<h3 id="supporting-crates"><a class="header" href="#supporting-crates">Supporting Crates</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Crate</th><th>Purpose</th></tr>
</thead>
<tbody>
<tr><td><strong>synth-eval</strong></td><td>Quality evaluation framework</td></tr>
<tr><td><strong>synth-ocpm</strong></td><td>OCEL 2.0 process mining</td></tr>
<tr><td><strong>synth-test-utils</strong></td><td>Test fixtures and assertions</td></tr>
</tbody>
</table>
</div>
<h2 id="build-commands"><a class="header" href="#build-commands">Build Commands</a></h2>
<pre><code class="language-bash"># Build entire workspace
cargo build --release

# Build specific crate
cargo build -p synth-core
cargo build -p synth-generators

# Run tests
cargo test
cargo test -p synth-core

# Generate documentation
cargo doc --workspace --no-deps

# Run benchmarks
cargo bench
</code></pre>
<h2 id="feature-flags"><a class="header" href="#feature-flags">Feature Flags</a></h2>
<p>Workspace-level features:</p>
<pre><code class="language-toml">[workspace.features]
default = ["full"]
full = ["server", "ui", "graph"]
server = []
ui = []
graph = []
</code></pre>
<p>Crate-level features:</p>
<pre><code class="language-toml"># synth-core
[features]
templates = ["serde_yaml"]

# synth-output
[features]
compression = ["flate2", "zstd"]
</code></pre>
<h2 id="adding-a-new-crate"><a class="header" href="#adding-a-new-crate">Adding a New Crate</a></h2>
<ol>
<li>Create directory: <code>crates/synth-newcrate/</code></li>
<li>Add <code>Cargo.toml</code>:
<pre><code class="language-toml">[package]
name = "synth-newcrate"
version = "0.1.0"
edition = "2021"

[dependencies]
synth-core = { path = "../synth-core" }
</code></pre>
</li>
<li>Add to workspace <code>Cargo.toml</code>:
<pre><code class="language-toml">[workspace]
members = [
    # ...
    "crates/synth-newcrate",
]
</code></pre>
</li>
<li>Create <code>src/lib.rs</code></li>
</ol>
<h2 id="see-also-16"><a class="header" href="#see-also-16">See Also</a></h2>
<ul>
<li><a href="crates/README.html">Crate Reference</a></li>
<li><a href="#domain-models">Domain Models</a></li>
<li><a href="#data-flow">Data Flow</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="domain-models"><a class="header" href="#domain-models">Domain Models</a></h1>
<p>Core data structures representing enterprise financial concepts.</p>
<h2 id="model-categories"><a class="header" href="#model-categories">Model Categories</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Category</th><th>Models</th></tr>
</thead>
<tbody>
<tr><td><a href="#accounting">Accounting</a></td><td>JournalEntry, ChartOfAccounts, ACDOCA</td></tr>
<tr><td><a href="#master-data-2">Master Data</a></td><td>Vendor, Customer, Material, FixedAsset, Employee</td></tr>
<tr><td><a href="#documents">Documents</a></td><td>PurchaseOrder, Invoice, Payment, etc.</td></tr>
<tr><td><a href="#financial">Financial</a></td><td>TrialBalance, FxRate, AccountBalance</td></tr>
<tr><td><a href="#compliance-2">Compliance</a></td><td>InternalControl, SoDRule, LabeledAnomaly</td></tr>
</tbody>
</table>
</div>
<hr>
<h2 id="accounting"><a class="header" href="#accounting">Accounting</a></h2>
<h3 id="journalentry"><a class="header" href="#journalentry">JournalEntry</a></h3>
<p>The core accounting record.</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct JournalEntry {
    pub header: JournalEntryHeader,
    pub lines: Vec&lt;JournalEntryLine&gt;,
}

pub struct JournalEntryHeader {
    pub document_id: Uuid,
    pub company_code: String,
    pub fiscal_year: u16,
    pub fiscal_period: u8,
    pub posting_date: NaiveDate,
    pub document_date: NaiveDate,
    pub created_at: DateTime&lt;Utc&gt;,
    pub source: TransactionSource,
    pub business_process: Option&lt;BusinessProcess&gt;,

    // Document references
    pub source_document_type: Option&lt;DocumentType&gt;,
    pub source_document_id: Option&lt;String&gt;,

    // Labels
    pub is_fraud: bool,
    pub fraud_type: Option&lt;FraudType&gt;,
    pub is_anomaly: bool,
    pub anomaly_type: Option&lt;AnomalyType&gt;,

    // Control markers
    pub control_ids: Vec&lt;String&gt;,
    pub sox_relevant: bool,
    pub sod_violation: bool,
}

pub struct JournalEntryLine {
    pub line_number: u32,
    pub account_number: String,
    pub cost_center: Option&lt;String&gt;,
    pub profit_center: Option&lt;String&gt;,
    pub debit_amount: Decimal,
    pub credit_amount: Decimal,
    pub description: String,
    pub tax_code: Option&lt;String&gt;,
}
<span class="boring">}</span></code></pre>
<p><strong>Invariant:</strong> Sum of debits must equal sum of credits.</p>
<h3 id="chartofaccounts"><a class="header" href="#chartofaccounts">ChartOfAccounts</a></h3>
<p>GL account structure.</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct ChartOfAccounts {
    pub accounts: Vec&lt;Account&gt;,
}

pub struct Account {
    pub account_number: String,
    pub name: String,
    pub account_type: AccountType,
    pub account_subtype: AccountSubType,
    pub is_control_account: bool,
    pub normal_balance: NormalBalance,
    pub is_active: bool,
}

pub enum AccountType {
    Asset,
    Liability,
    Equity,
    Revenue,
    Expense,
}

pub enum AccountSubType {
    // Assets
    Cash, AccountsReceivable, Inventory, FixedAsset,
    // Liabilities
    AccountsPayable, AccruedLiabilities, LongTermDebt,
    // Equity
    CommonStock, RetainedEarnings,
    // Revenue
    SalesRevenue, ServiceRevenue,
    // Expense
    CostOfGoodsSold, OperatingExpense,
    // ...
}
<span class="boring">}</span></code></pre>
<h3 id="acdoca"><a class="header" href="#acdoca">ACDOCA</a></h3>
<p>SAP HANA Universal Journal format.</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct AcdocaEntry {
    pub rclnt: String,           // Client
    pub rldnr: String,           // Ledger
    pub rbukrs: String,          // Company code
    pub gjahr: u16,              // Fiscal year
    pub belnr: String,           // Document number
    pub docln: u32,              // Line item
    pub ryear: u16,              // Year
    pub poper: u8,               // Posting period
    pub racct: String,           // Account
    pub drcrk: DebitCreditIndicator,
    pub hsl: Decimal,            // Amount in local currency
    pub ksl: Decimal,            // Amount in group currency

    // Simulation fields
    pub zsim_fraud: bool,
    pub zsim_anomaly: bool,
    pub zsim_source: String,
}
<span class="boring">}</span></code></pre>
<hr>
<h2 id="master-data-2"><a class="header" href="#master-data-2">Master Data</a></h2>
<h3 id="vendor"><a class="header" href="#vendor">Vendor</a></h3>
<p>Supplier master record.</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct Vendor {
    pub vendor_id: String,
    pub vendor_name: String,
    pub tax_id: Option&lt;String&gt;,
    pub currency: String,
    pub country: String,
    pub payment_terms: PaymentTerms,
    pub bank_account: Option&lt;BankAccount&gt;,
    pub is_intercompany: bool,
    pub behavior: VendorBehavior,
    pub valid_from: NaiveDate,
    pub valid_to: Option&lt;NaiveDate&gt;,
}

pub struct VendorBehavior {
    pub late_payment_tendency: f64,
    pub discount_usage_rate: f64,
}
<span class="boring">}</span></code></pre>
<h3 id="customer"><a class="header" href="#customer">Customer</a></h3>
<p>Customer master record.</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct Customer {
    pub customer_id: String,
    pub customer_name: String,
    pub currency: String,
    pub country: String,
    pub credit_limit: Decimal,
    pub credit_rating: CreditRating,
    pub payment_behavior: PaymentBehavior,
    pub is_intercompany: bool,
    pub valid_from: NaiveDate,
}

pub struct PaymentBehavior {
    pub on_time_rate: f64,
    pub early_payment_rate: f64,
    pub late_payment_rate: f64,
    pub average_days_late: u32,
}
<span class="boring">}</span></code></pre>
<h3 id="material"><a class="header" href="#material">Material</a></h3>
<p>Product/material master.</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct Material {
    pub material_id: String,
    pub description: String,
    pub material_type: MaterialType,
    pub unit_of_measure: String,
    pub valuation_method: ValuationMethod,
    pub standard_cost: Decimal,
    pub gl_account: String,
}

pub enum MaterialType {
    RawMaterial,
    WorkInProgress,
    FinishedGoods,
    Service,
}

pub enum ValuationMethod {
    Fifo,
    Lifo,
    WeightedAverage,
    StandardCost,
}
<span class="boring">}</span></code></pre>
<h3 id="fixedasset"><a class="header" href="#fixedasset">FixedAsset</a></h3>
<p>Capital asset record.</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct FixedAsset {
    pub asset_id: String,
    pub description: String,
    pub asset_class: AssetClass,
    pub acquisition_date: NaiveDate,
    pub acquisition_cost: Decimal,
    pub useful_life_years: u32,
    pub depreciation_method: DepreciationMethod,
    pub salvage_value: Decimal,
    pub accumulated_depreciation: Decimal,
    pub disposal_date: Option&lt;NaiveDate&gt;,
}
<span class="boring">}</span></code></pre>
<h3 id="employee"><a class="header" href="#employee">Employee</a></h3>
<p>User/employee record.</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct Employee {
    pub employee_id: String,
    pub name: String,
    pub department: String,
    pub role: String,
    pub manager_id: Option&lt;String&gt;,
    pub approval_limit: Decimal,
    pub transaction_codes: Vec&lt;String&gt;,
    pub hire_date: NaiveDate,
}
<span class="boring">}</span></code></pre>
<hr>
<h2 id="documents"><a class="header" href="#documents">Documents</a></h2>
<h3 id="purchaseorder"><a class="header" href="#purchaseorder">PurchaseOrder</a></h3>
<p>P2P initiating document.</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct PurchaseOrder {
    pub po_number: String,
    pub vendor_id: String,
    pub company_code: String,
    pub order_date: NaiveDate,
    pub items: Vec&lt;PoLineItem&gt;,
    pub total_amount: Decimal,
    pub currency: String,
    pub status: PoStatus,
}

pub struct PoLineItem {
    pub line_number: u32,
    pub material_id: String,
    pub quantity: Decimal,
    pub unit_price: Decimal,
    pub gl_account: String,
}
<span class="boring">}</span></code></pre>
<h3 id="vendorinvoice"><a class="header" href="#vendorinvoice">VendorInvoice</a></h3>
<p>AP invoice with three-way match.</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct VendorInvoice {
    pub invoice_number: String,
    pub vendor_id: String,
    pub po_number: Option&lt;String&gt;,
    pub gr_number: Option&lt;String&gt;,
    pub invoice_date: NaiveDate,
    pub due_date: NaiveDate,
    pub total_amount: Decimal,
    pub match_status: MatchStatus,
}

pub enum MatchStatus {
    Matched,
    QuantityVariance,
    PriceVariance,
    Blocked,
}
<span class="boring">}</span></code></pre>
<h3 id="documentreference"><a class="header" href="#documentreference">DocumentReference</a></h3>
<p>Links documents in flows.</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct DocumentReference {
    pub from_document_type: DocumentType,
    pub from_document_id: String,
    pub to_document_type: DocumentType,
    pub to_document_id: String,
    pub reference_type: ReferenceType,
}

pub enum ReferenceType {
    FollowsFrom,     // Normal flow
    PaymentFor,      // Payment → Invoice
    ReversalOf,      // Reversal/credit memo
}
<span class="boring">}</span></code></pre>
<hr>
<h2 id="financial"><a class="header" href="#financial">Financial</a></h2>
<h3 id="trialbalance"><a class="header" href="#trialbalance">TrialBalance</a></h3>
<p>Period-end balances.</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct TrialBalance {
    pub company_code: String,
    pub fiscal_year: u16,
    pub fiscal_period: u8,
    pub accounts: Vec&lt;TrialBalanceRow&gt;,
}

pub struct TrialBalanceRow {
    pub account_number: String,
    pub account_name: String,
    pub opening_balance: Decimal,
    pub period_debits: Decimal,
    pub period_credits: Decimal,
    pub closing_balance: Decimal,
}
<span class="boring">}</span></code></pre>
<h3 id="fxrate"><a class="header" href="#fxrate">FxRate</a></h3>
<p>Exchange rate record.</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct FxRate {
    pub from_currency: String,
    pub to_currency: String,
    pub rate_date: NaiveDate,
    pub rate_type: RateType,
    pub rate: Decimal,
}

pub enum RateType {
    Spot,
    Closing,
    Average,
}
<span class="boring">}</span></code></pre>
<hr>
<h2 id="compliance-2"><a class="header" href="#compliance-2">Compliance</a></h2>
<h3 id="labeledanomaly"><a class="header" href="#labeledanomaly">LabeledAnomaly</a></h3>
<p>ML training label.</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct LabeledAnomaly {
    pub document_id: Uuid,
    pub anomaly_id: String,
    pub anomaly_type: AnomalyType,
    pub category: AnomalyCategory,
    pub severity: Severity,
    pub description: String,
    pub detection_difficulty: DetectionDifficulty,
}

pub enum AnomalyType {
    Fraud,
    Error,
    ProcessIssue,
    Statistical,
    Relational,
}
<span class="boring">}</span></code></pre>
<h3 id="internalcontrol"><a class="header" href="#internalcontrol">InternalControl</a></h3>
<p>SOX control definition.</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct InternalControl {
    pub control_id: String,
    pub name: String,
    pub description: String,
    pub control_type: ControlType,
    pub frequency: ControlFrequency,
    pub assertions: Vec&lt;Assertion&gt;,
}
<span class="boring">}</span></code></pre>
<hr>
<h2 id="decimal-handling"><a class="header" href="#decimal-handling">Decimal Handling</a></h2>
<p>All monetary amounts use <code>rust_decimal::Decimal</code>:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use rust_decimal::Decimal;
use rust_decimal_macros::dec;

let amount = dec!(1234.56);
let tax = amount * dec!(0.077);
<span class="boring">}</span></code></pre>
<p>Serialized as strings to prevent IEEE 754 issues:</p>
<pre><code class="language-json">{"amount": "1234.56"}
</code></pre>
<h2 id="see-also-17"><a class="header" href="#see-also-17">See Also</a></h2>
<ul>
<li><a href="#synth-core">synth-core Crate</a></li>
<li><a href="#data-flow">Data Flow</a></li>
<li><a href="#generation-pipeline">Generation Pipeline</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="data-flow"><a class="header" href="#data-flow">Data Flow</a></h1>
<p>How data flows through the SyntheticData system.</p>
<h2 id="high-level-flow"><a class="header" href="#high-level-flow">High-Level Flow</a></h2>
<pre><code>┌─────────────┐
│   Config    │
└──────┬──────┘
       │
       ▼
┌─────────────────────────────────────────────────────────────┐
│                     Orchestrator                             │
│                                                              │
│  ┌──────────┐   ┌──────────┐   ┌──────────┐   ┌──────────┐ │
│  │  Master  │ → │  Opening │ → │ Transact │ → │  Period  │ │
│  │   Data   │   │ Balances │   │   ions   │   │  Close   │ │
│  └──────────┘   └──────────┘   └──────────┘   └──────────┘ │
│                                                              │
└───────────────────────────┬─────────────────────────────────┘
                            │
       ┌────────────────────┼────────────────────┐
       │                    │                    │
       ▼                    ▼                    ▼
┌─────────────┐      ┌─────────────┐      ┌─────────────┐
│  CSV Sink   │      │ Graph Export│      │  Labels     │
└─────────────┘      └─────────────┘      └─────────────┘
</code></pre>
<h2 id="phase-1-configuration-loading"><a class="header" href="#phase-1-configuration-loading">Phase 1: Configuration Loading</a></h2>
<pre><code>YAML File → Parser → Validator → Config Object
</code></pre>
<ol>
<li><strong>Load</strong>: Read YAML/JSON file</li>
<li><strong>Parse</strong>: Convert to strongly-typed structures</li>
<li><strong>Validate</strong>: Check constraints and ranges</li>
<li><strong>Resolve</strong>: Apply defaults and presets</li>
</ol>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let config = Config::from_yaml_file("config.yaml")?;
ConfigValidator::new().validate(&amp;config)?;
<span class="boring">}</span></code></pre>
<h2 id="phase-2-master-data-generation"><a class="header" href="#phase-2-master-data-generation">Phase 2: Master Data Generation</a></h2>
<pre><code>Config → Master Data Generators → Entity Registry
</code></pre>
<p>Order of generation (to satisfy dependencies):</p>
<ol>
<li><strong>Chart of Accounts</strong>: GL account structure</li>
<li><strong>Employees</strong>: Users with approval limits</li>
<li><strong>Vendors</strong>: Suppliers (reference employees as approvers)</li>
<li><strong>Customers</strong>: Buyers (reference employees)</li>
<li><strong>Materials</strong>: Products (reference accounts)</li>
<li><strong>Fixed Assets</strong>: Capital assets (reference accounts)</li>
</ol>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Entity registry maintains references
let registry = EntityRegistry::new();
registry.register_vendors(&amp;vendors);
registry.register_customers(&amp;customers);
<span class="boring">}</span></code></pre>
<h2 id="phase-3-opening-balance-generation"><a class="header" href="#phase-3-opening-balance-generation">Phase 3: Opening Balance Generation</a></h2>
<pre><code>Config + CoA → Balance Generator → Opening JEs
</code></pre>
<p>Generates coherent opening balance sheet:</p>
<ol>
<li>Calculate target balances per account type</li>
<li>Distribute across accounts</li>
<li>Generate opening entries</li>
<li>Verify A = L + E</li>
</ol>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let opening = OpeningBalanceGenerator::new(&amp;config);
let entries = opening.generate()?;

// Verify balance coherence
assert!(entries.iter().all(|e| e.is_balanced()));
<span class="boring">}</span></code></pre>
<h2 id="phase-4-transaction-generation"><a class="header" href="#phase-4-transaction-generation">Phase 4: Transaction Generation</a></h2>
<h3 id="document-flow-path"><a class="header" href="#document-flow-path">Document Flow Path</a></h3>
<pre><code>Config → P2P/O2C Generators → Documents → JE Generator → Entries
</code></pre>
<p>P2P Flow:</p>
<pre><code>PO Generator → Purchase Order
                    │
                    ▼
GR Generator → Goods Receipt → JE (Inventory/GR-IR)
                    │
                    ▼
Invoice Gen. → Vendor Invoice → JE (GR-IR/AP)
                    │
                    ▼
Payment Gen. → Payment → JE (AP/Cash)
</code></pre>
<h3 id="direct-je-path"><a class="header" href="#direct-je-path">Direct JE Path</a></h3>
<pre><code>Config → JE Generator → Entries
</code></pre>
<p>For transactions not from document flows:</p>
<ul>
<li>Manual entries</li>
<li>Recurring entries</li>
<li>Adjustments</li>
</ul>
<h2 id="phase-5-balance-tracking"><a class="header" href="#phase-5-balance-tracking">Phase 5: Balance Tracking</a></h2>
<pre><code>Entries → Balance Tracker → Running Balances → Trial Balance
</code></pre>
<p>Continuous tracking during generation:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let mut tracker = BalanceTracker::new(&amp;coa);

for entry in &amp;entries {
    tracker.post(&amp;entry)?;

    // Verify coherence after each entry
    assert!(tracker.is_balanced());
}

let trial_balance = tracker.to_trial_balance(period);
<span class="boring">}</span></code></pre>
<h2 id="phase-6-anomaly-injection"><a class="header" href="#phase-6-anomaly-injection">Phase 6: Anomaly Injection</a></h2>
<pre><code>Entries → Anomaly Injector → Modified Entries + Labels
</code></pre>
<p>Anomalies injected post-generation:</p>
<ol>
<li>Select entries based on targeting strategy</li>
<li>Apply anomaly transformation</li>
<li>Generate label record</li>
</ol>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let injector = AnomalyInjector::new(&amp;config.anomaly_injection);
let (modified, labels) = injector.inject(&amp;entries)?;
<span class="boring">}</span></code></pre>
<h2 id="phase-7-period-close"><a class="header" href="#phase-7-period-close">Phase 7: Period Close</a></h2>
<pre><code>Entries + Balances → Close Engine → Closing Entries
</code></pre>
<p>Monthly:</p>
<ul>
<li>Accruals</li>
<li>Depreciation</li>
<li>Subledger reconciliation</li>
</ul>
<p>Quarterly:</p>
<ul>
<li>IC eliminations</li>
<li>Currency translation</li>
</ul>
<p>Annual:</p>
<ul>
<li>Closing entries</li>
<li>Retained earnings</li>
</ul>
<h2 id="phase-8-output-generation"><a class="header" href="#phase-8-output-generation">Phase 8: Output Generation</a></h2>
<h3 id="csvjson-output"><a class="header" href="#csvjson-output">CSV/JSON Output</a></h3>
<pre><code>Entries + Master Data → Sinks → Files
</code></pre>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let mut sink = CsvSink::new("output/journal_entries.csv")?;
sink.write_batch(&amp;entries)?;
sink.flush()?;
<span class="boring">}</span></code></pre>
<h3 id="graph-output"><a class="header" href="#graph-output">Graph Output</a></h3>
<pre><code>Entries → Graph Builder → Graph → Exporter → PyG/Neo4j
</code></pre>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let builder = TransactionGraphBuilder::new();
let graph = builder.build(&amp;entries)?;

let exporter = PyTorchGeometricExporter::new("output/graphs");
exporter.export(&amp;graph, split_config)?;
<span class="boring">}</span></code></pre>
<h2 id="data-dependencies"><a class="header" href="#data-dependencies">Data Dependencies</a></h2>
<pre><code>         ┌─────────────┐
         │    Config   │
         └──────┬──────┘
                │
    ┌───────────┼───────────┐
    │           │           │
    ▼           ▼           ▼
┌───────┐  ┌───────┐  ┌───────┐
│  CoA  │  │Vendors│  │Customs│
└───┬───┘  └───┬───┘  └───┬───┘
    │          │          │
    │    ┌─────┴─────┐    │
    │    │           │    │
    ▼    ▼           ▼    ▼
┌─────────────┐  ┌─────────────┐
│   P2P Docs  │  │   O2C Docs  │
└──────┬──────┘  └──────┬──────┘
       │                │
       └───────┬────────┘
               │
               ▼
        ┌─────────────┐
        │   Entries   │
        └──────┬──────┘
               │
    ┌──────────┼──────────┐
    │          │          │
    ▼          ▼          ▼
┌───────┐ ┌───────┐ ┌───────┐
│  TB   │ │ Graph │ │Labels │
└───────┘ └───────┘ └───────┘
</code></pre>
<h2 id="streaming-vs-batch"><a class="header" href="#streaming-vs-batch">Streaming vs Batch</a></h2>
<h3 id="batch-mode"><a class="header" href="#batch-mode">Batch Mode</a></h3>
<p>All data in memory:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let entries = generator.generate_batch(100000)?;
sink.write_batch(&amp;entries)?;
<span class="boring">}</span></code></pre>
<p><strong>Pro:</strong> Fast parallel processing
<strong>Con:</strong> Memory intensive</p>
<h3 id="streaming-mode"><a class="header" href="#streaming-mode">Streaming Mode</a></h3>
<p>Process one at a time:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>for entry in generator.generate_stream() {
    sink.write(&amp;entry?)?;
}
<span class="boring">}</span></code></pre>
<p><strong>Pro:</strong> Memory efficient
<strong>Con:</strong> No parallelism</p>
<h3 id="hybrid-mode"><a class="header" href="#hybrid-mode">Hybrid Mode</a></h3>
<p>Batch with periodic flush:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>for batch in generator.generate_batches(1000) {
    let entries = batch?;
    sink.write_batch(&amp;entries)?;

    if memory_guard.check().exceeds_soft_limit {
        sink.flush()?;
    }
}
<span class="boring">}</span></code></pre>
<h2 id="see-also-18"><a class="header" href="#see-also-18">See Also</a></h2>
<ul>
<li><a href="#generation-pipeline">Generation Pipeline</a></li>
<li><a href="#memory-management-1">Memory Management</a></li>
<li><a href="#synth-runtime">synth-runtime</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="generation-pipeline"><a class="header" href="#generation-pipeline">Generation Pipeline</a></h1>
<p>Step-by-step generation process orchestrated by <code>synth-runtime</code>.</p>
<h2 id="pipeline-overview"><a class="header" href="#pipeline-overview">Pipeline Overview</a></h2>
<pre><code>┌─────────────────────────────────────────────────────────────────────┐
│                      GenerationOrchestrator                          │
│                                                                      │
│  ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐   │
│  │Init  │→│Master│→│Open  │→│Trans │→│Close │→│Inject│→│Export│   │
│  │      │ │Data  │ │Bal   │ │      │ │      │ │      │ │      │   │
│  └──────┘ └──────┘ └──────┘ └──────┘ └──────┘ └──────┘ └──────┘   │
│                                                                      │
└─────────────────────────────────────────────────────────────────────┘
</code></pre>
<h2 id="stage-1-initialization"><a class="header" href="#stage-1-initialization">Stage 1: Initialization</a></h2>
<p><strong>Purpose:</strong> Prepare generation environment</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn initialize(&amp;mut self) -&gt; Result&lt;()&gt; {
    // 1. Validate configuration
    ConfigValidator::new().validate(&amp;self.config)?;

    // 2. Initialize RNG with seed
    self.rng = ChaCha8Rng::seed_from_u64(self.config.global.seed);

    // 3. Create UUID factory
    self.uuid_factory = DeterministicUuidFactory::new(self.config.global.seed);

    // 4. Set up memory guard
    self.memory_guard = MemoryGuard::new(self.config.memory_config());

    // 5. Create output directories
    fs::create_dir_all(&amp;self.output_path)?;

    Ok(())
}
<span class="boring">}</span></code></pre>
<p><strong>Outputs:</strong></p>
<ul>
<li>Validated configuration</li>
<li>Initialized RNG</li>
<li>UUID factory</li>
<li>Memory guard</li>
<li>Output directories</li>
</ul>
<h2 id="stage-2-master-data-generation"><a class="header" href="#stage-2-master-data-generation">Stage 2: Master Data Generation</a></h2>
<p><strong>Purpose:</strong> Generate all entity master records</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn generate_master_data(&amp;mut self) -&gt; Result&lt;MasterDataState&gt; {
    let mut state = MasterDataState::new();

    // 1. Chart of Accounts
    let coa_gen = CoaGenerator::new(&amp;self.config, &amp;mut self.rng);
    state.chart_of_accounts = coa_gen.generate()?;

    // 2. Employees (needed for approvals)
    let emp_gen = EmployeeGenerator::new(&amp;self.config, &amp;mut self.rng);
    state.employees = emp_gen.generate()?;

    // 3. Vendors (reference employees)
    let vendor_gen = VendorGenerator::new(&amp;self.config, &amp;mut self.rng);
    state.vendors = vendor_gen.generate()?;

    // 4. Customers
    let customer_gen = CustomerGenerator::new(&amp;self.config, &amp;mut self.rng);
    state.customers = customer_gen.generate()?;

    // 5. Materials
    let material_gen = MaterialGenerator::new(&amp;self.config, &amp;mut self.rng);
    state.materials = material_gen.generate()?;

    // 6. Fixed Assets
    let asset_gen = AssetGenerator::new(&amp;self.config, &amp;mut self.rng);
    state.fixed_assets = asset_gen.generate()?;

    // 7. Register in entity registry
    self.registry.register_all(&amp;state);

    Ok(state)
}
<span class="boring">}</span></code></pre>
<p><strong>Outputs:</strong></p>
<ul>
<li>Chart of Accounts</li>
<li>Vendors, Customers</li>
<li>Materials, Fixed Assets</li>
<li>Employees</li>
<li>Entity Registry</li>
</ul>
<h2 id="stage-3-opening-balance-generation"><a class="header" href="#stage-3-opening-balance-generation">Stage 3: Opening Balance Generation</a></h2>
<p><strong>Purpose:</strong> Create coherent opening balance sheet</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn generate_opening_balances(&amp;mut self) -&gt; Result&lt;Vec&lt;JournalEntry&gt;&gt; {
    let generator = OpeningBalanceGenerator::new(
        &amp;self.config,
        &amp;self.state.chart_of_accounts,
        &amp;mut self.rng,
    );

    let entries = generator.generate()?;

    // Initialize balance tracker
    self.balance_tracker = BalanceTracker::new(&amp;self.state.chart_of_accounts);
    for entry in &amp;entries {
        self.balance_tracker.post(entry)?;
    }

    // Verify A = L + E
    assert!(self.balance_tracker.is_balanced());

    Ok(entries)
}
<span class="boring">}</span></code></pre>
<p><strong>Outputs:</strong></p>
<ul>
<li>Opening balance entries</li>
<li>Initialized balance tracker</li>
</ul>
<h2 id="stage-4-transaction-generation"><a class="header" href="#stage-4-transaction-generation">Stage 4: Transaction Generation</a></h2>
<p><strong>Purpose:</strong> Generate main transaction volume</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn generate_transactions(&amp;mut self) -&gt; Result&lt;Vec&lt;JournalEntry&gt;&gt; {
    let target = self.config.transactions.target_count;
    let mut entries = Vec::with_capacity(target as usize);

    // Calculate counts by source
    let p2p_count = (target as f64 * self.config.document_flows.p2p.flow_rate) as u64;
    let o2c_count = (target as f64 * self.config.document_flows.o2c.flow_rate) as u64;
    let other_count = target - p2p_count - o2c_count;

    // 1. Generate P2P flows
    let p2p_entries = self.generate_p2p_flows(p2p_count)?;
    entries.extend(p2p_entries);

    // 2. Generate O2C flows
    let o2c_entries = self.generate_o2c_flows(o2c_count)?;
    entries.extend(o2c_entries);

    // 3. Generate other entries (manual, recurring, etc.)
    let other_entries = self.generate_other_entries(other_count)?;
    entries.extend(other_entries);

    // 4. Sort by posting date
    entries.sort_by_key(|e| e.header.posting_date);

    // 5. Update balance tracker
    for entry in &amp;entries {
        self.balance_tracker.post(entry)?;
    }

    Ok(entries)
}
<span class="boring">}</span></code></pre>
<h3 id="p2p-flow-generation"><a class="header" href="#p2p-flow-generation">P2P Flow Generation</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn generate_p2p_flows(&amp;mut self, count: u64) -&gt; Result&lt;Vec&lt;JournalEntry&gt;&gt; {
    let mut p2p_gen = P2pGenerator::new(&amp;self.config, &amp;self.registry, &amp;mut self.rng);
    let mut doc_gen = DocumentFlowJeGenerator::new(&amp;self.config);

    let mut entries = Vec::new();

    for _ in 0..count {
        // 1. Generate document flow
        let flow = p2p_gen.generate_flow()?;
        self.state.documents.add_p2p_flow(&amp;flow);

        // 2. Generate journal entries from flow
        let flow_entries = doc_gen.generate_from_p2p(&amp;flow)?;
        entries.extend(flow_entries);
    }

    Ok(entries)
}
<span class="boring">}</span></code></pre>
<p><strong>Outputs:</strong></p>
<ul>
<li>Journal entries</li>
<li>Document records</li>
<li>Updated balances</li>
</ul>
<h2 id="stage-5-period-close"><a class="header" href="#stage-5-period-close">Stage 5: Period Close</a></h2>
<p><strong>Purpose:</strong> Run period-end processes</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn run_period_close(&amp;mut self) -&gt; Result&lt;()&gt; {
    let close_engine = CloseEngine::new(&amp;self.config.period_close);

    for period in self.config.periods() {
        // 1. Monthly close
        let monthly_entries = close_engine.run_monthly_close(
            period,
            &amp;self.state,
            &amp;mut self.balance_tracker,
        )?;
        self.state.entries.extend(monthly_entries);

        // 2. Quarterly close (if applicable)
        if period.is_quarter_end() {
            let quarterly_entries = close_engine.run_quarterly_close(
                period,
                &amp;self.state,
            )?;
            self.state.entries.extend(quarterly_entries);
        }

        // 3. Generate trial balance
        let trial_balance = self.balance_tracker.to_trial_balance(period);
        self.state.trial_balances.push(trial_balance);
    }

    // 4. Annual close
    if self.config.has_year_end() {
        let annual_entries = close_engine.run_annual_close(&amp;self.state)?;
        self.state.entries.extend(annual_entries);
    }

    Ok(())
}
<span class="boring">}</span></code></pre>
<p><strong>Outputs:</strong></p>
<ul>
<li>Accrual entries</li>
<li>Depreciation entries</li>
<li>Closing entries</li>
<li>Trial balances</li>
</ul>
<h2 id="stage-6-anomaly-injection"><a class="header" href="#stage-6-anomaly-injection">Stage 6: Anomaly Injection</a></h2>
<p><strong>Purpose:</strong> Add anomalies and generate labels</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn inject_anomalies(&amp;mut self) -&gt; Result&lt;()&gt; {
    if !self.config.anomaly_injection.enabled {
        return Ok(());
    }

    let mut injector = AnomalyInjector::new(
        &amp;self.config.anomaly_injection,
        &amp;mut self.rng,
    );

    // 1. Select entries for injection
    let target_count = (self.state.entries.len() as f64
        * self.config.anomaly_injection.total_rate) as usize;

    // 2. Inject anomalies
    let (modified, labels) = injector.inject(
        &amp;mut self.state.entries,
        target_count,
    )?;

    // 3. Store labels
    self.state.anomaly_labels = labels;

    // 4. Apply data quality variations
    if self.config.data_quality.enabled {
        let dq_injector = DataQualityInjector::new(&amp;self.config.data_quality);
        dq_injector.apply(&amp;mut self.state)?;
    }

    Ok(())
}
<span class="boring">}</span></code></pre>
<p><strong>Outputs:</strong></p>
<ul>
<li>Modified entries with anomalies</li>
<li>Anomaly labels for ML</li>
</ul>
<h2 id="stage-7-export"><a class="header" href="#stage-7-export">Stage 7: Export</a></h2>
<p><strong>Purpose:</strong> Write all outputs</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn export(&amp;self) -&gt; Result&lt;()&gt; {
    // 1. Master data
    self.export_master_data()?;

    // 2. Transactions
    self.export_transactions()?;

    // 3. Documents
    self.export_documents()?;

    // 4. Subledgers
    self.export_subledgers()?;

    // 5. Trial balances
    self.export_trial_balances()?;

    // 6. Labels
    self.export_labels()?;

    // 7. Controls
    self.export_controls()?;

    // 8. Graphs (if enabled)
    if self.config.graph_export.enabled {
        self.export_graphs()?;
    }

    Ok(())
}
<span class="boring">}</span></code></pre>
<p><strong>Outputs:</strong></p>
<ul>
<li>CSV/JSON files</li>
<li>Graph exports</li>
<li>Label files</li>
</ul>
<h2 id="parallel-execution-1"><a class="header" href="#parallel-execution-1">Parallel Execution</a></h2>
<p>Stages that support parallelism:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Parallel transaction generation
let entries: Vec&lt;JournalEntry&gt; = (0..num_threads)
    .into_par_iter()
    .flat_map(|thread_id| {
        let mut gen = JournalEntryGenerator::new(
            &amp;config,
            seed + thread_id as u64,
        );
        gen.generate_batch(batch_size)
    })
    .collect();
<span class="boring">}</span></code></pre>
<h2 id="progress-tracking"><a class="header" href="#progress-tracking">Progress Tracking</a></h2>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn run_with_progress&lt;F&gt;(&amp;mut self, callback: F) -&gt; Result&lt;()&gt;
where
    F: Fn(Progress),
{
    let tracker = ProgressTracker::new(self.config.total_items());

    for stage in self.stages() {
        tracker.set_phase(&amp;stage.name);
        stage.run()?;
        tracker.advance(stage.items);
        callback(tracker.progress());
    }

    Ok(())
}
<span class="boring">}</span></code></pre>
<h2 id="see-also-19"><a class="header" href="#see-also-19">See Also</a></h2>
<ul>
<li><a href="#data-flow">Data Flow</a></li>
<li><a href="#synth-runtime">synth-runtime</a></li>
<li><a href="#memory-management-1">Memory Management</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="memory-management-1"><a class="header" href="#memory-management-1">Memory Management</a></h1>
<p>How SyntheticData manages memory during generation.</p>
<h2 id="overview-3"><a class="header" href="#overview-3">Overview</a></h2>
<p>Large-scale data generation can consume significant memory. SyntheticData provides:</p>
<ul>
<li><strong>Memory Guard</strong>: Cross-platform memory tracking</li>
<li><strong>Soft/Hard Limits</strong>: Configurable thresholds</li>
<li><strong>Streaming Output</strong>: Reduce memory pressure</li>
<li><strong>Growth Rate Monitoring</strong>: Detect runaway consumption</li>
</ul>
<h2 id="memory-guard"><a class="header" href="#memory-guard">Memory Guard</a></h2>
<p>The <code>MemoryGuard</code> component tracks process memory usage:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct MemoryGuard {
    config: MemoryGuardConfig,
    last_check: Instant,
    last_usage: u64,
}

pub struct MemoryGuardConfig {
    pub soft_limit: u64,           // Pause/slow threshold
    pub hard_limit: u64,           // Stop threshold
    pub check_interval_ms: u64,    // How often to check
    pub growth_rate_threshold: f64, // Bytes/sec warning
}

pub struct MemoryStatus {
    pub current_usage: u64,
    pub exceeds_soft_limit: bool,
    pub exceeds_hard_limit: bool,
    pub growth_rate: f64,
}
<span class="boring">}</span></code></pre>
<h2 id="platform-support"><a class="header" href="#platform-support">Platform Support</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Platform</th><th>Method</th></tr>
</thead>
<tbody>
<tr><td>Linux</td><td><code>/proc/self/statm</code></td></tr>
<tr><td>macOS</td><td><code>ps</code> command</td></tr>
<tr><td>Windows</td><td>Stubbed (returns 0)</td></tr>
</tbody>
</table>
</div>
<h3 id="linux-implementation"><a class="header" href="#linux-implementation">Linux Implementation</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[cfg(target_os = "linux")]
fn get_memory_usage() -&gt; u64 {
    let statm = fs::read_to_string("/proc/self/statm").ok()?;
    let rss_pages: u64 = statm.split_whitespace().nth(1)?.parse().ok()?;
    let page_size = unsafe { libc::sysconf(libc::_SC_PAGESIZE) } as u64;
    rss_pages * page_size
}
<span class="boring">}</span></code></pre>
<h3 id="macos-implementation"><a class="header" href="#macos-implementation">macOS Implementation</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[cfg(target_os = "macos")]
fn get_memory_usage() -&gt; u64 {
    let output = Command::new("ps")
        .args(["-o", "rss=", "-p", &amp;std::process::id().to_string()])
        .output()
        .ok()?;
    let rss_kb: u64 = String::from_utf8_lossy(&amp;output.stdout)
        .trim()
        .parse()
        .ok()?;
    rss_kb * 1024
}
<span class="boring">}</span></code></pre>
<h2 id="configuration-8"><a class="header" href="#configuration-8">Configuration</a></h2>
<pre><code class="language-yaml">global:
  memory_limit: 2147483648    # 2 GB hard limit
</code></pre>
<p>Or programmatically:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let config = MemoryGuardConfig {
    soft_limit: 1024 * 1024 * 1024,      // 1 GB
    hard_limit: 2 * 1024 * 1024 * 1024,  // 2 GB
    check_interval_ms: 1000,              // Check every second
    growth_rate_threshold: 100_000_000.0, // 100 MB/sec
};
<span class="boring">}</span></code></pre>
<h2 id="usage-in-generation"><a class="header" href="#usage-in-generation">Usage in Generation</a></h2>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn generate_with_memory_guard(&amp;mut self) -&gt; Result&lt;()&gt; {
    let guard = MemoryGuard::new(self.memory_config);

    loop {
        // Check memory
        let status = guard.check();

        if status.exceeds_hard_limit {
            // Stop generation
            return Err(Error::MemoryExceeded);
        }

        if status.exceeds_soft_limit {
            // Flush output and trigger GC
            self.sink.flush()?;
            self.state.clear_caches();
            continue;
        }

        if status.growth_rate &gt; guard.config.growth_rate_threshold {
            // Slow down
            thread::sleep(Duration::from_millis(100));
        }

        // Generate batch
        let batch = self.generator.generate_batch(BATCH_SIZE)?;
        self.process_batch(batch)?;

        if self.is_complete() {
            break;
        }
    }

    Ok(())
}
<span class="boring">}</span></code></pre>
<h2 id="memory-estimation"><a class="header" href="#memory-estimation">Memory Estimation</a></h2>
<p>Estimate memory requirements before generation:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn estimate_memory(config: &amp;Config) -&gt; MemoryEstimate {
    let entry_size = 512;  // Approximate bytes per entry
    let master_data_size = config.estimate_master_data_size();

    let peak = master_data_size
        + (config.transactions.target_count as u64 * entry_size);

    let streaming_peak = master_data_size
        + (BATCH_SIZE as u64 * entry_size);

    MemoryEstimate {
        batch_peak: peak,
        streaming_peak,
        recommended_limit: peak * 2,
    }
}
<span class="boring">}</span></code></pre>
<h2 id="memory-efficient-patterns"><a class="header" href="#memory-efficient-patterns">Memory-Efficient Patterns</a></h2>
<h3 id="streaming-output-1"><a class="header" href="#streaming-output-1">Streaming Output</a></h3>
<p>Write as you generate instead of accumulating:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Memory-efficient
for entry in generator.generate_stream() {
    sink.write(&amp;entry?)?;
}

// Memory-intensive (avoid for large volumes)
let all_entries = generator.generate_batch(1_000_000)?;
sink.write_batch(&amp;all_entries)?;
<span class="boring">}</span></code></pre>
<h3 id="batch-processing-with-flush"><a class="header" href="#batch-processing-with-flush">Batch Processing with Flush</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>const BATCH_SIZE: usize = 10_000;

let mut buffer = Vec::with_capacity(BATCH_SIZE);

for entry in generator.generate_stream() {
    buffer.push(entry?);

    if buffer.len() &gt;= BATCH_SIZE {
        sink.write_batch(&amp;buffer)?;
        buffer.clear();
    }
}

// Final flush
if !buffer.is_empty() {
    sink.write_batch(&amp;buffer)?;
}
<span class="boring">}</span></code></pre>
<h3 id="lazy-loading"><a class="header" href="#lazy-loading">Lazy Loading</a></h3>
<p>Load master data on demand:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct LazyRegistry {
    vendors: OnceCell&lt;Vec&lt;Vendor&gt;&gt;,
    vendor_loader: Box&lt;dyn Fn() -&gt; Vec&lt;Vendor&gt;&gt;,
}

impl LazyRegistry {
    pub fn vendors(&amp;self) -&gt; &amp;[Vendor] {
        self.vendors.get_or_init(|| (self.vendor_loader)())
    }
}
<span class="boring">}</span></code></pre>
<h2 id="memory-limits-by-component"><a class="header" href="#memory-limits-by-component">Memory Limits by Component</a></h2>
<p>Estimated memory usage:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Component</th><th>Size (per item)</th><th>For 1M entries</th></tr>
</thead>
<tbody>
<tr><td>JournalEntry</td><td>~512 bytes</td><td>~500 MB</td></tr>
<tr><td>Document</td><td>~1 KB</td><td>~1 GB</td></tr>
<tr><td>Graph Node</td><td>~128 bytes</td><td>~128 MB</td></tr>
<tr><td>Graph Edge</td><td>~64 bytes</td><td>~64 MB</td></tr>
</tbody>
</table>
</div>
<h2 id="monitoring"><a class="header" href="#monitoring">Monitoring</a></h2>
<h3 id="progress-with-memory"><a class="header" href="#progress-with-memory">Progress with Memory</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>orchestrator.run_with_progress(|progress| {
    let memory_mb = guard.check().current_usage / 1_000_000;
    println!(
        "[{:.1}%] {} entries | {} MB",
        progress.percent,
        progress.current,
        memory_mb
    );
});
<span class="boring">}</span></code></pre>
<h3 id="server-endpoint"><a class="header" href="#server-endpoint">Server Endpoint</a></h3>
<pre><code class="language-bash">curl http://localhost:3000/health
</code></pre>
<pre><code class="language-json">{
  "status": "healthy",
  "memory_usage_mb": 512,
  "memory_limit_mb": 2048,
  "memory_percent": 25.0
}
</code></pre>
<h2 id="troubleshooting-3"><a class="header" href="#troubleshooting-3">Troubleshooting</a></h2>
<h3 id="out-of-memory"><a class="header" href="#out-of-memory">Out of Memory</a></h3>
<p><strong>Symptoms:</strong> Process killed, “out of memory” error</p>
<p><strong>Solutions:</strong></p>
<ol>
<li>Reduce <code>target_count</code></li>
<li>Enable streaming output</li>
<li>Increase system memory</li>
<li>Set appropriate <code>memory_limit</code></li>
</ol>
<h3 id="slow-generation"><a class="header" href="#slow-generation">Slow Generation</a></h3>
<p><strong>Symptoms:</strong> Generation slows over time</p>
<p><strong>Cause:</strong> Memory pressure triggering slowdown</p>
<p><strong>Solutions:</strong></p>
<ol>
<li>Increase soft limit</li>
<li>Reduce batch size</li>
<li>Enable more aggressive flushing</li>
</ol>
<h3 id="memory-not-freed"><a class="header" href="#memory-not-freed">Memory Not Freed</a></h3>
<p><strong>Symptoms:</strong> Memory stays high after generation</p>
<p><strong>Cause:</strong> Data retained in caches</p>
<p><strong>Solution:</strong> Explicitly clear state:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>orchestrator.clear_caches();
<span class="boring">}</span></code></pre>
<h2 id="see-also-20"><a class="header" href="#see-also-20">See Also</a></h2>
<ul>
<li><a href="#performance-tuning">Performance Tuning</a></li>
<li><a href="#synth-runtime">synth-runtime</a></li>
<li><a href="#global-settings-1">Configuration</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="design-decisions"><a class="header" href="#design-decisions">Design Decisions</a></h1>
<p>Key architectural choices and their rationale.</p>
<h2 id="1-deterministic-rng"><a class="header" href="#1-deterministic-rng">1. Deterministic RNG</a></h2>
<p><strong>Decision:</strong> Use seeded ChaCha8 RNG for all randomness.</p>
<p><strong>Rationale:</strong></p>
<ul>
<li>Reproducible output for testing and debugging</li>
<li>Consistent results across runs</li>
<li>Parallel generation with per-thread seeds</li>
</ul>
<p><strong>Implementation:</strong></p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use rand_chacha::ChaCha8Rng;
use rand::SeedableRng;

let mut rng = ChaCha8Rng::seed_from_u64(config.global.seed);
<span class="boring">}</span></code></pre>
<p><strong>Trade-off:</strong> Slightly slower than system RNG, but reproducibility is essential for financial data testing.</p>
<hr>
<h2 id="2-precise-decimal-arithmetic"><a class="header" href="#2-precise-decimal-arithmetic">2. Precise Decimal Arithmetic</a></h2>
<p><strong>Decision:</strong> Use <code>rust_decimal::Decimal</code> for all monetary values.</p>
<p><strong>Rationale:</strong></p>
<ul>
<li>IEEE 754 floating-point causes rounding errors</li>
<li>Financial systems require exact decimal representation</li>
<li>Debits must exactly equal credits</li>
</ul>
<p><strong>Implementation:</strong></p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use rust_decimal::Decimal;
use rust_decimal_macros::dec;

let amount = dec!(1234.56);
let tax = amount * dec!(0.077);  // Exact
<span class="boring">}</span></code></pre>
<p><strong>Serialization:</strong> Decimals serialized as strings to preserve precision:</p>
<pre><code class="language-json">{"amount": "1234.56"}
</code></pre>
<hr>
<h2 id="3-balanced-entry-enforcement"><a class="header" href="#3-balanced-entry-enforcement">3. Balanced Entry Enforcement</a></h2>
<p><strong>Decision:</strong> JournalEntry enforces debits = credits at construction.</p>
<p><strong>Rationale:</strong></p>
<ul>
<li>Invalid accounting entries should be impossible</li>
<li>Catches bugs early in generation</li>
<li>Guarantees trial balance coherence</li>
</ul>
<p><strong>Implementation:</strong></p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl JournalEntry {
    pub fn new(header: JournalEntryHeader, lines: Vec&lt;JournalEntryLine&gt;) -&gt; Result&lt;Self&gt; {
        let entry = Self { header, lines };
        if !entry.is_balanced() {
            return Err(Error::UnbalancedEntry);
        }
        Ok(entry)
    }
}
<span class="boring">}</span></code></pre>
<hr>
<h2 id="4-collision-free-uuids"><a class="header" href="#4-collision-free-uuids">4. Collision-Free UUIDs</a></h2>
<p><strong>Decision:</strong> Use FNV-1a hash-based UUID generation with generator-type discriminators.</p>
<p><strong>Rationale:</strong></p>
<ul>
<li>Document IDs must be unique across all generators</li>
<li>Deterministic generation requires deterministic IDs</li>
<li>Different generator types might generate same sequence</li>
</ul>
<p><strong>Implementation:</strong></p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct DeterministicUuidFactory {
    counter: AtomicU64,
    seed: u64,
}

pub enum GeneratorType {
    JournalEntry = 0x01,
    DocumentFlow = 0x02,
    Vendor = 0x03,
    // ...
}

impl DeterministicUuidFactory {
    pub fn generate(&amp;self, gen_type: GeneratorType) -&gt; Uuid {
        let counter = self.counter.fetch_add(1, Ordering::SeqCst);
        let hash_input = (self.seed, gen_type as u8, counter);
        Uuid::from_bytes(fnv1a_hash(&amp;hash_input))
    }
}
<span class="boring">}</span></code></pre>
<hr>
<h2 id="5-empirical-distributions"><a class="header" href="#5-empirical-distributions">5. Empirical Distributions</a></h2>
<p><strong>Decision:</strong> Base statistical distributions on academic research.</p>
<p><strong>Rationale:</strong></p>
<ul>
<li>Synthetic data should match real-world patterns</li>
<li>Benford’s Law is expected in authentic financial data</li>
<li>Line item distributions affect detection algorithms</li>
</ul>
<p><strong>Sources:</strong></p>
<ul>
<li>Line item counts: GL research showing 60.68% two-line, 88% even counts</li>
<li>Amounts: Log-normal with round-number bias</li>
<li>Temporal: Month/quarter/year-end spikes</li>
</ul>
<p><strong>Implementation:</strong></p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct LineItemSampler {
    distribution: EmpiricalDistribution,
}

impl LineItemSampler {
    pub fn new() -&gt; Self {
        Self {
            distribution: EmpiricalDistribution::from_data(&amp;[
                (2, 0.6068),
                (3, 0.0524),
                (4, 0.1732),
                // ...
            ]),
        }
    }
}
<span class="boring">}</span></code></pre>
<hr>
<h2 id="6-document-chain-integrity"><a class="header" href="#6-document-chain-integrity">6. Document Chain Integrity</a></h2>
<p><strong>Decision:</strong> Maintain proper reference chains with explicit links.</p>
<p><strong>Rationale:</strong></p>
<ul>
<li>Real document flows have traceable references</li>
<li>Process mining requires complete chains</li>
<li>Audit trails need document relationships</li>
</ul>
<p><strong>Implementation:</strong></p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct DocumentReference {
    pub from_type: DocumentType,
    pub from_id: String,
    pub to_type: DocumentType,
    pub to_id: String,
    pub reference_type: ReferenceType,
}

// Payment explicitly references invoices
let payment_ref = DocumentReference {
    from_type: DocumentType::Payment,
    from_id: payment.id.clone(),
    to_type: DocumentType::Invoice,
    to_id: invoice.id.clone(),
    reference_type: ReferenceType::PaymentFor,
};
<span class="boring">}</span></code></pre>
<hr>
<h2 id="7-three-way-match-validation"><a class="header" href="#7-three-way-match-validation">7. Three-Way Match Validation</a></h2>
<p><strong>Decision:</strong> Implement actual PO/GR/Invoice matching with tolerances.</p>
<p><strong>Rationale:</strong></p>
<ul>
<li>Real P2P processes include match validation</li>
<li>Variances are common and should be generated</li>
<li>Match status affects downstream processing</li>
</ul>
<p><strong>Implementation:</strong></p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn validate_match(po: &amp;PurchaseOrder, gr: &amp;GoodsReceipt, inv: &amp;Invoice,
                      config: &amp;MatchConfig) -&gt; MatchResult {
    let qty_variance = (gr.quantity - po.quantity).abs() / po.quantity;
    let price_variance = (inv.unit_price - po.unit_price).abs() / po.unit_price;

    if qty_variance &gt; config.quantity_tolerance {
        return MatchResult::QuantityVariance(qty_variance);
    }
    if price_variance &gt; config.price_tolerance {
        return MatchResult::PriceVariance(price_variance);
    }
    MatchResult::Matched
}
<span class="boring">}</span></code></pre>
<hr>
<h2 id="8-memory-guard-architecture"><a class="header" href="#8-memory-guard-architecture">8. Memory Guard Architecture</a></h2>
<p><strong>Decision:</strong> Cross-platform memory tracking with soft/hard limits.</p>
<p><strong>Rationale:</strong></p>
<ul>
<li>Large generations can exhaust memory</li>
<li>OOM kills are unrecoverable</li>
<li>Graceful degradation preferred</li>
</ul>
<p><strong>Implementation:</strong></p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn check(&amp;self) -&gt; MemoryStatus {
    let current = self.get_memory_usage();
    let growth_rate = (current - self.last_usage) as f64 / elapsed_ms;

    MemoryStatus {
        current_usage: current,
        exceeds_soft_limit: current &gt; self.config.soft_limit,
        exceeds_hard_limit: current &gt; self.config.hard_limit,
        growth_rate,
    }
}
<span class="boring">}</span></code></pre>
<hr>
<h2 id="9-layered-crate-architecture"><a class="header" href="#9-layered-crate-architecture">9. Layered Crate Architecture</a></h2>
<p><strong>Decision:</strong> Strict layering with no circular dependencies.</p>
<p><strong>Rationale:</strong></p>
<ul>
<li>Clear separation of concerns</li>
<li>Independent crate compilation</li>
<li>Easier testing and maintenance</li>
</ul>
<p><strong>Layers:</strong></p>
<ol>
<li>Foundation: <code>synth-core</code> (no internal dependencies)</li>
<li>Services: <code>synth-config</code>, <code>synth-output</code></li>
<li>Processing: <code>synth-generators</code>, <code>synth-graph</code></li>
<li>Orchestration: <code>synth-runtime</code></li>
<li>Application: <code>synth-cli</code>, <code>synth-server</code>, <code>synth-ui</code></li>
</ol>
<hr>
<h2 id="10-configuration-driven-behavior"><a class="header" href="#10-configuration-driven-behavior">10. Configuration-Driven Behavior</a></h2>
<p><strong>Decision:</strong> All behavior controlled by external configuration.</p>
<p><strong>Rationale:</strong></p>
<ul>
<li>Flexibility without code changes</li>
<li>Reproducible scenarios</li>
<li>User-customizable presets</li>
</ul>
<p><strong>Scope:</strong> Configuration controls:</p>
<ul>
<li>Industry and complexity</li>
<li>Transaction volumes and patterns</li>
<li>Anomaly types and rates</li>
<li>Output formats</li>
<li>All feature toggles</li>
</ul>
<hr>
<h2 id="11-trait-based-extensibility"><a class="header" href="#11-trait-based-extensibility">11. Trait-Based Extensibility</a></h2>
<p><strong>Decision:</strong> Define traits in core, implement in higher layers.</p>
<p><strong>Rationale:</strong></p>
<ul>
<li>Dependency inversion</li>
<li>Pluggable implementations</li>
<li>Easy testing with mocks</li>
</ul>
<p><strong>Example:</strong></p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Defined in synth-core
pub trait Generator&lt;T&gt; {
    fn generate_batch(&amp;mut self, count: usize) -&gt; Result&lt;Vec&lt;T&gt;&gt;;
}

// Implemented in synth-generators
impl Generator&lt;JournalEntry&gt; for JournalEntryGenerator {
    fn generate_batch(&amp;mut self, count: usize) -&gt; Result&lt;Vec&lt;JournalEntry&gt;&gt; {
        // Implementation
    }
}
<span class="boring">}</span></code></pre>
<hr>
<h2 id="12-parallel-safe-design"><a class="header" href="#12-parallel-safe-design">12. Parallel-Safe Design</a></h2>
<p><strong>Decision:</strong> Design all generators to be thread-safe.</p>
<p><strong>Rationale:</strong></p>
<ul>
<li>Generation can be parallelized</li>
<li>Modern systems have many cores</li>
<li>Linear scaling improves throughput</li>
</ul>
<p><strong>Implementation:</strong></p>
<ul>
<li>Per-thread RNG seeds: <code>seed + thread_id</code></li>
<li>Atomic counters for UUID factory</li>
<li>No shared mutable state during generation</li>
<li>Rayon for parallel iteration</li>
</ul>
<h2 id="see-also-21"><a class="header" href="#see-also-21">See Also</a></h2>
<ul>
<li><a href="architecture/README.html">Architecture Overview</a></li>
<li><a href="#domain-models">Domain Models</a></li>
<li><a href="#synth-core">synth-core</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="crate-reference"><a class="header" href="#crate-reference">Crate Reference</a></h1>
<p>SyntheticData is organized as a Rust workspace with modular crates. This section provides detailed documentation for each crate.</p>
<h2 id="workspace-structure"><a class="header" href="#workspace-structure">Workspace Structure</a></h2>
<pre><code>synth-cli          → Binary entry point (commands: generate, validate, init, info)
synth-server       → REST/gRPC/WebSocket server with auth, rate limiting
synth-ui           → Tauri/SvelteKit desktop UI
    ↓
synth-runtime      → Orchestration layer (GenerationOrchestrator coordinates workflow)
    ↓
synth-generators   → Data generators (JE, Document Flows, Subledgers, Anomalies)
    ↓
synth-graph        → Graph/network export (PyTorch Geometric, Neo4j, DGL)
    ↓
synth-config       → Configuration schema, validation, industry presets
    ↓
synth-core         → Domain models, traits, distributions, templates
    ↓
synth-output       → Output sinks (CSV, JSON, streaming)

synth-eval         → Evaluation framework (quality, coherence)
synth-ocpm         → Object-Centric Process Mining (OCEL 2.0)
synth-test-utils   → Testing utilities and fixtures
</code></pre>
<h2 id="crate-categories"><a class="header" href="#crate-categories">Crate Categories</a></h2>
<h3 id="application-layer-1"><a class="header" href="#application-layer-1">Application Layer</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Crate</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><a href="#synth-cli">synth-cli</a></td><td>Command-line interface binary</td></tr>
<tr><td><a href="#synth-server">synth-server</a></td><td>REST/gRPC/WebSocket server</td></tr>
<tr><td><a href="#synth-ui">synth-ui</a></td><td>Desktop GUI application</td></tr>
</tbody>
</table>
</div>
<h3 id="core-processing"><a class="header" href="#core-processing">Core Processing</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Crate</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><a href="#synth-runtime">synth-runtime</a></td><td>Generation orchestration</td></tr>
<tr><td><a href="#synth-generators">synth-generators</a></td><td>All data generators</td></tr>
<tr><td><a href="#synth-graph">synth-graph</a></td><td>ML graph export</td></tr>
</tbody>
</table>
</div>
<h3 id="foundation"><a class="header" href="#foundation">Foundation</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Crate</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><a href="#synth-core">synth-core</a></td><td>Domain models and distributions</td></tr>
<tr><td><a href="#synth-config">synth-config</a></td><td>Configuration and validation</td></tr>
<tr><td><a href="#synth-output">synth-output</a></td><td>Output sinks</td></tr>
</tbody>
</table>
</div>
<h3 id="supporting"><a class="header" href="#supporting">Supporting</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Crate</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><a href="#synth-eval">synth-eval</a></td><td>Quality evaluation</td></tr>
<tr><td><a href="#synth-ocpm">synth-ocpm</a></td><td>Process mining (OCEL 2.0)</td></tr>
<tr><td><a href="#synth-test-utils">synth-test-utils</a></td><td>Test utilities</td></tr>
</tbody>
</table>
</div>
<h2 id="dependencies"><a class="header" href="#dependencies">Dependencies</a></h2>
<p>The crates follow a strict dependency hierarchy:</p>
<ol>
<li><strong>synth-core</strong>: No internal dependencies (foundation)</li>
<li><strong>synth-config</strong>: Depends on synth-core</li>
<li><strong>synth-output</strong>: Depends on synth-core</li>
<li><strong>synth-generators</strong>: Depends on synth-core, synth-config</li>
<li><strong>synth-graph</strong>: Depends on synth-core, synth-generators</li>
<li><strong>synth-runtime</strong>: Depends on synth-core, synth-config, synth-generators, synth-output, synth-graph</li>
<li><strong>synth-cli</strong>: Depends on synth-runtime</li>
<li><strong>synth-server</strong>: Depends on synth-runtime</li>
<li><strong>synth-ui</strong>: Depends on synth-runtime (via Tauri)</li>
</ol>
<h2 id="building-individual-crates"><a class="header" href="#building-individual-crates">Building Individual Crates</a></h2>
<pre><code class="language-bash"># Build specific crate
cargo build -p synth-core
cargo build -p synth-generators

# Run tests for specific crate
cargo test -p synth-core
cargo test -p synth-generators

# Generate docs for specific crate
cargo doc -p synth-core --open
</code></pre>
<h2 id="api-documentation"><a class="header" href="#api-documentation">API Documentation</a></h2>
<p>For detailed Rust API documentation, generate and view rustdoc:</p>
<pre><code class="language-bash">cargo doc --workspace --no-deps --open
</code></pre>
<h2 id="see-also-22"><a class="header" href="#see-also-22">See Also</a></h2>
<ul>
<li><a href="architecture/README.html">Architecture Overview</a></li>
<li><a href="#workspace-layout">Workspace Layout</a></li>
<li><a href="#domain-models">Domain Models</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="synth-core"><a class="header" href="#synth-core">synth-core</a></h1>
<p>Core domain models, traits, and distributions for synthetic accounting data generation.</p>
<h2 id="overview-4"><a class="header" href="#overview-4">Overview</a></h2>
<p><code>synth-core</code> provides the foundational building blocks for the SyntheticData workspace:</p>
<ul>
<li><strong>Domain Models</strong>: Journal entries, chart of accounts, master data, documents, anomalies</li>
<li><strong>Statistical Distributions</strong>: Line item sampling, amount generation, temporal patterns</li>
<li><strong>Core Traits</strong>: Generator and Sink interfaces for extensibility</li>
<li><strong>Template System</strong>: File-based templates for regional/sector customization</li>
<li><strong>Infrastructure</strong>: UUID factory, memory guard, GL account constants</li>
</ul>
<h2 id="module-structure"><a class="header" href="#module-structure">Module Structure</a></h2>
<h3 id="domain-models-models"><a class="header" href="#domain-models-models">Domain Models (<code>models/</code>)</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Module</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>journal_entry.rs</code></td><td>Journal entry header and balanced line items</td></tr>
<tr><td><code>chart_of_accounts.rs</code></td><td>Hierarchical GL accounts with account types</td></tr>
<tr><td><code>master_data.rs</code></td><td>Enhanced vendors, customers with payment behavior</td></tr>
<tr><td><code>documents.rs</code></td><td>Purchase orders, invoices, goods receipts, payments</td></tr>
<tr><td><code>temporal.rs</code></td><td>Bi-temporal data model for audit trails</td></tr>
<tr><td><code>anomaly.rs</code></td><td>Anomaly types and labels for ML training</td></tr>
<tr><td><code>internal_control.rs</code></td><td>SOX 404 control definitions</td></tr>
</tbody>
</table>
</div>
<h3 id="statistical-distributions-distributions"><a class="header" href="#statistical-distributions-distributions">Statistical Distributions (<code>distributions/</code>)</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Distribution</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>LineItemSampler</code></td><td>Empirical distribution (60.68% two-line, 88% even counts)</td></tr>
<tr><td><code>AmountSampler</code></td><td>Log-normal with round-number bias, Benford compliance</td></tr>
<tr><td><code>TemporalSampler</code></td><td>Seasonality patterns with industry integration</td></tr>
<tr><td><code>BenfordSampler</code></td><td>First-digit distribution following P(d) = log10(1 + 1/d)</td></tr>
<tr><td><code>FraudAmountGenerator</code></td><td>Suspicious amount patterns</td></tr>
<tr><td><code>IndustrySeasonality</code></td><td>Industry-specific volume patterns</td></tr>
<tr><td><code>HolidayCalendar</code></td><td>Regional holidays for US, DE, GB, CN, JP, IN</td></tr>
</tbody>
</table>
</div>
<h3 id="infrastructure"><a class="header" href="#infrastructure">Infrastructure</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Component</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>uuid_factory.rs</code></td><td>Deterministic FNV-1a hash-based UUID generation</td></tr>
<tr><td><code>memory_guard.rs</code></td><td>Cross-platform memory tracking with soft/hard limits</td></tr>
<tr><td><code>accounts.rs</code></td><td>Centralized GL control account numbers</td></tr>
<tr><td><code>templates/</code></td><td>YAML/JSON template loading and merging</td></tr>
</tbody>
</table>
</div>
<h2 id="key-types"><a class="header" href="#key-types">Key Types</a></h2>
<h3 id="journalentry-1"><a class="header" href="#journalentry-1">JournalEntry</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct JournalEntry {
    pub header: JournalEntryHeader,
    pub lines: Vec&lt;JournalEntryLine&gt;,
}

pub struct JournalEntryHeader {
    pub document_id: Uuid,
    pub company_code: String,
    pub fiscal_year: u16,
    pub fiscal_period: u8,
    pub posting_date: NaiveDate,
    pub document_date: NaiveDate,
    pub source: TransactionSource,
    pub business_process: Option&lt;BusinessProcess&gt;,
    pub is_fraud: bool,
    pub fraud_type: Option&lt;FraudType&gt;,
    pub is_anomaly: bool,
    pub anomaly_type: Option&lt;AnomalyType&gt;,
    // ... additional fields
}
<span class="boring">}</span></code></pre>
<h3 id="accounttype-hierarchy"><a class="header" href="#accounttype-hierarchy">AccountType Hierarchy</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub enum AccountType {
    Asset,
    Liability,
    Equity,
    Revenue,
    Expense,
}

pub enum AccountSubType {
    // Assets
    Cash,
    AccountsReceivable,
    Inventory,
    FixedAsset,
    // Liabilities
    AccountsPayable,
    AccruedLiabilities,
    LongTermDebt,
    // Equity
    CommonStock,
    RetainedEarnings,
    // Revenue
    SalesRevenue,
    ServiceRevenue,
    // Expense
    CostOfGoodsSold,
    OperatingExpense,
    // ...
}
<span class="boring">}</span></code></pre>
<h3 id="anomaly-types"><a class="header" href="#anomaly-types">Anomaly Types</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub enum AnomalyType {
    Fraud,
    Error,
    ProcessIssue,
    Statistical,
    Relational,
}

pub struct LabeledAnomaly {
    pub document_id: Uuid,
    pub anomaly_id: String,
    pub anomaly_type: AnomalyType,
    pub category: AnomalyCategory,
    pub severity: Severity,
    pub description: String,
}
<span class="boring">}</span></code></pre>
<h2 id="usage-examples"><a class="header" href="#usage-examples">Usage Examples</a></h2>
<h3 id="creating-a-balanced-journal-entry"><a class="header" href="#creating-a-balanced-journal-entry">Creating a Balanced Journal Entry</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_core::models::{JournalEntry, JournalEntryLine, JournalEntryHeader};
use rust_decimal_macros::dec;

let header = JournalEntryHeader::new(/* ... */);
let mut entry = JournalEntry::new(header);

// Add balanced lines
entry.add_line(JournalEntryLine::debit("1100", dec!(1000.00), "AR Invoice"));
entry.add_line(JournalEntryLine::credit("4000", dec!(1000.00), "Revenue"));

// Entry enforces debits = credits
assert!(entry.is_balanced());
<span class="boring">}</span></code></pre>
<h3 id="sampling-amounts"><a class="header" href="#sampling-amounts">Sampling Amounts</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_core::distributions::AmountSampler;

let sampler = AmountSampler::new(42); // seed

// Benford-compliant amount
let amount = sampler.sample_benford_compliant(1000.0, 100000.0);

// Round-number biased
let round_amount = sampler.sample_with_round_bias(1000.0, 10000.0);
<span class="boring">}</span></code></pre>
<h3 id="using-the-uuid-factory"><a class="header" href="#using-the-uuid-factory">Using the UUID Factory</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_core::uuid_factory::{DeterministicUuidFactory, GeneratorType};

let factory = DeterministicUuidFactory::new(42);

// Generate collision-free UUIDs across generators
let je_id = factory.generate(GeneratorType::JournalEntry);
let doc_id = factory.generate(GeneratorType::DocumentFlow);
<span class="boring">}</span></code></pre>
<h3 id="memory-guard-1"><a class="header" href="#memory-guard-1">Memory Guard</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_core::memory_guard::{MemoryGuard, MemoryGuardConfig};

let config = MemoryGuardConfig {
    soft_limit: 1024 * 1024 * 1024,  // 1GB soft
    hard_limit: 2 * 1024 * 1024 * 1024, // 2GB hard
    check_interval_ms: 1000,
    ..Default::default()
};

let guard = MemoryGuard::new(config);
if guard.check().exceeds_soft_limit {
    // Slow down or pause generation
}
<span class="boring">}</span></code></pre>
<h2 id="traits"><a class="header" href="#traits">Traits</a></h2>
<h3 id="generator-trait"><a class="header" href="#generator-trait">Generator Trait</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub trait Generator {
    type Output;
    type Error;

    fn generate_batch(&amp;mut self, count: usize) -&gt; Result&lt;Vec&lt;Self::Output&gt;, Self::Error&gt;;

    fn generate_stream(&amp;mut self) -&gt; impl Iterator&lt;Item = Result&lt;Self::Output, Self::Error&gt;&gt;;
}
<span class="boring">}</span></code></pre>
<h3 id="sink-trait"><a class="header" href="#sink-trait">Sink Trait</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub trait Sink&lt;T&gt; {
    type Error;

    fn write(&amp;mut self, item: &amp;T) -&gt; Result&lt;(), Self::Error&gt;;
    fn write_batch(&amp;mut self, items: &amp;[T]) -&gt; Result&lt;(), Self::Error&gt;;
    fn flush(&amp;mut self) -&gt; Result&lt;(), Self::Error&gt;;
}
<span class="boring">}</span></code></pre>
<h2 id="template-system"><a class="header" href="#template-system">Template System</a></h2>
<p>Load external templates for customization:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_core::templates::{TemplateLoader, MergeStrategy};

let loader = TemplateLoader::new("templates/");
let names = loader.load_category("vendor_names", MergeStrategy::Extend)?;
<span class="boring">}</span></code></pre>
<p><strong>Template categories:</strong></p>
<ul>
<li><code>person_names</code></li>
<li><code>vendor_names</code></li>
<li><code>customer_names</code></li>
<li><code>material_descriptions</code></li>
<li><code>line_item_descriptions</code></li>
</ul>
<h2 id="decimal-handling-1"><a class="header" href="#decimal-handling-1">Decimal Handling</a></h2>
<p>All financial amounts use <code>rust_decimal::Decimal</code>:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use rust_decimal::Decimal;
use rust_decimal_macros::dec;

let amount = dec!(1234.56);
let tax = amount * dec!(0.077);
<span class="boring">}</span></code></pre>
<p>Decimals are serialized as strings to avoid IEEE 754 floating-point issues.</p>
<h2 id="see-also-23"><a class="header" href="#see-also-23">See Also</a></h2>
<ul>
<li><a href="#domain-models">Domain Models</a></li>
<li><a href="#synth-generators">synth-generators</a></li>
<li><a href="#synth-config">synth-config</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="synth-config"><a class="header" href="#synth-config">synth-config</a></h1>
<p>Configuration schema, validation, and industry presets for synthetic data generation.</p>
<h2 id="overview-5"><a class="header" href="#overview-5">Overview</a></h2>
<p><code>synth-config</code> provides the configuration layer for SyntheticData:</p>
<ul>
<li><strong>Schema Definition</strong>: Complete YAML configuration schema</li>
<li><strong>Validation</strong>: Bounds checking, constraint validation, distribution sum verification</li>
<li><strong>Industry Presets</strong>: Pre-configured settings for common industries</li>
<li><strong>Complexity Levels</strong>: Small, medium, and large organization profiles</li>
</ul>
<h2 id="configuration-sections-2"><a class="header" href="#configuration-sections-2">Configuration Sections</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Section</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>global</code></td><td>Industry, dates, seed, performance settings</td></tr>
<tr><td><code>companies</code></td><td>Company codes, currencies, volume weights</td></tr>
<tr><td><code>chart_of_accounts</code></td><td>COA complexity and structure</td></tr>
<tr><td><code>transactions</code></td><td>Line items, amounts, sources, temporal patterns</td></tr>
<tr><td><code>master_data</code></td><td>Vendors, customers, materials, assets, employees</td></tr>
<tr><td><code>document_flows</code></td><td>P2P, O2C configuration</td></tr>
<tr><td><code>intercompany</code></td><td>IC transaction types and transfer pricing</td></tr>
<tr><td><code>balance</code></td><td>Opening balances, trial balance generation</td></tr>
<tr><td><code>subledger</code></td><td>AR, AP, FA, inventory settings</td></tr>
<tr><td><code>fx</code></td><td>Currency and exchange rate settings</td></tr>
<tr><td><code>period_close</code></td><td>Close tasks and schedules</td></tr>
<tr><td><code>fraud</code></td><td>Fraud injection rates and types</td></tr>
<tr><td><code>internal_controls</code></td><td>SOX controls and SoD rules</td></tr>
<tr><td><code>anomaly_injection</code></td><td>Anomaly rates and labeling</td></tr>
<tr><td><code>data_quality</code></td><td>Missing values, typos, duplicates</td></tr>
<tr><td><code>graph_export</code></td><td>ML graph export formats</td></tr>
<tr><td><code>output</code></td><td>Output format and compression</td></tr>
</tbody>
</table>
</div>
<h2 id="industry-presets-1"><a class="header" href="#industry-presets-1">Industry Presets</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Industry</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>manufacturing</code></td><td>Heavy P2P, inventory, fixed assets</td></tr>
<tr><td><code>retail</code></td><td>High O2C volume, seasonal patterns</td></tr>
<tr><td><code>financial_services</code></td><td>Complex intercompany, high controls</td></tr>
<tr><td><code>healthcare</code></td><td>Regulatory focus, seasonal insurance</td></tr>
<tr><td><code>technology</code></td><td>SaaS revenue patterns, R&amp;D capitalization</td></tr>
</tbody>
</table>
</div>
<h2 id="key-types-1"><a class="header" href="#key-types-1">Key Types</a></h2>
<h3 id="config"><a class="header" href="#config">Config</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct Config {
    pub global: GlobalConfig,
    pub companies: Vec&lt;CompanyConfig&gt;,
    pub chart_of_accounts: CoaConfig,
    pub transactions: TransactionConfig,
    pub master_data: MasterDataConfig,
    pub document_flows: DocumentFlowConfig,
    pub intercompany: IntercompanyConfig,
    pub balance: BalanceConfig,
    pub subledger: SubledgerConfig,
    pub fx: FxConfig,
    pub period_close: PeriodCloseConfig,
    pub fraud: FraudConfig,
    pub internal_controls: ControlConfig,
    pub anomaly_injection: AnomalyConfig,
    pub data_quality: DataQualityConfig,
    pub graph_export: GraphExportConfig,
    pub output: OutputConfig,
}
<span class="boring">}</span></code></pre>
<h3 id="globalconfig"><a class="header" href="#globalconfig">GlobalConfig</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct GlobalConfig {
    pub seed: Option&lt;u64&gt;,
    pub industry: Industry,
    pub start_date: NaiveDate,
    pub period_months: u32,      // 1-120
    pub group_currency: String,
    pub worker_threads: Option&lt;usize&gt;,
    pub memory_limit: Option&lt;u64&gt;,
}
<span class="boring">}</span></code></pre>
<h3 id="companyconfig"><a class="header" href="#companyconfig">CompanyConfig</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct CompanyConfig {
    pub code: String,
    pub name: String,
    pub currency: String,
    pub country: String,
    pub volume_weight: f64,     // Must sum to 1.0 across companies
    pub is_parent: bool,
    pub parent_code: Option&lt;String&gt;,
}
<span class="boring">}</span></code></pre>
<h2 id="validation-rules"><a class="header" href="#validation-rules">Validation Rules</a></h2>
<p>The <code>ConfigValidator</code> enforces:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Rule</th><th>Constraint</th></tr>
</thead>
<tbody>
<tr><td><code>period_months</code></td><td>1-120 (max 10 years)</td></tr>
<tr><td><code>compression_level</code></td><td>1-9 when compression enabled</td></tr>
<tr><td>Rate fields</td><td>0.0-1.0</td></tr>
<tr><td>Approval thresholds</td><td>Strictly ascending order</td></tr>
<tr><td>Distribution weights</td><td>Sum to 1.0 (±0.01 tolerance)</td></tr>
<tr><td>Company codes</td><td>Unique within configuration</td></tr>
<tr><td>Dates</td><td><code>start_date</code> + <code>period_months</code> is valid</td></tr>
</tbody>
</table>
</div>
<h2 id="usage-examples-1"><a class="header" href="#usage-examples-1">Usage Examples</a></h2>
<h3 id="loading-configuration"><a class="header" href="#loading-configuration">Loading Configuration</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_config::{Config, ConfigValidator};

// From YAML file
let config = Config::from_yaml_file("config.yaml")?;

// Validate
let validator = ConfigValidator::new();
validator.validate(&amp;config)?;
<span class="boring">}</span></code></pre>
<h3 id="using-presets-1"><a class="header" href="#using-presets-1">Using Presets</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_config::{Config, Industry, Complexity};

// Create from preset
let config = Config::from_preset(Industry::Manufacturing, Complexity::Medium);

// Modify as needed
config.transactions.target_count = 50000;
<span class="boring">}</span></code></pre>
<h3 id="creating-configuration-programmatically"><a class="header" href="#creating-configuration-programmatically">Creating Configuration Programmatically</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_config::{Config, GlobalConfig, TransactionConfig};

let config = Config {
    global: GlobalConfig {
        seed: Some(42),
        industry: Industry::Manufacturing,
        start_date: NaiveDate::from_ymd_opt(2024, 1, 1).unwrap(),
        period_months: 12,
        group_currency: "USD".to_string(),
        ..Default::default()
    },
    transactions: TransactionConfig {
        target_count: 100000,
        ..Default::default()
    },
    ..Default::default()
};
<span class="boring">}</span></code></pre>
<h3 id="saving-configuration"><a class="header" href="#saving-configuration">Saving Configuration</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// To YAML
config.to_yaml_file("config.yaml")?;

// To JSON
config.to_json_file("config.json")?;

// To string
let yaml = config.to_yaml_string()?;
<span class="boring">}</span></code></pre>
<h2 id="configuration-examples"><a class="header" href="#configuration-examples">Configuration Examples</a></h2>
<h3 id="minimal-configuration-1"><a class="header" href="#minimal-configuration-1">Minimal Configuration</a></h3>
<pre><code class="language-yaml">global:
  industry: manufacturing
  start_date: 2024-01-01
  period_months: 12

transactions:
  target_count: 10000

output:
  format: csv
</code></pre>
<h3 id="full-configuration"><a class="header" href="#full-configuration">Full Configuration</a></h3>
<p>See the <a href="#yaml-schema-reference">YAML Schema Reference</a> for complete documentation.</p>
<h2 id="complexity-levels-2"><a class="header" href="#complexity-levels-2">Complexity Levels</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Level</th><th>Accounts</th><th>Vendors</th><th>Customers</th><th>Materials</th></tr>
</thead>
<tbody>
<tr><td><code>small</code></td><td>~100</td><td>50</td><td>100</td><td>200</td></tr>
<tr><td><code>medium</code></td><td>~400</td><td>200</td><td>500</td><td>1000</td></tr>
<tr><td><code>large</code></td><td>~2500</td><td>1000</td><td>5000</td><td>10000</td></tr>
</tbody>
</table>
</div>
<h2 id="validation-error-types"><a class="header" href="#validation-error-types">Validation Error Types</a></h2>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub enum ConfigError {
    MissingRequiredField(String),
    InvalidValue { field: String, value: String, constraint: String },
    DistributionSumError { field: String, sum: f64 },
    DuplicateCode { field: String, code: String },
    DateRangeError { start: NaiveDate, end: NaiveDate },
    ParseError(String),
}
<span class="boring">}</span></code></pre>
<h2 id="see-also-24"><a class="header" href="#see-also-24">See Also</a></h2>
<ul>
<li><a href="configuration/README.html">Configuration Overview</a></li>
<li><a href="#yaml-schema-reference">YAML Schema Reference</a></li>
<li><a href="#industry-presets">Industry Presets</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="synth-generators"><a class="header" href="#synth-generators">synth-generators</a></h1>
<p>Data generators for journal entries, master data, document flows, and anomalies.</p>
<h2 id="overview-6"><a class="header" href="#overview-6">Overview</a></h2>
<p><code>synth-generators</code> contains all data generation logic for SyntheticData:</p>
<ul>
<li><strong>Core Generators</strong>: Journal entries, chart of accounts, users</li>
<li><strong>Master Data</strong>: Vendors, customers, materials, assets, employees</li>
<li><strong>Document Flows</strong>: P2P (Procure-to-Pay), O2C (Order-to-Cash)</li>
<li><strong>Financial</strong>: Intercompany, balance tracking, subledgers, FX, period close</li>
<li><strong>Quality</strong>: Anomaly injection, data quality variations</li>
</ul>
<h2 id="module-structure-1"><a class="header" href="#module-structure-1">Module Structure</a></h2>
<h3 id="core-generators"><a class="header" href="#core-generators">Core Generators</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Generator</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>je_generator</code></td><td>Journal entry generation with statistical distributions</td></tr>
<tr><td><code>coa_generator</code></td><td>Chart of accounts with industry-specific structures</td></tr>
<tr><td><code>company_selector</code></td><td>Weighted company selection for transactions</td></tr>
<tr><td><code>user_generator</code></td><td>User/persona generation with roles</td></tr>
<tr><td><code>control_generator</code></td><td>Internal controls and SoD rules</td></tr>
</tbody>
</table>
</div>
<h3 id="master-data-master_data"><a class="header" href="#master-data-master_data">Master Data (<code>master_data/</code>)</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Generator</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>vendor_generator</code></td><td>Vendors with payment terms, bank accounts, behaviors</td></tr>
<tr><td><code>customer_generator</code></td><td>Customers with credit ratings, payment patterns</td></tr>
<tr><td><code>material_generator</code></td><td>Materials/products with BOM, valuations</td></tr>
<tr><td><code>asset_generator</code></td><td>Fixed assets with depreciation schedules</td></tr>
<tr><td><code>employee_generator</code></td><td>Employees with manager hierarchy</td></tr>
<tr><td><code>entity_registry_manager</code></td><td>Central entity registry with temporal validity</td></tr>
</tbody>
</table>
</div>
<h3 id="document-flow-document_flow"><a class="header" href="#document-flow-document_flow">Document Flow (<code>document_flow/</code>)</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Generator</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>p2p_generator</code></td><td>PO → GR → Invoice → Payment flow</td></tr>
<tr><td><code>o2c_generator</code></td><td>SO → Delivery → Invoice → Receipt flow</td></tr>
<tr><td><code>document_chain_manager</code></td><td>Reference chain management</td></tr>
<tr><td><code>document_flow_je_generator</code></td><td>Generate JEs from document flows</td></tr>
<tr><td><code>three_way_match</code></td><td>PO/GR/Invoice matching validation</td></tr>
</tbody>
</table>
</div>
<h3 id="intercompany-intercompany"><a class="header" href="#intercompany-intercompany">Intercompany (<code>intercompany/</code>)</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Generator</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>ic_generator</code></td><td>Matched intercompany entry pairs</td></tr>
<tr><td><code>matching_engine</code></td><td>IC matching and reconciliation</td></tr>
<tr><td><code>elimination_generator</code></td><td>Consolidation elimination entries</td></tr>
</tbody>
</table>
</div>
<h3 id="balance-balance"><a class="header" href="#balance-balance">Balance (<code>balance/</code>)</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Generator</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>opening_balance_generator</code></td><td>Coherent opening balance sheet</td></tr>
<tr><td><code>balance_tracker</code></td><td>Running balance validation</td></tr>
<tr><td><code>trial_balance_generator</code></td><td>Period-end trial balance</td></tr>
</tbody>
</table>
</div>
<h3 id="subledger-subledger"><a class="header" href="#subledger-subledger">Subledger (<code>subledger/</code>)</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Generator</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>ar_generator</code></td><td>AR invoices, receipts, credit memos, aging</td></tr>
<tr><td><code>ap_generator</code></td><td>AP invoices, payments, debit memos</td></tr>
<tr><td><code>fa_generator</code></td><td>Fixed assets, depreciation, disposals</td></tr>
<tr><td><code>inventory_generator</code></td><td>Inventory positions, movements, valuation</td></tr>
<tr><td><code>reconciliation</code></td><td>GL-to-subledger reconciliation</td></tr>
</tbody>
</table>
</div>
<h3 id="fx-fx"><a class="header" href="#fx-fx">FX (<code>fx/</code>)</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Generator</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>fx_rate_service</code></td><td>FX rate generation (Ornstein-Uhlenbeck process)</td></tr>
<tr><td><code>currency_translator</code></td><td>Trial balance translation</td></tr>
<tr><td><code>cta_generator</code></td><td>Currency Translation Adjustment entries</td></tr>
</tbody>
</table>
</div>
<h3 id="period-close-period_close"><a class="header" href="#period-close-period_close">Period Close (<code>period_close/</code>)</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Generator</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>close_engine</code></td><td>Main orchestration</td></tr>
<tr><td><code>accruals</code></td><td>Accrual entry generation</td></tr>
<tr><td><code>depreciation</code></td><td>Monthly depreciation runs</td></tr>
<tr><td><code>year_end</code></td><td>Year-end closing entries</td></tr>
</tbody>
</table>
</div>
<h3 id="anomaly-anomaly"><a class="header" href="#anomaly-anomaly">Anomaly (<code>anomaly/</code>)</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Generator</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>injector</code></td><td>Main anomaly injection engine</td></tr>
<tr><td><code>types</code></td><td>Weighted anomaly type configurations</td></tr>
<tr><td><code>strategies</code></td><td>Injection strategies (amount, date, duplication)</td></tr>
<tr><td><code>patterns</code></td><td>Temporal patterns, clustering, entity targeting</td></tr>
</tbody>
</table>
</div>
<h3 id="data-quality-data_quality"><a class="header" href="#data-quality-data_quality">Data Quality (<code>data_quality/</code>)</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Generator</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>injector</code></td><td>Main data quality injector</td></tr>
<tr><td><code>missing_values</code></td><td>MCAR, MAR, MNAR, Systematic patterns</td></tr>
<tr><td><code>format_variations</code></td><td>Date, amount, identifier formats</td></tr>
<tr><td><code>duplicates</code></td><td>Exact, near, fuzzy duplicates</td></tr>
<tr><td><code>typos</code></td><td>Keyboard-aware typos, OCR errors</td></tr>
</tbody>
</table>
</div>
<h2 id="usage-examples-2"><a class="header" href="#usage-examples-2">Usage Examples</a></h2>
<h3 id="journal-entry-generation"><a class="header" href="#journal-entry-generation">Journal Entry Generation</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_generators::je_generator::JournalEntryGenerator;

let mut generator = JournalEntryGenerator::new(config, seed);

// Generate batch
let entries = generator.generate_batch(1000)?;

// Stream generation
for entry in generator.generate_stream().take(1000) {
    process(entry?);
}
<span class="boring">}</span></code></pre>
<h3 id="master-data-generation"><a class="header" href="#master-data-generation">Master Data Generation</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_generators::master_data::{VendorGenerator, CustomerGenerator};

let mut vendor_gen = VendorGenerator::new(seed);
let vendors = vendor_gen.generate(100);

let mut customer_gen = CustomerGenerator::new(seed);
let customers = customer_gen.generate(200);
<span class="boring">}</span></code></pre>
<h3 id="document-flow-generation"><a class="header" href="#document-flow-generation">Document Flow Generation</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_generators::document_flow::{P2pGenerator, O2cGenerator};

let mut p2p = P2pGenerator::new(config, seed);
let p2p_flows = p2p.generate_batch(500)?;

let mut o2c = O2cGenerator::new(config, seed);
let o2c_flows = o2c.generate_batch(500)?;
<span class="boring">}</span></code></pre>
<h3 id="anomaly-injection"><a class="header" href="#anomaly-injection">Anomaly Injection</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_generators::anomaly::AnomalyInjector;

let mut injector = AnomalyInjector::new(config.anomaly_injection, seed);

// Inject into existing entries
let (modified_entries, labels) = injector.inject(&amp;entries)?;
<span class="boring">}</span></code></pre>
<h2 id="three-way-match-1"><a class="header" href="#three-way-match-1">Three-Way Match</a></h2>
<p>The P2P generator validates document matching:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_generators::document_flow::ThreeWayMatch;

let match_result = ThreeWayMatch::validate(
    &amp;purchase_order,
    &amp;goods_receipt,
    &amp;vendor_invoice,
    tolerance_config,
);

match match_result {
    MatchResult::Passed =&gt; { /* Process normally */ }
    MatchResult::QuantityVariance(var) =&gt; { /* Handle variance */ }
    MatchResult::PriceVariance(var) =&gt; { /* Handle variance */ }
}
<span class="boring">}</span></code></pre>
<h2 id="balance-coherence-1"><a class="header" href="#balance-coherence-1">Balance Coherence</a></h2>
<p>The balance tracker maintains accounting equation:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_generators::balance::BalanceTracker;

let mut tracker = BalanceTracker::new();

for entry in &amp;entries {
    tracker.post(&amp;entry)?;
}

// Verify Assets = Liabilities + Equity
assert!(tracker.is_balanced());
<span class="boring">}</span></code></pre>
<h2 id="fx-rate-generation"><a class="header" href="#fx-rate-generation">FX Rate Generation</a></h2>
<p>Uses Ornstein-Uhlenbeck process for realistic rate movements:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_generators::fx::FxRateService;

let mut fx_service = FxRateService::new(config.fx, seed);

// Get rate for date
let rate = fx_service.get_rate("EUR", "USD", date)?;

// Generate daily rates
let rates = fx_service.generate_daily_rates(start, end)?;
<span class="boring">}</span></code></pre>
<h2 id="anomaly-types-1"><a class="header" href="#anomaly-types-1">Anomaly Types</a></h2>
<h3 id="fraud-types-1"><a class="header" href="#fraud-types-1">Fraud Types</a></h3>
<ul>
<li>FictitiousTransaction, RevenueManipulation, ExpenseCapitalization</li>
<li>SplitTransaction, RoundTripping, KickbackScheme</li>
<li>GhostEmployee, DuplicatePayment, UnauthorizedDiscount</li>
</ul>
<h3 id="error-types"><a class="header" href="#error-types">Error Types</a></h3>
<ul>
<li>DuplicateEntry, ReversedAmount, WrongPeriod</li>
<li>WrongAccount, MissingReference, IncorrectTaxCode</li>
</ul>
<h3 id="process-issues"><a class="header" href="#process-issues">Process Issues</a></h3>
<ul>
<li>LatePosting, SkippedApproval, ThresholdManipulation</li>
<li>MissingDocumentation, OutOfSequence</li>
</ul>
<h3 id="statistical-anomalies"><a class="header" href="#statistical-anomalies">Statistical Anomalies</a></h3>
<ul>
<li>UnusualAmount, TrendBreak, BenfordViolation, OutlierValue</li>
</ul>
<h3 id="relational-anomalies"><a class="header" href="#relational-anomalies">Relational Anomalies</a></h3>
<ul>
<li>CircularTransaction, DormantAccountActivity, UnusualCounterparty</li>
</ul>
<h2 id="see-also-25"><a class="header" href="#see-also-25">See Also</a></h2>
<ul>
<li><a href="#synth-core">synth-core</a></li>
<li><a href="#anomaly-injection-1">Anomaly Injection</a></li>
<li><a href="#document-flows-1">Document Flows</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="synth-output"><a class="header" href="#synth-output">synth-output</a></h1>
<p>Output sinks for CSV, JSON, and streaming formats.</p>
<h2 id="overview-7"><a class="header" href="#overview-7">Overview</a></h2>
<p><code>synth-output</code> provides the output layer for SyntheticData:</p>
<ul>
<li><strong>CSV Sink</strong>: High-performance CSV writing with optional compression</li>
<li><strong>JSON Sink</strong>: JSON and JSONL (newline-delimited) output</li>
<li><strong>Streaming</strong>: Async streaming output for real-time generation</li>
<li><strong>Control Export</strong>: Internal control and SoD rule export</li>
</ul>
<h2 id="supported-formats"><a class="header" href="#supported-formats">Supported Formats</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Format</th><th>Description</th><th>Extension</th></tr>
</thead>
<tbody>
<tr><td>CSV</td><td>Standard comma-separated values</td><td><code>.csv</code></td></tr>
<tr><td>JSON</td><td>Pretty-printed JSON arrays</td><td><code>.json</code></td></tr>
<tr><td>JSONL</td><td>Newline-delimited JSON</td><td><code>.jsonl</code></td></tr>
</tbody>
</table>
</div>
<h2 id="features"><a class="header" href="#features">Features</a></h2>
<ul>
<li>Configurable compression (gzip, zstd)</li>
<li>Streaming writes for memory efficiency</li>
<li>Decimal values serialized as strings (IEEE 754 safe)</li>
<li>Configurable field ordering and headers</li>
<li>Automatic directory creation</li>
</ul>
<h2 id="key-types-2"><a class="header" href="#key-types-2">Key Types</a></h2>
<h3 id="outputconfig"><a class="header" href="#outputconfig">OutputConfig</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct OutputConfig {
    pub format: OutputFormat,
    pub compression: CompressionType,
    pub compression_level: u32,
    pub include_headers: bool,
    pub decimal_precision: u32,
}

pub enum OutputFormat {
    Csv,
    Json,
    Jsonl,
}

pub enum CompressionType {
    None,
    Gzip,
    Zstd,
}
<span class="boring">}</span></code></pre>
<h3 id="csvsink"><a class="header" href="#csvsink">CsvSink</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct CsvSink&lt;T&gt; {
    writer: BufWriter&lt;Box&lt;dyn Write&gt;&gt;,
    config: OutputConfig,
    headers_written: bool,
    _phantom: PhantomData&lt;T&gt;,
}
<span class="boring">}</span></code></pre>
<h3 id="jsonsink"><a class="header" href="#jsonsink">JsonSink</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct JsonSink&lt;T&gt; {
    writer: BufWriter&lt;Box&lt;dyn Write&gt;&gt;,
    format: JsonFormat,
    first_written: bool,
    _phantom: PhantomData&lt;T&gt;,
}
<span class="boring">}</span></code></pre>
<h2 id="usage-examples-3"><a class="header" href="#usage-examples-3">Usage Examples</a></h2>
<h3 id="csv-output"><a class="header" href="#csv-output">CSV Output</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_output::{CsvSink, OutputConfig, OutputFormat};

// Create sink
let config = OutputConfig {
    format: OutputFormat::Csv,
    compression: CompressionType::None,
    include_headers: true,
    ..Default::default()
};

let mut sink = CsvSink::new("output/journal_entries.csv", config)?;

// Write data
sink.write_batch(&amp;entries)?;
sink.flush()?;
<span class="boring">}</span></code></pre>
<h3 id="compressed-output"><a class="header" href="#compressed-output">Compressed Output</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_output::{CsvSink, OutputConfig, CompressionType};

let config = OutputConfig {
    compression: CompressionType::Gzip,
    compression_level: 6,
    ..Default::default()
};

let mut sink = CsvSink::new("output/entries.csv.gz", config)?;
sink.write_batch(&amp;entries)?;
<span class="boring">}</span></code></pre>
<h3 id="json-streaming"><a class="header" href="#json-streaming">JSON Streaming</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_output::{JsonSink, OutputConfig, OutputFormat};

let config = OutputConfig {
    format: OutputFormat::Jsonl,
    ..Default::default()
};

let mut sink = JsonSink::new("output/entries.jsonl", config)?;

// Stream writes (memory efficient)
for entry in entries {
    sink.write(&amp;entry)?;
}
sink.flush()?;
<span class="boring">}</span></code></pre>
<h3 id="control-export"><a class="header" href="#control-export">Control Export</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_output::ControlExporter;

let exporter = ControlExporter::new("output/controls/");

// Export all control-related data
exporter.export_controls(&amp;internal_controls)?;
exporter.export_sod_rules(&amp;sod_rules)?;
exporter.export_control_mappings(&amp;mappings)?;
<span class="boring">}</span></code></pre>
<h2 id="sink-trait-implementation"><a class="header" href="#sink-trait-implementation">Sink Trait Implementation</a></h2>
<p>All sinks implement the <code>Sink</code> trait:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl&lt;T: Serialize&gt; Sink&lt;T&gt; for CsvSink&lt;T&gt; {
    type Error = OutputError;

    fn write(&amp;mut self, item: &amp;T) -&gt; Result&lt;(), Self::Error&gt; {
        // Single item write
    }

    fn write_batch(&amp;mut self, items: &amp;[T]) -&gt; Result&lt;(), Self::Error&gt; {
        // Batch write for efficiency
    }

    fn flush(&amp;mut self) -&gt; Result&lt;(), Self::Error&gt; {
        // Ensure all data written to disk
    }
}
<span class="boring">}</span></code></pre>
<h2 id="decimal-serialization"><a class="header" href="#decimal-serialization">Decimal Serialization</a></h2>
<p>Financial amounts are serialized as strings to prevent IEEE 754 floating-point issues:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Internal: Decimal
let amount = dec!(1234.56);

// CSV output: "1234.56" (string)
// JSON output: "1234.56" (string, not number)
<span class="boring">}</span></code></pre>
<p>This ensures exact decimal representation across all systems.</p>
<h2 id="performance-tips"><a class="header" href="#performance-tips">Performance Tips</a></h2>
<h3 id="batch-writes"><a class="header" href="#batch-writes">Batch Writes</a></h3>
<p>Prefer batch writes over individual writes:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Good: Single batch write
sink.write_batch(&amp;entries)?;

// Less efficient: Multiple writes
for entry in &amp;entries {
    sink.write(entry)?;
}
<span class="boring">}</span></code></pre>
<h3 id="buffer-size"><a class="header" href="#buffer-size">Buffer Size</a></h3>
<p>The default buffer size is 8KB. For very large outputs, consider adjusting:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let sink = CsvSink::with_buffer_size(
    "output/large.csv",
    config,
    64 * 1024, // 64KB buffer
)?;
<span class="boring">}</span></code></pre>
<h3 id="compression-trade-offs"><a class="header" href="#compression-trade-offs">Compression Trade-offs</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Compression</th><th>Speed</th><th>Size</th><th>Use Case</th></tr>
</thead>
<tbody>
<tr><td>None</td><td>Fastest</td><td>Largest</td><td>Development, streaming</td></tr>
<tr><td>Gzip</td><td>Medium</td><td>Small</td><td>General purpose</td></tr>
<tr><td>Zstd</td><td>Fast</td><td>Smallest</td><td>Production, archival</td></tr>
</tbody>
</table>
</div>
<h2 id="output-structure-1"><a class="header" href="#output-structure-1">Output Structure</a></h2>
<p>The output module creates organized directory structure:</p>
<pre><code>output/
├── master_data/
│   ├── vendors.csv
│   └── customers.csv
├── transactions/
│   ├── journal_entries.csv
│   └── acdoca.csv
├── controls/
│   ├── internal_controls.csv
│   └── sod_rules.csv
└── labels/
    └── anomaly_labels.csv
</code></pre>
<h2 id="error-handling"><a class="header" href="#error-handling">Error Handling</a></h2>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub enum OutputError {
    IoError(std::io::Error),
    SerializationError(String),
    CompressionError(String),
    DirectoryCreationError(PathBuf),
}
<span class="boring">}</span></code></pre>
<h2 id="see-also-26"><a class="header" href="#see-also-26">See Also</a></h2>
<ul>
<li><a href="#output-formats-1">Output Formats</a></li>
<li><a href="#output-settings-1">Configuration - Output Settings</a></li>
<li><a href="#synth-core">synth-core</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="synth-runtime"><a class="header" href="#synth-runtime">synth-runtime</a></h1>
<p>Runtime orchestration, parallel execution, and memory management.</p>
<h2 id="overview-8"><a class="header" href="#overview-8">Overview</a></h2>
<p><code>synth-runtime</code> provides the execution layer for SyntheticData:</p>
<ul>
<li><strong>GenerationOrchestrator</strong>: Coordinates the complete generation workflow</li>
<li><strong>Parallel Execution</strong>: Multi-threaded generation with Rayon</li>
<li><strong>Memory Management</strong>: Integration with memory guard for OOM prevention</li>
<li><strong>Progress Tracking</strong>: Real-time progress reporting with pause/resume</li>
</ul>
<h2 id="key-components"><a class="header" href="#key-components">Key Components</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Component</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>GenerationOrchestrator</code></td><td>Main workflow coordinator</td></tr>
<tr><td><code>EnhancedOrchestrator</code></td><td>Extended orchestrator with all enterprise features</td></tr>
<tr><td><code>ParallelExecutor</code></td><td>Thread pool management</td></tr>
<tr><td><code>ProgressTracker</code></td><td>Progress bars and status reporting</td></tr>
</tbody>
</table>
</div>
<h2 id="generation-workflow"><a class="header" href="#generation-workflow">Generation Workflow</a></h2>
<p>The orchestrator executes phases in order:</p>
<ol>
<li><strong>Initialize</strong>: Load configuration, validate settings</li>
<li><strong>Master Data</strong>: Generate vendors, customers, materials, assets</li>
<li><strong>Opening Balances</strong>: Create coherent opening balance sheet</li>
<li><strong>Transactions</strong>: Generate journal entries with document flows</li>
<li><strong>Period Close</strong>: Run monthly/quarterly/annual close processes</li>
<li><strong>Anomalies</strong>: Inject configured anomalies and data quality issues</li>
<li><strong>Export</strong>: Write outputs and generate ML labels</li>
</ol>
<h2 id="key-types-3"><a class="header" href="#key-types-3">Key Types</a></h2>
<h3 id="generationorchestrator"><a class="header" href="#generationorchestrator">GenerationOrchestrator</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct GenerationOrchestrator {
    config: Config,
    state: GenerationState,
    progress: Arc&lt;ProgressTracker&gt;,
    memory_guard: MemoryGuard,
}

pub struct GenerationState {
    pub master_data: MasterDataState,
    pub entries: Vec&lt;JournalEntry&gt;,
    pub documents: DocumentState,
    pub balances: BalanceState,
    pub anomaly_labels: Vec&lt;LabeledAnomaly&gt;,
}
<span class="boring">}</span></code></pre>
<h3 id="progresstracker"><a class="header" href="#progresstracker">ProgressTracker</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct ProgressTracker {
    pub current: AtomicU64,
    pub total: u64,
    pub phase: String,
    pub paused: AtomicBool,
    pub start_time: Instant,
}

pub struct Progress {
    pub current: u64,
    pub total: u64,
    pub percent: f64,
    pub phase: String,
    pub entries_per_second: f64,
    pub elapsed: Duration,
    pub estimated_remaining: Duration,
}
<span class="boring">}</span></code></pre>
<h2 id="usage-examples-4"><a class="header" href="#usage-examples-4">Usage Examples</a></h2>
<h3 id="basic-generation"><a class="header" href="#basic-generation">Basic Generation</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_runtime::GenerationOrchestrator;

let config = Config::from_yaml_file("config.yaml")?;
let orchestrator = GenerationOrchestrator::new(config)?;

// Run full generation
orchestrator.run()?;
<span class="boring">}</span></code></pre>
<h3 id="with-progress-callback"><a class="header" href="#with-progress-callback">With Progress Callback</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>orchestrator.run_with_progress(|progress| {
    println!(
        "[{:.1}%] {} - {}/{} ({:.0} entries/sec)",
        progress.percent,
        progress.phase,
        progress.current,
        progress.total,
        progress.entries_per_second,
    );
})?;
<span class="boring">}</span></code></pre>
<h3 id="parallel-execution-2"><a class="header" href="#parallel-execution-2">Parallel Execution</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_runtime::ParallelExecutor;

let executor = ParallelExecutor::new(4); // 4 threads

let results: Vec&lt;JournalEntry&gt; = executor.run(|thread_id| {
    let mut generator = JournalEntryGenerator::new(config.clone(), seed + thread_id);
    generator.generate_batch(batch_size)
})?;
<span class="boring">}</span></code></pre>
<h3 id="memory-aware-generation"><a class="header" href="#memory-aware-generation">Memory-Aware Generation</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_runtime::GenerationOrchestrator;
use synth_core::memory_guard::MemoryGuardConfig;

let memory_config = MemoryGuardConfig {
    soft_limit: 1024 * 1024 * 1024,  // 1GB
    hard_limit: 2 * 1024 * 1024 * 1024,  // 2GB
    check_interval_ms: 1000,
    ..Default::default()
};

let orchestrator = GenerationOrchestrator::with_memory_config(config, memory_config)?;
orchestrator.run()?;
<span class="boring">}</span></code></pre>
<h2 id="pauseresume"><a class="header" href="#pauseresume">Pause/Resume</a></h2>
<p>On Unix systems, generation can be paused and resumed:</p>
<pre><code class="language-bash"># Start generation in background
synth-data generate --config config.yaml --output ./output &amp;

# Send SIGUSR1 to toggle pause
kill -USR1 $(pgrep synth-data)

# Progress bar shows pause state
# [████████░░░░░░░░░░░░] 40% (PAUSED)
</code></pre>
<h3 id="programmatic-pauseresume"><a class="header" href="#programmatic-pauseresume">Programmatic Pause/Resume</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Pause
orchestrator.pause();

// Check state
if orchestrator.is_paused() {
    println!("Generation paused");
}

// Resume
orchestrator.resume();
<span class="boring">}</span></code></pre>
<h2 id="enhanced-orchestrator"><a class="header" href="#enhanced-orchestrator">Enhanced Orchestrator</a></h2>
<p>The <code>EnhancedOrchestrator</code> includes additional enterprise features:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_runtime::EnhancedOrchestrator;

let orchestrator = EnhancedOrchestrator::new(config)?;

// All features enabled
orchestrator
    .with_document_flows()
    .with_intercompany()
    .with_subledgers()
    .with_fx()
    .with_period_close()
    .with_anomaly_injection()
    .with_graph_export()
    .run()?;
<span class="boring">}</span></code></pre>
<h2 id="output-coordination"><a class="header" href="#output-coordination">Output Coordination</a></h2>
<p>The orchestrator coordinates output to multiple sinks:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Orchestrator automatically:
// 1. Creates output directories
// 2. Writes master data files
// 3. Writes transaction files
// 4. Writes subledger files
// 5. Writes labels for ML
// 6. Generates graphs if enabled
<span class="boring">}</span></code></pre>
<h2 id="error-handling-1"><a class="header" href="#error-handling-1">Error Handling</a></h2>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub enum RuntimeError {
    ConfigurationError(ConfigError),
    GenerationError(String),
    MemoryExceeded { limit: u64, current: u64 },
    OutputError(OutputError),
    Interrupted,
}
<span class="boring">}</span></code></pre>
<h2 id="performance-considerations"><a class="header" href="#performance-considerations">Performance Considerations</a></h2>
<h3 id="thread-count"><a class="header" href="#thread-count">Thread Count</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Auto-detect (uses all cores)
let orchestrator = GenerationOrchestrator::new(config)?;

// Manual thread count
let orchestrator = GenerationOrchestrator::with_threads(config, 4)?;
<span class="boring">}</span></code></pre>
<h3 id="memory-management-2"><a class="header" href="#memory-management-2">Memory Management</a></h3>
<p>The orchestrator monitors memory and can:</p>
<ul>
<li>Slow down generation when soft limit approached</li>
<li>Pause generation at hard limit</li>
<li>Stream output to reduce memory pressure</li>
</ul>
<h3 id="batch-sizes"><a class="header" href="#batch-sizes">Batch Sizes</a></h3>
<p>Batch sizes are automatically tuned based on:</p>
<ul>
<li>Available memory</li>
<li>Number of threads</li>
<li>Target throughput</li>
</ul>
<h2 id="see-also-27"><a class="header" href="#see-also-27">See Also</a></h2>
<ul>
<li><a href="#performance-tuning">Performance Tuning</a></li>
<li><a href="#memory-management-1">Memory Management</a></li>
<li><a href="#synth-generators">synth-generators</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="synth-graph"><a class="header" href="#synth-graph">synth-graph</a></h1>
<p>Graph/network export for synthetic accounting data with ML-ready formats.</p>
<h2 id="overview-9"><a class="header" href="#overview-9">Overview</a></h2>
<p><code>synth-graph</code> provides graph construction and export capabilities:</p>
<ul>
<li><strong>Graph Builders</strong>: Transaction, approval, and entity relationship graphs</li>
<li><strong>ML Export</strong>: PyTorch Geometric, Neo4j, and DGL formats</li>
<li><strong>Feature Engineering</strong>: Temporal, amount, structural, and categorical features</li>
<li><strong>Data Splits</strong>: Train/validation/test split generation</li>
</ul>
<h2 id="graph-types"><a class="header" href="#graph-types">Graph Types</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Graph</th><th>Nodes</th><th>Edges</th><th>Use Case</th></tr>
</thead>
<tbody>
<tr><td>Transaction Network</td><td>Accounts, Entities</td><td>Transactions</td><td>Anomaly detection</td></tr>
<tr><td>Approval Network</td><td>Users</td><td>Approvals</td><td>SoD analysis</td></tr>
<tr><td>Entity Relationship</td><td>Legal Entities</td><td>Ownership</td><td>Consolidation analysis</td></tr>
</tbody>
</table>
</div>
<h2 id="export-formats"><a class="header" href="#export-formats">Export Formats</a></h2>
<h3 id="pytorch-geometric-1"><a class="header" href="#pytorch-geometric-1">PyTorch Geometric</a></h3>
<pre><code>graphs/transaction_network/pytorch_geometric/
├── node_features.pt    # [num_nodes, num_features]
├── edge_index.pt       # [2, num_edges]
├── edge_attr.pt        # [num_edges, num_edge_features]
├── labels.pt           # [num_nodes] or [num_edges]
├── train_mask.pt       # Boolean mask
├── val_mask.pt
└── test_mask.pt
</code></pre>
<h3 id="neo4j-1"><a class="header" href="#neo4j-1">Neo4j</a></h3>
<pre><code>graphs/entity_relationship/neo4j/
├── nodes_account.csv
├── nodes_entity.csv
├── edges_transaction.csv
├── edges_ownership.csv
└── import.cypher
</code></pre>
<h3 id="dgl-deep-graph-library"><a class="header" href="#dgl-deep-graph-library">DGL (Deep Graph Library)</a></h3>
<pre><code>graphs/approval_network/dgl/
├── graph.bin           # DGL graph object
├── node_feats.npy      # Node features
├── edge_feats.npy      # Edge features
└── labels.npy          # Labels
</code></pre>
<h2 id="feature-categories"><a class="header" href="#feature-categories">Feature Categories</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Category</th><th>Features</th></tr>
</thead>
<tbody>
<tr><td>Temporal</td><td>weekday, period, is_month_end, is_quarter_end, is_year_end</td></tr>
<tr><td>Amount</td><td>log(amount), benford_probability, is_round_number</td></tr>
<tr><td>Structural</td><td>line_count, unique_accounts, has_intercompany</td></tr>
<tr><td>Categorical</td><td>business_process (one-hot), source_type (one-hot)</td></tr>
</tbody>
</table>
</div>
<h2 id="key-types-4"><a class="header" href="#key-types-4">Key Types</a></h2>
<h3 id="graph-models"><a class="header" href="#graph-models">Graph Models</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct Graph {
    pub nodes: Vec&lt;Node&gt;,
    pub edges: Vec&lt;Edge&gt;,
    pub node_features: Option&lt;Array2&lt;f32&gt;&gt;,
    pub edge_features: Option&lt;Array2&lt;f32&gt;&gt;,
}

pub enum Node {
    Account(AccountNode),
    Entity(EntityNode),
    User(UserNode),
    Transaction(TransactionNode),
}

pub enum Edge {
    Transaction(TransactionEdge),
    Approval(ApprovalEdge),
    Ownership(OwnershipEdge),
}
<span class="boring">}</span></code></pre>
<h3 id="split-configuration"><a class="header" href="#split-configuration">Split Configuration</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct SplitConfig {
    pub train_ratio: f64,     // e.g., 0.7
    pub val_ratio: f64,       // e.g., 0.15
    pub test_ratio: f64,      // e.g., 0.15
    pub stratify_by: Option&lt;String&gt;,
    pub random_seed: u64,
}
<span class="boring">}</span></code></pre>
<h2 id="usage-examples-5"><a class="header" href="#usage-examples-5">Usage Examples</a></h2>
<h3 id="building-transaction-graph"><a class="header" href="#building-transaction-graph">Building Transaction Graph</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_graph::{TransactionGraphBuilder, GraphConfig};

let builder = TransactionGraphBuilder::new(GraphConfig::default());
let graph = builder.build(&amp;journal_entries)?;

println!("Nodes: {}", graph.nodes.len());
println!("Edges: {}", graph.edges.len());
<span class="boring">}</span></code></pre>
<h3 id="pytorch-geometric-export"><a class="header" href="#pytorch-geometric-export">PyTorch Geometric Export</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_graph::{PyTorchGeometricExporter, SplitConfig};

let exporter = PyTorchGeometricExporter::new("output/graphs");

let split = SplitConfig {
    train_ratio: 0.7,
    val_ratio: 0.15,
    test_ratio: 0.15,
    stratify_by: Some("is_anomaly".to_string()),
    random_seed: 42,
};

exporter.export(&amp;graph, split)?;
<span class="boring">}</span></code></pre>
<h3 id="neo4j-export"><a class="header" href="#neo4j-export">Neo4j Export</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_graph::Neo4jExporter;

let exporter = Neo4jExporter::new("output/graphs/neo4j");
exporter.export(&amp;graph)?;

// Generates import script:
// LOAD CSV WITH HEADERS FROM 'file:///nodes_account.csv' AS row
// CREATE (:Account {id: row.id, name: row.name, ...})
<span class="boring">}</span></code></pre>
<h3 id="feature-engineering"><a class="header" href="#feature-engineering">Feature Engineering</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_graph::features::{FeatureExtractor, FeatureConfig};

let extractor = FeatureExtractor::new(FeatureConfig {
    temporal: true,
    amount: true,
    structural: true,
    categorical: true,
});

let node_features = extractor.extract_node_features(&amp;entries)?;
let edge_features = extractor.extract_edge_features(&amp;entries)?;
<span class="boring">}</span></code></pre>
<h2 id="graph-construction"><a class="header" href="#graph-construction">Graph Construction</a></h2>
<h3 id="transaction-network"><a class="header" href="#transaction-network">Transaction Network</a></h3>
<p>Accounts and entities become nodes; transactions become edges.</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Nodes:
// - Each GL account is a node
// - Each vendor/customer is a node

// Edges:
// - Each journal entry line creates an edge
// - Edge connects account to entity
// - Edge features: amount, date, fraud flag
<span class="boring">}</span></code></pre>
<h3 id="approval-network"><a class="header" href="#approval-network">Approval Network</a></h3>
<p>Users become nodes; approval relationships become edges.</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Nodes:
// - Each user/employee is a node
// - Node features: approval_limit, department, role

// Edges:
// - Approval actions create edges
// - Edge features: amount, threshold, escalation
<span class="boring">}</span></code></pre>
<h3 id="entity-relationship-network"><a class="header" href="#entity-relationship-network">Entity Relationship Network</a></h3>
<p>Legal entities become nodes; ownership and IC relationships become edges.</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Nodes:
// - Each company/legal entity is a node
// - Node features: currency, country, parent_flag

// Edges:
// - Ownership relationships (parent → subsidiary)
// - IC transaction relationships
// - Edge features: ownership_percent, transaction_volume
<span class="boring">}</span></code></pre>
<h2 id="ml-integration"><a class="header" href="#ml-integration">ML Integration</a></h2>
<h3 id="loading-in-pytorch"><a class="header" href="#loading-in-pytorch">Loading in PyTorch</a></h3>
<pre><code class="language-python">import torch
from torch_geometric.data import Data

# Load exported data
node_features = torch.load('node_features.pt')
edge_index = torch.load('edge_index.pt')
edge_attr = torch.load('edge_attr.pt')
labels = torch.load('labels.pt')
train_mask = torch.load('train_mask.pt')

data = Data(
    x=node_features,
    edge_index=edge_index,
    edge_attr=edge_attr,
    y=labels,
    train_mask=train_mask,
)
</code></pre>
<h3 id="loading-in-neo4j"><a class="header" href="#loading-in-neo4j">Loading in Neo4j</a></h3>
<pre><code class="language-bash"># Import using generated script
neo4j-admin import \
    --nodes=nodes_account.csv \
    --nodes=nodes_entity.csv \
    --relationships=edges_transaction.csv
</code></pre>
<h2 id="configuration-9"><a class="header" href="#configuration-9">Configuration</a></h2>
<pre><code class="language-yaml">graph_export:
  enabled: true
  formats:
    - pytorch_geometric
    - neo4j
  graphs:
    - transaction_network
    - approval_network
    - entity_relationship
  split:
    train: 0.7
    val: 0.15
    test: 0.15
    stratify: is_anomaly
  features:
    temporal: true
    amount: true
    structural: true
    categorical: true
</code></pre>
<h2 id="see-also-28"><a class="header" href="#see-also-28">See Also</a></h2>
<ul>
<li><a href="#graph-export">Graph Export</a></li>
<li><a href="#fraud-detection-ml">Fraud Detection Use Case</a></li>
<li><a href="#synth-generators">synth-generators</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="synth-cli"><a class="header" href="#synth-cli">synth-cli</a></h1>
<p>Command-line interface for synthetic accounting data generation.</p>
<h2 id="overview-10"><a class="header" href="#overview-10">Overview</a></h2>
<p><code>synth-cli</code> provides the <code>synth-data</code> binary for command-line usage:</p>
<ul>
<li><strong>generate</strong>: Generate synthetic data from configuration</li>
<li><strong>init</strong>: Create configuration files with industry presets</li>
<li><strong>validate</strong>: Validate configuration files</li>
<li><strong>info</strong>: Display available presets and options</li>
</ul>
<h2 id="installation-3"><a class="header" href="#installation-3">Installation</a></h2>
<pre><code class="language-bash">cargo build --release
# Binary at: target/release/synth-data
</code></pre>
<h2 id="commands-1"><a class="header" href="#commands-1">Commands</a></h2>
<h3 id="generate-1"><a class="header" href="#generate-1">generate</a></h3>
<p>Generate synthetic financial data.</p>
<pre><code class="language-bash"># From configuration file
synth-data generate --config config.yaml --output ./output

# Demo mode with defaults
synth-data generate --demo --output ./demo-output

# Override seed
synth-data generate --config config.yaml --output ./output --seed 12345

# Verbose output
synth-data generate --config config.yaml --output ./output -v
</code></pre>
<h3 id="init-1"><a class="header" href="#init-1">init</a></h3>
<p>Create a configuration file from presets.</p>
<pre><code class="language-bash"># Industry preset with complexity
synth-data init --industry manufacturing --complexity medium -o config.yaml
</code></pre>
<p><strong>Available industries:</strong></p>
<ul>
<li><code>manufacturing</code></li>
<li><code>retail</code></li>
<li><code>financial_services</code></li>
<li><code>healthcare</code></li>
<li><code>technology</code></li>
<li><code>energy</code></li>
<li><code>telecom</code></li>
<li><code>transportation</code></li>
<li><code>hospitality</code></li>
</ul>
<h3 id="validate-1"><a class="header" href="#validate-1">validate</a></h3>
<p>Validate configuration files.</p>
<pre><code class="language-bash">synth-data validate --config config.yaml
</code></pre>
<h3 id="info-1"><a class="header" href="#info-1">info</a></h3>
<p>Display available options.</p>
<pre><code class="language-bash">synth-data info
</code></pre>
<h2 id="key-types-5"><a class="header" href="#key-types-5">Key Types</a></h2>
<h3 id="cli-arguments"><a class="header" href="#cli-arguments">CLI Arguments</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[derive(Parser)]
pub struct Cli {
    #[command(subcommand)]
    pub command: Command,

    /// Enable verbose logging
    #[arg(short, long)]
    pub verbose: bool,

    /// Suppress non-error output
    #[arg(short, long)]
    pub quiet: bool,
}

#[derive(Subcommand)]
pub enum Command {
    Generate(GenerateArgs),
    Init(InitArgs),
    Validate(ValidateArgs),
    Info,
}
<span class="boring">}</span></code></pre>
<h3 id="generate-arguments"><a class="header" href="#generate-arguments">Generate Arguments</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct GenerateArgs {
    /// Configuration file path
    #[arg(short, long)]
    pub config: Option&lt;PathBuf&gt;,

    /// Use demo preset
    #[arg(long)]
    pub demo: bool,

    /// Output directory (required)
    #[arg(short, long)]
    pub output: PathBuf,

    /// Override random seed
    #[arg(long)]
    pub seed: Option&lt;u64&gt;,

    /// Output format
    #[arg(long, default_value = "csv")]
    pub format: String,
}
<span class="boring">}</span></code></pre>
<h2 id="signal-handling"><a class="header" href="#signal-handling">Signal Handling</a></h2>
<p>On Unix systems, pause/resume generation with <code>SIGUSR1</code>:</p>
<pre><code class="language-bash"># Start in background
synth-data generate --config config.yaml --output ./output &amp;

# Toggle pause
kill -USR1 $(pgrep synth-data)
</code></pre>
<p>Progress bar shows pause state:</p>
<pre><code>[████████░░░░░░░░░░░░] 40% - 40000/100000 entries (PAUSED)
</code></pre>
<h2 id="exit-codes-1"><a class="header" href="#exit-codes-1">Exit Codes</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Code</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>0</td><td>Success</td></tr>
<tr><td>1</td><td>Configuration error</td></tr>
<tr><td>2</td><td>Generation error</td></tr>
<tr><td>3</td><td>I/O error</td></tr>
</tbody>
</table>
</div>
<h2 id="environment-variables-2"><a class="header" href="#environment-variables-2">Environment Variables</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Variable</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>SYNTH_DATA_LOG</code></td><td>Log level (error, warn, info, debug, trace)</td></tr>
<tr><td><code>SYNTH_DATA_THREADS</code></td><td>Worker thread count</td></tr>
<tr><td><code>SYNTH_DATA_MEMORY_LIMIT</code></td><td>Memory limit in bytes</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-bash">SYNTH_DATA_LOG=debug synth-data generate --demo --output ./output
</code></pre>
<h2 id="progress-display"><a class="header" href="#progress-display">Progress Display</a></h2>
<p>During generation, a progress bar shows:</p>
<pre><code>Generating synthetic data...
[████████████████████] 100% - 100000/100000 entries
Phase: Transactions | 85,432 entries/sec | ETA: 0:00

Generation complete!
- Journal entries: 100,000
- Document flows: 15,000
- Output: ./output/
- Duration: 1.2s
</code></pre>
<h2 id="usage-examples-6"><a class="header" href="#usage-examples-6">Usage Examples</a></h2>
<h3 id="basic-generation-1"><a class="header" href="#basic-generation-1">Basic Generation</a></h3>
<pre><code class="language-bash">synth-data init --industry manufacturing -o config.yaml
synth-data generate --config config.yaml --output ./output
</code></pre>
<h3 id="scripting"><a class="header" href="#scripting">Scripting</a></h3>
<pre><code class="language-bash">#!/bin/bash
for industry in manufacturing retail healthcare; do
    synth-data init --industry $industry --complexity medium -o ${industry}.yaml
    synth-data generate --config ${industry}.yaml --output ./output/${industry}
done
</code></pre>
<h3 id="cicd"><a class="header" href="#cicd">CI/CD</a></h3>
<pre><code class="language-yaml"># GitHub Actions
- name: Generate Test Data
  run: |
    cargo build --release
    ./target/release/synth-data generate --demo --output ./test-data
</code></pre>
<h3 id="reproducible-generation-1"><a class="header" href="#reproducible-generation-1">Reproducible Generation</a></h3>
<pre><code class="language-bash"># Same seed = same output
synth-data generate --config config.yaml --output ./run1 --seed 42
synth-data generate --config config.yaml --output ./run2 --seed 42
diff -r run1 run2  # No differences
</code></pre>
<h2 id="see-also-29"><a class="header" href="#see-also-29">See Also</a></h2>
<ul>
<li><a href="#cli-reference">CLI Reference</a></li>
<li><a href="#quick-start-1">Quick Start</a></li>
<li><a href="#synth-runtime">synth-runtime</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="synth-server"><a class="header" href="#synth-server">synth-server</a></h1>
<p>REST, gRPC, and WebSocket server for synthetic data generation.</p>
<h2 id="overview-11"><a class="header" href="#overview-11">Overview</a></h2>
<p><code>synth-server</code> provides server-based access to SyntheticData:</p>
<ul>
<li><strong>REST API</strong>: Configuration management and stream control</li>
<li><strong>gRPC API</strong>: High-performance streaming generation</li>
<li><strong>WebSocket</strong>: Real-time event streaming</li>
<li><strong>Production Features</strong>: Authentication, rate limiting, timeouts</li>
</ul>
<h2 id="starting-the-server-1"><a class="header" href="#starting-the-server-1">Starting the Server</a></h2>
<pre><code class="language-bash">cargo run -p synth-server -- --port 3000 --worker-threads 4
</code></pre>
<h3 id="command-line-options"><a class="header" href="#command-line-options">Command-Line Options</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Option</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>--port</code></td><td>3000</td><td>HTTP/WebSocket port</td></tr>
<tr><td><code>--grpc-port</code></td><td>50051</td><td>gRPC port</td></tr>
<tr><td><code>--worker-threads</code></td><td>CPU cores</td><td>Worker thread count</td></tr>
<tr><td><code>--api-key</code></td><td>None</td><td>Required API key</td></tr>
<tr><td><code>--rate-limit</code></td><td>100</td><td>Max requests per minute</td></tr>
<tr><td><code>--memory-limit</code></td><td>None</td><td>Memory limit in bytes</td></tr>
</tbody>
</table>
</div>
<h2 id="architecture-1"><a class="header" href="#architecture-1">Architecture</a></h2>
<pre><code>┌─────────────────────────────────────────────────────────────┐
│                      synth-server                           │
├─────────────────────────────────────────────────────────────┤
│  REST API (Axum)  │  gRPC (Tonic)  │  WebSocket (Axum)     │
├─────────────────────────────────────────────────────────────┤
│                   Middleware Layer                          │
│  Auth │ Rate Limit │ Timeout │ CORS │ Logging              │
├─────────────────────────────────────────────────────────────┤
│                 Generation Service                          │
│        (wraps synth-runtime orchestrator)                   │
└─────────────────────────────────────────────────────────────┘
</code></pre>
<h2 id="rest-api-endpoints"><a class="header" href="#rest-api-endpoints">REST API Endpoints</a></h2>
<h3 id="configuration-10"><a class="header" href="#configuration-10">Configuration</a></h3>
<pre><code class="language-bash"># Get current configuration
curl http://localhost:3000/api/config

# Update configuration
curl -X POST http://localhost:3000/api/config \
  -H "Content-Type: application/json" \
  -d '{"transactions": {"target_count": 50000}}'

# Validate configuration
curl -X POST http://localhost:3000/api/config/validate \
  -H "Content-Type: application/json" \
  -d @config.json
</code></pre>
<h3 id="stream-control"><a class="header" href="#stream-control">Stream Control</a></h3>
<pre><code class="language-bash"># Start generation
curl -X POST http://localhost:3000/api/stream/start

# Pause
curl -X POST http://localhost:3000/api/stream/pause

# Resume
curl -X POST http://localhost:3000/api/stream/resume

# Stop
curl -X POST http://localhost:3000/api/stream/stop

# Trigger pattern (month_end, quarter_end, year_end)
curl -X POST http://localhost:3000/api/stream/trigger/month_end
</code></pre>
<h3 id="health-check-1"><a class="header" href="#health-check-1">Health Check</a></h3>
<pre><code class="language-bash">curl http://localhost:3000/health
</code></pre>
<h2 id="websocket-api-1"><a class="header" href="#websocket-api-1">WebSocket API</a></h2>
<p>Connect to <code>ws://localhost:3000/ws/events</code> for real-time events.</p>
<h3 id="event-types-1"><a class="header" href="#event-types-1">Event Types</a></h3>
<pre><code class="language-json">// Progress
{"type": "progress", "current": 50000, "total": 100000, "percent": 50.0}

// Entry (streamed data)
{"type": "entry", "data": {"document_id": "abc-123", ...}}

// Error
{"type": "error", "message": "Memory limit exceeded"}

// Complete
{"type": "complete", "total_entries": 100000, "duration_ms": 1200}
</code></pre>
<h2 id="grpc-api-1"><a class="header" href="#grpc-api-1">gRPC API</a></h2>
<h3 id="proto-definition-1"><a class="header" href="#proto-definition-1">Proto Definition</a></h3>
<pre><code class="language-protobuf">syntax = "proto3";
package synth;

service SynthService {
  rpc GetConfig(Empty) returns (Config);
  rpc SetConfig(Config) returns (Status);
  rpc StartGeneration(GenerationRequest) returns (stream Entry);
  rpc StopGeneration(Empty) returns (Status);
}
</code></pre>
<h3 id="client-example"><a class="header" href="#client-example">Client Example</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth::synth_client::SynthClient;

let mut client = SynthClient::connect("http://localhost:50051").await?;

let request = tonic::Request::new(GenerationRequest { count: Some(1000) });
let mut stream = client.start_generation(request).await?.into_inner();

while let Some(entry) = stream.message().await? {
    println!("Entry: {:?}", entry.document_id);
}
<span class="boring">}</span></code></pre>
<h2 id="middleware"><a class="header" href="#middleware">Middleware</a></h2>
<h3 id="authentication-1"><a class="header" href="#authentication-1">Authentication</a></h3>
<pre><code class="language-bash"># With API key
curl -H "X-API-Key: your-key" http://localhost:3000/api/config
</code></pre>
<h3 id="rate-limiting-1"><a class="header" href="#rate-limiting-1">Rate Limiting</a></h3>
<p>Sliding window rate limiter with per-client tracking.</p>
<pre><code class="language-json">// 429 response when exceeded
{
  "error": "rate_limit_exceeded",
  "retry_after": 30
}
</code></pre>
<h3 id="request-timeout"><a class="header" href="#request-timeout">Request Timeout</a></h3>
<p>Default timeout is 30 seconds. Long-running operations use streaming.</p>
<h2 id="key-types-6"><a class="header" href="#key-types-6">Key Types</a></h2>
<h3 id="server-configuration"><a class="header" href="#server-configuration">Server Configuration</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct ServerConfig {
    pub port: u16,
    pub grpc_port: u16,
    pub worker_threads: usize,
    pub api_key: Option&lt;String&gt;,
    pub rate_limit: RateLimitConfig,
    pub memory_limit: Option&lt;u64&gt;,
    pub cors_origins: Vec&lt;String&gt;,
}
<span class="boring">}</span></code></pre>
<h3 id="rate-limit-configuration"><a class="header" href="#rate-limit-configuration">Rate Limit Configuration</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct RateLimitConfig {
    pub max_requests: u32,
    pub window_seconds: u64,
    pub exempt_paths: Vec&lt;String&gt;,
}
<span class="boring">}</span></code></pre>
<h2 id="production-deployment"><a class="header" href="#production-deployment">Production Deployment</a></h2>
<h3 id="docker"><a class="header" href="#docker">Docker</a></h3>
<pre><code class="language-dockerfile">FROM rust:1.75 as builder
WORKDIR /app
COPY . .
RUN cargo build --release -p synth-server

FROM debian:bookworm-slim
COPY --from=builder /app/target/release/synth-server /usr/local/bin/
EXPOSE 3000 50051
CMD ["synth-server", "--port", "3000"]
</code></pre>
<h3 id="kubernetes"><a class="header" href="#kubernetes">Kubernetes</a></h3>
<pre><code class="language-yaml">apiVersion: apps/v1
kind: Deployment
metadata:
  name: synth-server
spec:
  replicas: 3
  template:
    spec:
      containers:
      - name: synth-server
        image: synth-server:latest
        ports:
        - containerPort: 3000
        - containerPort: 50051
        env:
        - name: SYNTH_API_KEY
          valueFrom:
            secretKeyRef:
              name: synth-secrets
              key: api-key
        resources:
          limits:
            memory: "2Gi"
</code></pre>
<h2 id="monitoring-1"><a class="header" href="#monitoring-1">Monitoring</a></h2>
<h3 id="health-endpoint"><a class="header" href="#health-endpoint">Health Endpoint</a></h3>
<pre><code class="language-bash">curl http://localhost:3000/health
</code></pre>
<pre><code class="language-json">{
  "status": "healthy",
  "uptime_seconds": 3600,
  "memory_usage_mb": 512,
  "active_streams": 2
}
</code></pre>
<h3 id="logging"><a class="header" href="#logging">Logging</a></h3>
<p>Enable structured logging:</p>
<pre><code class="language-bash">RUST_LOG=synth_server=info cargo run -p synth-server
</code></pre>
<h2 id="see-also-30"><a class="header" href="#see-also-30">See Also</a></h2>
<ul>
<li><a href="#server-api">Server API Reference</a></li>
<li><a href="#synth-runtime">synth-runtime</a></li>
<li><a href="#performance-tuning">Performance Tuning</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="synth-ui"><a class="header" href="#synth-ui">synth-ui</a></h1>
<p>Cross-platform desktop application for synthetic data generation.</p>
<h2 id="overview-12"><a class="header" href="#overview-12">Overview</a></h2>
<p><code>synth-ui</code> provides a graphical interface for SyntheticData:</p>
<ul>
<li><strong>Visual Configuration</strong>: Comprehensive UI for all configuration sections</li>
<li><strong>Real-time Streaming</strong>: Live generation viewer with WebSocket</li>
<li><strong>Preset Management</strong>: One-click industry preset application</li>
<li><strong>Validation Feedback</strong>: Real-time configuration validation</li>
</ul>
<h2 id="technology-stack"><a class="header" href="#technology-stack">Technology Stack</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Component</th><th>Technology</th></tr>
</thead>
<tbody>
<tr><td>Backend</td><td>Tauri 2.0 (Rust)</td></tr>
<tr><td>Frontend</td><td>SvelteKit + Svelte 5</td></tr>
<tr><td>Styling</td><td>TailwindCSS</td></tr>
<tr><td>State</td><td>Svelte stores with runes</td></tr>
</tbody>
</table>
</div>
<h2 id="prerequisites-3"><a class="header" href="#prerequisites-3">Prerequisites</a></h2>
<h3 id="linux-ubuntudebian"><a class="header" href="#linux-ubuntudebian">Linux (Ubuntu/Debian)</a></h3>
<pre><code class="language-bash">sudo apt install libgtk-3-dev libwebkit2gtk-4.1-dev \
    libappindicator3-dev librsvg2-dev
</code></pre>
<h3 id="linux-fedora"><a class="header" href="#linux-fedora">Linux (Fedora)</a></h3>
<pre><code class="language-bash">sudo dnf install gtk3-devel webkit2gtk4.1-devel \
    libappindicator-gtk3-devel librsvg2-devel
</code></pre>
<h3 id="linux-arch"><a class="header" href="#linux-arch">Linux (Arch)</a></h3>
<pre><code class="language-bash">sudo pacman -S webkit2gtk-4.1 base-devel curl wget file \
    openssl appmenu-gtk-module gtk3 librsvg libvips
</code></pre>
<h3 id="macos"><a class="header" href="#macos">macOS</a></h3>
<p>No additional dependencies required (uses built-in WebKit).</p>
<h3 id="windows-1"><a class="header" href="#windows-1">Windows</a></h3>
<p>WebView2 runtime (usually pre-installed on Windows 10/11).</p>
<h2 id="development-1"><a class="header" href="#development-1">Development</a></h2>
<pre><code class="language-bash">cd crates/synth-ui

# Install dependencies
npm install

# Frontend development (no desktop features)
npm run dev

# Desktop app development
npm run tauri dev

# Production build
npm run build
npm run tauri build
</code></pre>
<h2 id="project-structure-1"><a class="header" href="#project-structure-1">Project Structure</a></h2>
<pre><code>synth-ui/
├── src/                    # Svelte frontend
│   ├── routes/             # SvelteKit pages
│   │   ├── +page.svelte    # Dashboard
│   │   ├── config/         # Configuration pages (15+ sections)
│   │   │   ├── global/
│   │   │   ├── transactions/
│   │   │   ├── master-data/
│   │   │   └── ...
│   │   └── generate/
│   │       └── stream/     # Generation streaming viewer
│   └── lib/
│       ├── components/     # Reusable UI components
│       │   ├── forms/      # Form components
│       │   └── config/     # Config-specific components
│       ├── stores/         # Svelte stores
│       └── utils/          # Utilities
├── src-tauri/              # Rust backend
│   ├── src/
│   │   ├── lib.rs          # Tauri commands
│   │   └── main.rs         # App entry point
│   └── Cargo.toml
├── e2e/                    # Playwright E2E tests
├── package.json
└── tauri.conf.json
</code></pre>
<h2 id="configuration-sections-3"><a class="header" href="#configuration-sections-3">Configuration Sections</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Section</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>Global</td><td>Industry, dates, seed, performance</td></tr>
<tr><td>Transactions</td><td>Line items, amounts, sources</td></tr>
<tr><td>Master Data</td><td>Vendors, customers, materials</td></tr>
<tr><td>Document Flows</td><td>P2P, O2C configuration</td></tr>
<tr><td>Financial</td><td>Balance, subledger, FX, period close</td></tr>
<tr><td>Compliance</td><td>Fraud, controls, approval</td></tr>
<tr><td>Analytics</td><td>Graph export, anomaly, data quality</td></tr>
<tr><td>Output</td><td>Formats, compression</td></tr>
</tbody>
</table>
</div>
<h2 id="key-components-1"><a class="header" href="#key-components-1">Key Components</a></h2>
<h3 id="config-store"><a class="header" href="#config-store">Config Store</a></h3>
<pre><code class="language-typescript">// src/lib/stores/config.ts
import { writable } from 'svelte/store';

export const config = writable&lt;Config&gt;(defaultConfig);
export const isDirty = writable(false);

export function updateConfig(section: string, value: any) {
    config.update(c =&gt; ({...c, [section]: value}));
    isDirty.set(true);
}
</code></pre>
<h3 id="form-components"><a class="header" href="#form-components">Form Components</a></h3>
<pre><code class="language-svelte">&lt;!-- src/lib/components/forms/InputNumber.svelte --&gt;
&lt;script lang="ts"&gt;
  export let value: number;
  export let min: number = 0;
  export let max: number = Infinity;
  export let label: string;
&lt;/script&gt;

&lt;label&gt;
  {label}
  &lt;input type="number" bind:value {min} {max} /&gt;
&lt;/label&gt;
</code></pre>
<h3 id="tauri-commands"><a class="header" href="#tauri-commands">Tauri Commands</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// src-tauri/src/lib.rs
#[tauri::command]
async fn save_config(config: Config) -&gt; Result&lt;(), String&gt; {
    // Save configuration
}

#[tauri::command]
async fn start_generation(config: Config) -&gt; Result&lt;(), String&gt; {
    // Start generation via synth-runtime
}
<span class="boring">}</span></code></pre>
<h2 id="server-connection"><a class="header" href="#server-connection">Server Connection</a></h2>
<p>The UI connects to <code>synth-server</code> for streaming:</p>
<pre><code class="language-bash"># Start server first
cargo run -p synth-server

# Then run UI
npm run tauri dev
</code></pre>
<p>Default server URL: <code>http://localhost:3000</code></p>
<h2 id="testing"><a class="header" href="#testing">Testing</a></h2>
<pre><code class="language-bash"># Unit tests
npm test

# E2E tests with Playwright
npx playwright test

# E2E with UI
npx playwright test --ui
</code></pre>
<h2 id="build-output"><a class="header" href="#build-output">Build Output</a></h2>
<p>Production builds create platform-specific packages:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Platform</th><th>Output</th></tr>
</thead>
<tbody>
<tr><td>Windows</td><td><code>.msi</code>, <code>.exe</code></td></tr>
<tr><td>macOS</td><td><code>.dmg</code>, <code>.app</code></td></tr>
<tr><td>Linux</td><td><code>.deb</code>, <code>.AppImage</code>, <code>.rpm</code></td></tr>
</tbody>
</table>
</div>
<p>Located in: <code>src-tauri/target/release/bundle/</code></p>
<h2 id="ui-features"><a class="header" href="#ui-features">UI Features</a></h2>
<h3 id="dashboard-1"><a class="header" href="#dashboard-1">Dashboard</a></h3>
<ul>
<li>System overview</li>
<li>Quick stats</li>
<li>Recent generations</li>
</ul>
<h3 id="configuration-editor-1"><a class="header" href="#configuration-editor-1">Configuration Editor</a></h3>
<ul>
<li>Visual form editors for all sections</li>
<li>Real-time validation</li>
<li>Dirty state tracking</li>
<li>Export to YAML/JSON</li>
</ul>
<h3 id="streaming-viewer"><a class="header" href="#streaming-viewer">Streaming Viewer</a></h3>
<ul>
<li>Real-time progress</li>
<li>Entry preview table</li>
<li>Memory usage graph</li>
<li>Pause/resume controls</li>
</ul>
<h3 id="preset-selector-1"><a class="header" href="#preset-selector-1">Preset Selector</a></h3>
<ul>
<li>Industry presets</li>
<li>Complexity levels</li>
<li>One-click application</li>
</ul>
<h2 id="see-also-31"><a class="header" href="#see-also-31">See Also</a></h2>
<ul>
<li><a href="#desktop-ui">Desktop UI Guide</a></li>
<li><a href="#synth-server">synth-server</a></li>
<li><a href="configuration/README.html">Configuration</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="synth-eval"><a class="header" href="#synth-eval">synth-eval</a></h1>
<p>Evaluation framework for synthetic financial data quality and coherence.</p>
<h2 id="overview-13"><a class="header" href="#overview-13">Overview</a></h2>
<p><code>synth-eval</code> provides automated quality assessment for generated data:</p>
<ul>
<li><strong>Statistical Evaluation</strong>: Benford’s Law compliance, distribution analysis</li>
<li><strong>Coherence Checking</strong>: Balance verification, document chain integrity</li>
<li><strong>Intercompany Validation</strong>: IC matching and elimination verification</li>
<li><strong>Uniqueness Analysis</strong>: Duplicate detection across datasets</li>
</ul>
<h2 id="evaluation-categories"><a class="header" href="#evaluation-categories">Evaluation Categories</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Category</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>Statistical</td><td>Benford’s Law, amount distributions, temporal patterns</td></tr>
<tr><td>Coherence</td><td>Trial balance, subledger reconciliation, FX consistency</td></tr>
<tr><td>Intercompany</td><td>IC matching rates, elimination completeness</td></tr>
<tr><td>Uniqueness</td><td>Document ID collisions, duplicate transaction detection</td></tr>
</tbody>
</table>
</div>
<h2 id="key-types-7"><a class="header" href="#key-types-7">Key Types</a></h2>
<h3 id="evaluator"><a class="header" href="#evaluator">Evaluator</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct Evaluator {
    config: EvaluationConfig,
    checkers: Vec&lt;Box&lt;dyn Checker&gt;&gt;,
}

pub struct EvaluationConfig {
    pub benford_threshold: f64,      // Chi-square threshold
    pub balance_tolerance: Decimal,   // Allowed imbalance
    pub ic_match_threshold: f64,      // Required match rate
    pub duplicate_check: bool,
}
<span class="boring">}</span></code></pre>
<h3 id="evaluation-report"><a class="header" href="#evaluation-report">Evaluation Report</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct EvaluationReport {
    pub overall_status: Status,
    pub categories: Vec&lt;CategoryResult&gt;,
    pub warnings: Vec&lt;Warning&gt;,
    pub details: Vec&lt;Finding&gt;,
    pub scores: Scores,
}

pub struct Scores {
    pub benford_score: f64,           // 0.0-1.0
    pub balance_coherence: f64,       // 0.0-1.0
    pub ic_matching_rate: f64,        // 0.0-1.0
    pub uniqueness_score: f64,        // 0.0-1.0
}

pub enum Status {
    Passed,
    PassedWithWarnings,
    Failed,
}
<span class="boring">}</span></code></pre>
<h2 id="usage-examples-7"><a class="header" href="#usage-examples-7">Usage Examples</a></h2>
<h3 id="basic-evaluation"><a class="header" href="#basic-evaluation">Basic Evaluation</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_eval::{Evaluator, EvaluationConfig};

let evaluator = Evaluator::new(EvaluationConfig::default());
let report = evaluator.evaluate(&amp;generated_data)?;

println!("Status: {:?}", report.overall_status);
println!("Benford compliance: {:.2}%", report.scores.benford_score * 100.0);
<span class="boring">}</span></code></pre>
<h3 id="custom-configuration"><a class="header" href="#custom-configuration">Custom Configuration</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let config = EvaluationConfig {
    benford_threshold: 0.05,          // 5% significance level
    balance_tolerance: dec!(0.01),    // 1 cent tolerance
    ic_match_threshold: 0.99,         // 99% required match
    duplicate_check: true,
};

let evaluator = Evaluator::new(config);
<span class="boring">}</span></code></pre>
<h3 id="category-specific-evaluation"><a class="header" href="#category-specific-evaluation">Category-Specific Evaluation</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_eval::checkers::{BenfordChecker, BalanceChecker};

let benford = BenfordChecker::new(0.05);
let result = benford.check(&amp;amounts)?;

let balance = BalanceChecker::new(dec!(0.01));
let result = balance.check(&amp;trial_balance)?;
<span class="boring">}</span></code></pre>
<h2 id="evaluation-checks"><a class="header" href="#evaluation-checks">Evaluation Checks</a></h2>
<h3 id="benfords-law"><a class="header" href="#benfords-law">Benford’s Law</a></h3>
<p>Verifies first-digit distribution follows Benford’s Law:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Expected: P(d) = log10(1 + 1/d)
// d=1: 30.1%, d=2: 17.6%, d=3: 12.5%, etc.

let benford_result = evaluator.check_benford(&amp;amounts)?;

if benford_result.chi_square &gt; critical_value {
    println!("Warning: Amounts don't follow Benford's Law");
}
<span class="boring">}</span></code></pre>
<h3 id="balance-coherence-2"><a class="header" href="#balance-coherence-2">Balance Coherence</a></h3>
<p>Verifies accounting equation:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Assets = Liabilities + Equity
let balance_result = evaluator.check_balance(&amp;trial_balance)?;

if !balance_result.passed {
    println!("Imbalance: {:?}", balance_result.difference);
}
<span class="boring">}</span></code></pre>
<h3 id="document-chain-integrity"><a class="header" href="#document-chain-integrity">Document Chain Integrity</a></h3>
<p>Verifies document references:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// PO → GR → Invoice → Payment chain
let chain_result = evaluator.check_document_chains(&amp;documents)?;

for broken_chain in &amp;chain_result.broken_chains {
    println!("Broken chain: {} → {}", broken_chain.from, broken_chain.to);
}
<span class="boring">}</span></code></pre>
<h3 id="ic-matching"><a class="header" href="#ic-matching">IC Matching</a></h3>
<p>Verifies intercompany transactions match:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let ic_result = evaluator.check_ic_matching(&amp;ic_entries)?;

println!("Match rate: {:.2}%", ic_result.match_rate * 100.0);
println!("Unmatched: {}", ic_result.unmatched.len());
<span class="boring">}</span></code></pre>
<h3 id="uniqueness"><a class="header" href="#uniqueness">Uniqueness</a></h3>
<p>Detects duplicate document IDs:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let unique_result = evaluator.check_uniqueness(&amp;entries)?;

if !unique_result.duplicates.is_empty() {
    for dup in &amp;unique_result.duplicates {
        println!("Duplicate ID: {}", dup.document_id);
    }
}
<span class="boring">}</span></code></pre>
<h2 id="report-output"><a class="header" href="#report-output">Report Output</a></h2>
<h3 id="console-report"><a class="header" href="#console-report">Console Report</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>evaluator.print_report(&amp;report);
<span class="boring">}</span></code></pre>
<pre><code>=== Evaluation Report ===
Status: PASSED

Scores:
  Benford Compliance:    98.5%
  Balance Coherence:    100.0%
  IC Matching Rate:      99.8%
  Uniqueness:           100.0%

Warnings:
  - 3 entries with unusual amounts detected

Categories:
  [✓] Statistical:   PASSED
  [✓] Coherence:     PASSED
  [✓] Intercompany:  PASSED
  [✓] Uniqueness:    PASSED
</code></pre>
<h3 id="json-report"><a class="header" href="#json-report">JSON Report</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let json = evaluator.to_json(&amp;report)?;
std::fs::write("evaluation_report.json", json)?;
<span class="boring">}</span></code></pre>
<h2 id="integration-with-generation"><a class="header" href="#integration-with-generation">Integration with Generation</a></h2>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_runtime::GenerationOrchestrator;
use synth_eval::Evaluator;

let orchestrator = GenerationOrchestrator::new(config)?;
let data = orchestrator.run()?;

// Evaluate generated data
let evaluator = Evaluator::new(EvaluationConfig::default());
let report = evaluator.evaluate(&amp;data)?;

if report.overall_status == Status::Failed {
    return Err("Generated data failed quality checks");
}
<span class="boring">}</span></code></pre>
<h2 id="see-also-32"><a class="header" href="#see-also-32">See Also</a></h2>
<ul>
<li><a href="#synth-generators">synth-generators</a></li>
<li><a href="#data-quality-variations">Data Quality</a></li>
<li><a href="#testing-2">Testing Guidelines</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="synth-ocpm"><a class="header" href="#synth-ocpm">synth-ocpm</a></h1>
<p>Object-Centric Process Mining (OCPM) models and generators.</p>
<h2 id="overview-14"><a class="header" href="#overview-14">Overview</a></h2>
<p><code>synth-ocpm</code> provides OCEL 2.0 compliant event log generation:</p>
<ul>
<li><strong>OCEL 2.0 Models</strong>: Events, objects, relationships per IEEE standard</li>
<li><strong>Process Generators</strong>: P2P (Procure-to-Pay), O2C (Order-to-Cash) flows</li>
<li><strong>Export Formats</strong>: OCEL 2.0 JSON, XML, and SQLite</li>
</ul>
<h2 id="ocel-20-standard"><a class="header" href="#ocel-20-standard">OCEL 2.0 Standard</a></h2>
<p>Implements the Object-Centric Event Log standard:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Element</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>Events</td><td>Activities with timestamps and attributes</td></tr>
<tr><td>Objects</td><td>Business objects (PO, Invoice, Payment, etc.)</td></tr>
<tr><td>Object Types</td><td>Type definitions with attribute schemas</td></tr>
<tr><td>Relationships</td><td>Object-to-object relationships</td></tr>
<tr><td>Event-Object Links</td><td>Many-to-many event-object associations</td></tr>
</tbody>
</table>
</div>
<h2 id="key-types-8"><a class="header" href="#key-types-8">Key Types</a></h2>
<h3 id="ocel-models"><a class="header" href="#ocel-models">OCEL Models</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct OcelEventLog {
    pub object_types: Vec&lt;ObjectType&gt;,
    pub event_types: Vec&lt;EventType&gt;,
    pub objects: Vec&lt;Object&gt;,
    pub events: Vec&lt;Event&gt;,
    pub relationships: Vec&lt;ObjectRelationship&gt;,
}

pub struct Event {
    pub id: String,
    pub event_type: String,
    pub timestamp: DateTime&lt;Utc&gt;,
    pub attributes: HashMap&lt;String, Value&gt;,
    pub objects: Vec&lt;ObjectRef&gt;,
}

pub struct Object {
    pub id: String,
    pub object_type: String,
    pub attributes: HashMap&lt;String, Value&gt;,
}
<span class="boring">}</span></code></pre>
<h3 id="process-flow-documents"><a class="header" href="#process-flow-documents">Process Flow Documents</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct P2pDocuments {
    pub po_number: String,
    pub vendor_id: String,
    pub company_code: String,
    pub amount: Decimal,
    pub currency: String,
}

pub struct O2cDocuments {
    pub so_number: String,
    pub customer_id: String,
    pub company_code: String,
    pub amount: Decimal,
    pub currency: String,
}
<span class="boring">}</span></code></pre>
<h2 id="process-flows"><a class="header" href="#process-flows">Process Flows</a></h2>
<h3 id="procure-to-pay-p2p-1"><a class="header" href="#procure-to-pay-p2p-1">Procure-to-Pay (P2P)</a></h3>
<pre><code>Create PO → Approve PO → Release PO → Create GR → Post GR →
Receive Invoice → Verify Invoice → Post Invoice → Execute Payment
</code></pre>
<p>Events generated:</p>
<ul>
<li><code>Create Purchase Order</code></li>
<li><code>Approve Purchase Order</code></li>
<li><code>Release Purchase Order</code></li>
<li><code>Create Goods Receipt</code></li>
<li><code>Post Goods Receipt</code></li>
<li><code>Receive Vendor Invoice</code></li>
<li><code>Verify Three-Way Match</code></li>
<li><code>Post Vendor Invoice</code></li>
<li><code>Execute Payment</code></li>
</ul>
<h3 id="order-to-cash-o2c-1"><a class="header" href="#order-to-cash-o2c-1">Order-to-Cash (O2C)</a></h3>
<pre><code>Create SO → Check Credit → Release SO → Create Delivery →
Pick → Pack → Ship → Create Invoice → Post Invoice → Receive Payment
</code></pre>
<p>Events generated:</p>
<ul>
<li><code>Create Sales Order</code></li>
<li><code>Check Credit</code></li>
<li><code>Release Sales Order</code></li>
<li><code>Create Delivery</code></li>
<li><code>Pick Materials</code></li>
<li><code>Pack Shipment</code></li>
<li><code>Ship Goods</code></li>
<li><code>Create Customer Invoice</code></li>
<li><code>Post Customer Invoice</code></li>
<li><code>Receive Customer Payment</code></li>
</ul>
<h2 id="usage-examples-8"><a class="header" href="#usage-examples-8">Usage Examples</a></h2>
<h3 id="generate-p2p-case"><a class="header" href="#generate-p2p-case">Generate P2P Case</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_ocpm::{OcpmGenerator, P2pDocuments};

let mut generator = OcpmGenerator::new(seed);

let documents = P2pDocuments::new(
    "PO-001",
    "V-001",
    "1000",
    dec!(5000.00),
    "USD",
);

let users = vec!["user1", "user2", "user3"];
let start_time = Utc::now();

let result = generator.generate_p2p_case(&amp;documents, start_time, &amp;users);
<span class="boring">}</span></code></pre>
<h3 id="generate-o2c-case"><a class="header" href="#generate-o2c-case">Generate O2C Case</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_ocpm::{OcpmGenerator, O2cDocuments};

let documents = O2cDocuments::new(
    "SO-001",
    "C-001",
    "1000",
    dec!(10000.00),
    "USD",
);

let result = generator.generate_o2c_case(&amp;documents, start_time, &amp;users);
<span class="boring">}</span></code></pre>
<h3 id="generate-complete-event-log"><a class="header" href="#generate-complete-event-log">Generate Complete Event Log</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_ocpm::OcpmGenerator;

let mut generator = OcpmGenerator::new(seed);
let event_log = generator.generate_event_log(
    p2p_count: 1000,
    o2c_count: 500,
    start_date,
    end_date,
)?;
<span class="boring">}</span></code></pre>
<h2 id="export-formats-1"><a class="header" href="#export-formats-1">Export Formats</a></h2>
<h3 id="ocel-20-json"><a class="header" href="#ocel-20-json">OCEL 2.0 JSON</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_ocpm::export::{Ocel2Exporter, ExportFormat};

let exporter = Ocel2Exporter::new(ExportFormat::Json);
exporter.export(&amp;event_log, "output/ocel2.json")?;
<span class="boring">}</span></code></pre>
<p>Output structure:</p>
<pre><code class="language-json">{
  "objectTypes": [...],
  "eventTypes": [...],
  "objects": [...],
  "events": [...],
  "relations": [...]
}
</code></pre>
<h3 id="ocel-20-xml"><a class="header" href="#ocel-20-xml">OCEL 2.0 XML</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let exporter = Ocel2Exporter::new(ExportFormat::Xml);
exporter.export(&amp;event_log, "output/ocel2.xml")?;
<span class="boring">}</span></code></pre>
<h3 id="sqlite-database"><a class="header" href="#sqlite-database">SQLite Database</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let exporter = Ocel2Exporter::new(ExportFormat::Sqlite);
exporter.export(&amp;event_log, "output/ocel2.sqlite")?;
<span class="boring">}</span></code></pre>
<p>Tables created:</p>
<ul>
<li><code>object_types</code></li>
<li><code>event_types</code></li>
<li><code>objects</code></li>
<li><code>events</code></li>
<li><code>event_objects</code></li>
<li><code>object_relationships</code></li>
</ul>
<h2 id="object-types"><a class="header" href="#object-types">Object Types</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>PurchaseOrder</td><td>P2P ordering document</td></tr>
<tr><td>GoodsReceipt</td><td>Inventory receipt</td></tr>
<tr><td>VendorInvoice</td><td>AP invoice</td></tr>
<tr><td>Payment</td><td>Payment document</td></tr>
<tr><td>SalesOrder</td><td>O2C ordering document</td></tr>
<tr><td>Delivery</td><td>Shipment document</td></tr>
<tr><td>CustomerInvoice</td><td>AR invoice</td></tr>
<tr><td>CustomerPayment</td><td>Customer receipt</td></tr>
<tr><td>Material</td><td>Product/item</td></tr>
<tr><td>Vendor</td><td>Supplier</td></tr>
<tr><td>Customer</td><td>Customer/buyer</td></tr>
</tbody>
</table>
</div>
<h2 id="integration-with-process-mining-tools"><a class="header" href="#integration-with-process-mining-tools">Integration with Process Mining Tools</a></h2>
<p>OCEL 2.0 exports are compatible with:</p>
<ul>
<li><strong>PM4Py</strong>: Python process mining library</li>
<li><strong>Celonis</strong>: Enterprise process mining platform</li>
<li><strong>PROM</strong>: Academic process mining toolkit</li>
<li><strong>OCPA</strong>: Object-centric process analysis tool</li>
</ul>
<h3 id="loading-in-pm4py"><a class="header" href="#loading-in-pm4py">Loading in PM4Py</a></h3>
<pre><code class="language-python">import pm4py
from pm4py.objects.ocel.importer import jsonocel

ocel = jsonocel.apply("ocel2.json")
print(f"Events: {len(ocel.events)}")
print(f"Objects: {len(ocel.objects)}")
</code></pre>
<h2 id="see-also-33"><a class="header" href="#see-also-33">See Also</a></h2>
<ul>
<li><a href="#process-mining-1">Process Mining Use Case</a></li>
<li><a href="#document-flows-1">Document Flows</a></li>
<li><a href="#synth-generators">synth-generators</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="synth-test-utils"><a class="header" href="#synth-test-utils">synth-test-utils</a></h1>
<p>Test utilities and helpers for the SyntheticData workspace.</p>
<h2 id="overview-15"><a class="header" href="#overview-15">Overview</a></h2>
<p><code>synth-test-utils</code> provides shared testing infrastructure:</p>
<ul>
<li><strong>Test Fixtures</strong>: Pre-configured test data and scenarios</li>
<li><strong>Assertion Helpers</strong>: Domain-specific assertions for financial data</li>
<li><strong>Mock Generators</strong>: Simplified generators for unit testing</li>
<li><strong>Snapshot Testing</strong>: Helpers for snapshot-based testing</li>
</ul>
<h2 id="fixtures"><a class="header" href="#fixtures">Fixtures</a></h2>
<h3 id="journal-entry-fixtures"><a class="header" href="#journal-entry-fixtures">Journal Entry Fixtures</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_test_utils::fixtures;

// Balanced two-line entry
let entry = fixtures::balanced_journal_entry();
assert!(entry.is_balanced());

// Entry with specific amounts
let entry = fixtures::journal_entry_with_amount(dec!(1000.00));

// Fraudulent entry for testing detection
let entry = fixtures::fraudulent_entry(FraudType::SplitTransaction);
<span class="boring">}</span></code></pre>
<h3 id="master-data-fixtures"><a class="header" href="#master-data-fixtures">Master Data Fixtures</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Sample vendors
let vendors = fixtures::sample_vendors(10);

// Sample customers
let customers = fixtures::sample_customers(20);

// Chart of accounts
let coa = fixtures::test_chart_of_accounts();
<span class="boring">}</span></code></pre>
<h3 id="amount-fixtures"><a class="header" href="#amount-fixtures">Amount Fixtures</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Benford-compliant amounts
let amounts = fixtures::sample_amounts(1000);

// Round-number biased amounts
let amounts = fixtures::round_amounts(100);

// Fraud-pattern amounts
let amounts = fixtures::suspicious_amounts(50);
<span class="boring">}</span></code></pre>
<h3 id="configuration-fixtures"><a class="header" href="#configuration-fixtures">Configuration Fixtures</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Minimal valid config
let config = fixtures::test_config();

// Manufacturing preset
let config = fixtures::manufacturing_config();

// Config with specific transaction count
let config = fixtures::config_with_transactions(10000);
<span class="boring">}</span></code></pre>
<h2 id="assertions"><a class="header" href="#assertions">Assertions</a></h2>
<h3 id="balance-assertions"><a class="header" href="#balance-assertions">Balance Assertions</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_test_utils::assertions;

#[test]
fn test_entry_is_balanced() {
    let entry = create_entry();
    assertions::assert_balanced(&amp;entry);
}

#[test]
fn test_trial_balance() {
    let tb = generate_trial_balance();
    assertions::assert_trial_balance_balanced(&amp;tb);
}
<span class="boring">}</span></code></pre>
<h3 id="benfords-law-assertions"><a class="header" href="#benfords-law-assertions">Benford’s Law Assertions</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[test]
fn test_benford_compliance() {
    let amounts = generate_amounts(10000);
    assertions::assert_benford_compliant(&amp;amounts, 0.05);
}
<span class="boring">}</span></code></pre>
<h3 id="document-chain-assertions"><a class="header" href="#document-chain-assertions">Document Chain Assertions</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[test]
fn test_p2p_chain() {
    let documents = generate_p2p_flow();
    assertions::assert_valid_document_chain(&amp;documents);
}
<span class="boring">}</span></code></pre>
<h3 id="uniqueness-assertions"><a class="header" href="#uniqueness-assertions">Uniqueness Assertions</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[test]
fn test_no_duplicate_ids() {
    let entries = generate_entries(1000);
    assertions::assert_unique_document_ids(&amp;entries);
}
<span class="boring">}</span></code></pre>
<h2 id="mock-generators"><a class="header" href="#mock-generators">Mock Generators</a></h2>
<h3 id="simple-journal-entry-generator"><a class="header" href="#simple-journal-entry-generator">Simple Journal Entry Generator</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_test_utils::mocks::MockJeGenerator;

let mut generator = MockJeGenerator::new(42);

// Generate entries without full config
let entries = generator.generate(100);
<span class="boring">}</span></code></pre>
<h3 id="predictable-amount-generator"><a class="header" href="#predictable-amount-generator">Predictable Amount Generator</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_test_utils::mocks::MockAmountGenerator;

let mut generator = MockAmountGenerator::new();

// Returns predictable sequence
let amount1 = generator.next(); // 100.00
let amount2 = generator.next(); // 200.00
<span class="boring">}</span></code></pre>
<h3 id="fixed-date-generator"><a class="header" href="#fixed-date-generator">Fixed Date Generator</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_test_utils::mocks::MockDateGenerator;

let generator = MockDateGenerator::fixed(
    NaiveDate::from_ymd_opt(2024, 1, 15).unwrap()
);
<span class="boring">}</span></code></pre>
<h2 id="snapshot-testing"><a class="header" href="#snapshot-testing">Snapshot Testing</a></h2>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_test_utils::snapshots;

#[test]
fn test_je_serialization() {
    let entry = fixtures::balanced_journal_entry();
    snapshots::assert_json_snapshot("je_balanced", &amp;entry);
}

#[test]
fn test_csv_output() {
    let entries = fixtures::sample_entries(10);
    snapshots::assert_csv_snapshot("entries_sample", &amp;entries);
}
<span class="boring">}</span></code></pre>
<h2 id="test-helpers"><a class="header" href="#test-helpers">Test Helpers</a></h2>
<h3 id="temporary-directories"><a class="header" href="#temporary-directories">Temporary Directories</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_test_utils::temp_dir;

#[test]
fn test_output_writing() {
    let dir = temp_dir::create();

    // Test writes to temp directory
    let path = dir.path().join("test.csv");
    write_output(&amp;path)?;

    assert!(path.exists());
    // Directory cleaned up on drop
}
<span class="boring">}</span></code></pre>
<h3 id="seed-management"><a class="header" href="#seed-management">Seed Management</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_test_utils::seeds;

#[test]
fn test_deterministic_generation() {
    let seed = seeds::fixed();

    let result1 = generate_with_seed(seed);
    let result2 = generate_with_seed(seed);

    assert_eq!(result1, result2);
}
<span class="boring">}</span></code></pre>
<h3 id="time-helpers"><a class="header" href="#time-helpers">Time Helpers</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_test_utils::time;

#[test]
fn test_with_frozen_time() {
    let frozen = time::freeze_at(2024, 1, 15);

    let entry = generate_entry_with_current_date();

    assert_eq!(entry.posting_date, frozen.date());
}
<span class="boring">}</span></code></pre>
<h2 id="usage-in-other-crates"><a class="header" href="#usage-in-other-crates">Usage in Other Crates</a></h2>
<p>Add to <code>Cargo.toml</code>:</p>
<pre><code class="language-toml">[dev-dependencies]
synth-test-utils = { path = "../synth-test-utils" }
</code></pre>
<p>Use in tests:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[cfg(test)]
mod tests {
    use synth_test_utils::{fixtures, assertions};

    #[test]
    fn test_my_function() {
        let input = fixtures::test_config();
        let result = my_function(&amp;input);
        assertions::assert_balanced(&amp;result);
    }
}
<span class="boring">}</span></code></pre>
<h2 id="fixture-data-files"><a class="header" href="#fixture-data-files">Fixture Data Files</a></h2>
<p>Test data files in <code>fixtures/</code>:</p>
<pre><code>synth-test-utils/
└── fixtures/
    ├── chart_of_accounts.yaml
    ├── sample_entries.json
    ├── vendor_master.csv
    └── test_config.yaml
</code></pre>
<h2 id="see-also-34"><a class="header" href="#see-also-34">See Also</a></h2>
<ul>
<li><a href="#testing-2">Testing Guidelines</a></li>
<li><a href="#synth-eval">synth-eval</a></li>
<li><a href="#development-setup-1">Development Setup</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="advanced-topics"><a class="header" href="#advanced-topics">Advanced Topics</a></h1>
<p>Advanced features for specialized use cases.</p>
<h2 id="overview-16"><a class="header" href="#overview-16">Overview</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Topic</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><a href="#anomaly-injection-1">Anomaly Injection</a></td><td>Fraud, errors, and process issues</td></tr>
<tr><td><a href="#data-quality-variations">Data Quality Variations</a></td><td>Missing values, typos, duplicates</td></tr>
<tr><td><a href="#graph-export">Graph Export</a></td><td>ML-ready graph formats</td></tr>
<tr><td><a href="#intercompany-processing">Intercompany Processing</a></td><td>Multi-entity transactions</td></tr>
<tr><td><a href="#period-close-engine">Period Close Engine</a></td><td>Month/quarter/year-end processes</td></tr>
<tr><td><a href="#performance-tuning">Performance Tuning</a></td><td>Optimization strategies</td></tr>
</tbody>
</table>
</div>
<h2 id="feature-matrix"><a class="header" href="#feature-matrix">Feature Matrix</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Feature</th><th>Use Case</th><th>Output</th></tr>
</thead>
<tbody>
<tr><td>Anomaly Injection</td><td>ML training</td><td>Labels (CSV)</td></tr>
<tr><td>Data Quality</td><td>Testing robustness</td><td>Varied data</td></tr>
<tr><td>Graph Export</td><td>GNN training</td><td>PyG, Neo4j</td></tr>
<tr><td>Intercompany</td><td>Consolidation testing</td><td>IC pairs</td></tr>
<tr><td>Period Close</td><td>Full cycle testing</td><td>Closing entries</td></tr>
</tbody>
</table>
</div>
<h2 id="enabling-advanced-features"><a class="header" href="#enabling-advanced-features">Enabling Advanced Features</a></h2>
<h3 id="in-configuration"><a class="header" href="#in-configuration">In Configuration</a></h3>
<pre><code class="language-yaml"># Anomaly injection
anomaly_injection:
  enabled: true
  total_rate: 0.02
  generate_labels: true

# Data quality variations
data_quality:
  enabled: true
  missing_values:
    rate: 0.01

# Graph export
graph_export:
  enabled: true
  formats:
    - pytorch_geometric
    - neo4j

# Intercompany
intercompany:
  enabled: true

# Period close
period_close:
  enabled: true
  monthly:
    accruals: true
    depreciation: true
</code></pre>
<h3 id="via-cli"><a class="header" href="#via-cli">Via CLI</a></h3>
<p>Most advanced features are controlled through configuration. Use init to create a base config, then customize:</p>
<pre><code class="language-bash">synth-data init --industry manufacturing --complexity medium -o config.yaml
# Edit config.yaml to enable advanced features
synth-data generate --config config.yaml --output ./output
</code></pre>
<h2 id="prerequisites-4"><a class="header" href="#prerequisites-4">Prerequisites</a></h2>
<p>Some advanced features have dependencies:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Feature</th><th>Requires</th></tr>
</thead>
<tbody>
<tr><td>Intercompany</td><td>Multiple companies defined</td></tr>
<tr><td>Period Close</td><td><code>period_months</code> ≥ 1</td></tr>
<tr><td>Graph Export</td><td>Transactions generated</td></tr>
<tr><td>FX</td><td>Multiple currencies</td></tr>
</tbody>
</table>
</div>
<h2 id="output-files"><a class="header" href="#output-files">Output Files</a></h2>
<p>Advanced features produce additional outputs:</p>
<pre><code>output/
├── labels/                      # Anomaly injection
│   ├── anomaly_labels.csv
│   ├── fraud_labels.csv
│   └── quality_issues.csv
├── graphs/                      # Graph export
│   ├── pytorch_geometric/
│   └── neo4j/
├── consolidation/               # Intercompany
│   ├── eliminations.csv
│   └── ic_pairs.csv
└── period_close/                # Period close
    ├── trial_balances/
    ├── accruals.csv
    └── closing_entries.csv
</code></pre>
<h2 id="performance-impact"><a class="header" href="#performance-impact">Performance Impact</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Feature</th><th>Impact</th><th>Mitigation</th></tr>
</thead>
<tbody>
<tr><td>Anomaly Injection</td><td>Low</td><td>Post-processing</td></tr>
<tr><td>Data Quality</td><td>Low</td><td>Post-processing</td></tr>
<tr><td>Graph Export</td><td>Medium</td><td>Separate phase</td></tr>
<tr><td>Intercompany</td><td>Medium</td><td>Per-transaction</td></tr>
<tr><td>Period Close</td><td>Low</td><td>Per-period</td></tr>
</tbody>
</table>
</div>
<h2 id="see-also-35"><a class="header" href="#see-also-35">See Also</a></h2>
<ul>
<li><a href="configuration/README.html">Configuration</a></li>
<li><a href="use-cases/README.html">Use Cases</a></li>
<li><a href="#synth-generators">synth-generators</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="anomaly-injection-1"><a class="header" href="#anomaly-injection-1">Anomaly Injection</a></h1>
<p>Generate labeled anomalies for machine learning training.</p>
<h2 id="overview-17"><a class="header" href="#overview-17">Overview</a></h2>
<p>Anomaly injection adds realistic irregularities to generated data with full labeling for supervised learning:</p>
<ul>
<li>20+ fraud types</li>
<li>Error patterns</li>
<li>Process issues</li>
<li>Statistical outliers</li>
<li>Relational anomalies</li>
</ul>
<h2 id="configuration-11"><a class="header" href="#configuration-11">Configuration</a></h2>
<pre><code class="language-yaml">anomaly_injection:
  enabled: true
  total_rate: 0.02                   # 2% anomaly rate
  generate_labels: true              # Output ML labels

  categories:                        # Category distribution
    fraud: 0.25
    error: 0.40
    process_issue: 0.20
    statistical: 0.10
    relational: 0.05

  temporal_pattern:
    year_end_spike: 1.5              # More anomalies at year-end

  clustering:
    enabled: true
    cluster_probability: 0.2         # 20% appear in clusters
</code></pre>
<h2 id="anomaly-categories"><a class="header" href="#anomaly-categories">Anomaly Categories</a></h2>
<h3 id="fraud-types-2"><a class="header" href="#fraud-types-2">Fraud Types</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Type</th><th>Description</th><th>Detection Difficulty</th></tr>
</thead>
<tbody>
<tr><td><code>fictitious_transaction</code></td><td>Fabricated entries</td><td>Medium</td></tr>
<tr><td><code>revenue_manipulation</code></td><td>Premature recognition</td><td>Hard</td></tr>
<tr><td><code>expense_capitalization</code></td><td>Improper capitalization</td><td>Medium</td></tr>
<tr><td><code>split_transaction</code></td><td>Split to avoid threshold</td><td>Easy</td></tr>
<tr><td><code>round_tripping</code></td><td>Circular transactions</td><td>Hard</td></tr>
<tr><td><code>kickback_scheme</code></td><td>Vendor kickbacks</td><td>Hard</td></tr>
<tr><td><code>ghost_employee</code></td><td>Non-existent payee</td><td>Medium</td></tr>
<tr><td><code>duplicate_payment</code></td><td>Same invoice twice</td><td>Easy</td></tr>
<tr><td><code>unauthorized_discount</code></td><td>Unapproved discounts</td><td>Medium</td></tr>
<tr><td><code>suspense_abuse</code></td><td>Hide in suspense</td><td>Hard</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-yaml">fraud:
  types:
    fictitious_transaction: 0.15
    split_transaction: 0.20
    duplicate_payment: 0.15
    ghost_employee: 0.10
    kickback_scheme: 0.10
    revenue_manipulation: 0.10
    expense_capitalization: 0.10
    unauthorized_discount: 0.10
</code></pre>
<h3 id="error-types-1"><a class="header" href="#error-types-1">Error Types</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>duplicate_entry</code></td><td>Same entry posted twice</td></tr>
<tr><td><code>reversed_amount</code></td><td>Debit/credit swapped</td></tr>
<tr><td><code>wrong_period</code></td><td>Posted to wrong period</td></tr>
<tr><td><code>wrong_account</code></td><td>Incorrect GL account</td></tr>
<tr><td><code>missing_reference</code></td><td>Missing document reference</td></tr>
<tr><td><code>incorrect_tax_code</code></td><td>Wrong tax calculation</td></tr>
<tr><td><code>misclassification</code></td><td>Wrong account category</td></tr>
</tbody>
</table>
</div>
<h3 id="process-issues-1"><a class="header" href="#process-issues-1">Process Issues</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>late_posting</code></td><td>Posted after cutoff</td></tr>
<tr><td><code>skipped_approval</code></td><td>Missing required approval</td></tr>
<tr><td><code>threshold_manipulation</code></td><td>Amount just below threshold</td></tr>
<tr><td><code>missing_documentation</code></td><td>No supporting document</td></tr>
<tr><td><code>out_of_sequence</code></td><td>Documents out of order</td></tr>
</tbody>
</table>
</div>
<h3 id="statistical-anomalies-1"><a class="header" href="#statistical-anomalies-1">Statistical Anomalies</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>unusual_amount</code></td><td>Significant deviation from mean</td></tr>
<tr><td><code>trend_break</code></td><td>Sudden pattern change</td></tr>
<tr><td><code>benford_violation</code></td><td>Doesn’t follow Benford’s Law</td></tr>
<tr><td><code>outlier_value</code></td><td>Extreme value</td></tr>
</tbody>
</table>
</div>
<h3 id="relational-anomalies-1"><a class="header" href="#relational-anomalies-1">Relational Anomalies</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>circular_transaction</code></td><td>A → B → A flow</td></tr>
<tr><td><code>dormant_account_activity</code></td><td>Inactive account used</td></tr>
<tr><td><code>unusual_counterparty</code></td><td>Unexpected entity pairing</td></tr>
</tbody>
</table>
</div>
<h2 id="injection-strategies"><a class="header" href="#injection-strategies">Injection Strategies</a></h2>
<h3 id="amount-manipulation"><a class="header" href="#amount-manipulation">Amount Manipulation</a></h3>
<pre><code class="language-yaml">anomaly_injection:
  strategies:
    amount:
      enabled: true
      threshold_adjacent: 0.3        # Just below approval limit
      round_number_bias: 0.4         # Suspicious round amounts
</code></pre>
<p><strong>Threshold-adjacent:</strong> Amounts like $9,999 when limit is $10,000.</p>
<h3 id="date-manipulation"><a class="header" href="#date-manipulation">Date Manipulation</a></h3>
<pre><code class="language-yaml">anomaly_injection:
  strategies:
    date:
      enabled: true
      weekend_bias: 0.2              # Weekend postings
      after_hours_bias: 0.15         # After business hours
</code></pre>
<h3 id="duplication"><a class="header" href="#duplication">Duplication</a></h3>
<pre><code class="language-yaml">anomaly_injection:
  strategies:
    duplication:
      enabled: true
      exact_duplicate: 0.5           # Exact copy
      near_duplicate: 0.3            # Slight variations
      delayed_duplicate: 0.2         # Same entry later
</code></pre>
<h2 id="temporal-patterns"><a class="header" href="#temporal-patterns">Temporal Patterns</a></h2>
<p>Anomalies can follow realistic patterns:</p>
<pre><code class="language-yaml">anomaly_injection:
  temporal_pattern:
    month_end_spike: 1.2             # 20% more at month-end
    quarter_end_spike: 1.5           # 50% more at quarter-end
    year_end_spike: 2.0              # Double at year-end
    seasonality: true                # Follow industry patterns
</code></pre>
<h2 id="entity-targeting"><a class="header" href="#entity-targeting">Entity Targeting</a></h2>
<p>Control which entities receive anomalies:</p>
<pre><code class="language-yaml">anomaly_injection:
  entity_targeting:
    strategy: weighted               # random, repeat_offender, weighted

    repeat_offender:
      enabled: true
      rate: 0.4                      # 40% from same users

    high_volume_bias: 0.3            # Target high-volume entities
</code></pre>
<h2 id="clustering"><a class="header" href="#clustering">Clustering</a></h2>
<p>Real anomalies often cluster:</p>
<pre><code class="language-yaml">anomaly_injection:
  clustering:
    enabled: true
    cluster_probability: 0.2         # 20% in clusters
    cluster_size:
      min: 3
      max: 10
    cluster_timespan_days: 30        # Within 30-day window
</code></pre>
<h2 id="output-labels"><a class="header" href="#output-labels">Output Labels</a></h2>
<h3 id="anomaly_labelscsv-1"><a class="header" href="#anomaly_labelscsv-1">anomaly_labels.csv</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Field</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>document_id</code></td><td>Entry reference</td></tr>
<tr><td><code>anomaly_id</code></td><td>Unique anomaly ID</td></tr>
<tr><td><code>anomaly_type</code></td><td>Specific type</td></tr>
<tr><td><code>anomaly_category</code></td><td>Fraud, Error, etc.</td></tr>
<tr><td><code>severity</code></td><td>Low, Medium, High</td></tr>
<tr><td><code>detection_difficulty</code></td><td>Easy, Medium, Hard</td></tr>
<tr><td><code>description</code></td><td>Human-readable description</td></tr>
</tbody>
</table>
</div>
<h3 id="fraud_labelscsv-1"><a class="header" href="#fraud_labelscsv-1">fraud_labels.csv</a></h3>
<p>Subset with fraud-specific fields:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Field</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>document_id</code></td><td>Entry reference</td></tr>
<tr><td><code>fraud_type</code></td><td>Specific fraud pattern</td></tr>
<tr><td><code>perpetrator_id</code></td><td>Employee ID</td></tr>
<tr><td><code>scheme_id</code></td><td>Related anomaly group</td></tr>
<tr><td><code>amount_manipulated</code></td><td>Fraud amount</td></tr>
</tbody>
</table>
</div>
<h2 id="ml-integration-1"><a class="header" href="#ml-integration-1">ML Integration</a></h2>
<h3 id="loading-labels"><a class="header" href="#loading-labels">Loading Labels</a></h3>
<pre><code class="language-python">import pandas as pd

labels = pd.read_csv('output/labels/anomaly_labels.csv')
entries = pd.read_csv('output/transactions/journal_entries.csv')

# Merge
data = entries.merge(labels, on='document_id', how='left')
data['is_anomaly'] = data['anomaly_id'].notna()
</code></pre>
<h3 id="feature-engineering-1"><a class="header" href="#feature-engineering-1">Feature Engineering</a></h3>
<pre><code class="language-python"># Create features
features = [
    'amount', 'line_count', 'is_round_number',
    'is_weekend', 'is_month_end', 'hour_of_day'
]

X = data[features]
y = data['is_anomaly']
</code></pre>
<h3 id="traintest-split"><a class="header" href="#traintest-split">Train/Test Split</a></h3>
<p>Labels include suggested splits:</p>
<pre><code class="language-python">from sklearn.model_selection import train_test_split

X_train, X_test, y_train, y_test = train_test_split(
    X, y,
    test_size=0.2,
    stratify=y,  # Maintain anomaly ratio
    random_state=42
)
</code></pre>
<h2 id="example-configuration"><a class="header" href="#example-configuration">Example Configuration</a></h2>
<h3 id="fraud-detection-training"><a class="header" href="#fraud-detection-training">Fraud Detection Training</a></h3>
<pre><code class="language-yaml">anomaly_injection:
  enabled: true
  total_rate: 0.02
  generate_labels: true

  categories:
    fraud: 1.0                       # Only fraud for focused training

  clustering:
    enabled: true
    cluster_probability: 0.3

fraud:
  enabled: true
  fraud_rate: 0.02
  types:
    split_transaction: 0.25
    duplicate_payment: 0.25
    kickback_scheme: 0.20
    ghost_employee: 0.15
    fictitious_transaction: 0.15
</code></pre>
<h3 id="general-anomaly-detection"><a class="header" href="#general-anomaly-detection">General Anomaly Detection</a></h3>
<pre><code class="language-yaml">anomaly_injection:
  enabled: true
  total_rate: 0.05
  generate_labels: true

  categories:
    fraud: 0.15
    error: 0.45
    process_issue: 0.25
    statistical: 0.10
    relational: 0.05
</code></pre>
<h2 id="see-also-36"><a class="header" href="#see-also-36">See Also</a></h2>
<ul>
<li><a href="#compliance-1">Configuration - Compliance</a></li>
<li><a href="#fraud-detection-ml">Fraud Detection Use Case</a></li>
<li><a href="#graph-export">Graph Export</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="data-quality-variations"><a class="header" href="#data-quality-variations">Data Quality Variations</a></h1>
<p>Generate realistic data quality issues for testing robustness.</p>
<h2 id="overview-18"><a class="header" href="#overview-18">Overview</a></h2>
<p>Real-world data has imperfections. The data quality module introduces:</p>
<ul>
<li>Missing values (various patterns)</li>
<li>Format variations</li>
<li>Duplicates</li>
<li>Typos and transcription errors</li>
<li>Encoding issues</li>
</ul>
<h2 id="configuration-12"><a class="header" href="#configuration-12">Configuration</a></h2>
<pre><code class="language-yaml">data_quality:
  enabled: true

  missing_values:
    rate: 0.01
    pattern: mcar

  format_variations:
    date_formats: true
    amount_formats: true

  duplicates:
    rate: 0.001
    types: [exact, near, fuzzy]

  typos:
    rate: 0.005
    keyboard_aware: true
</code></pre>
<h2 id="missing-values"><a class="header" href="#missing-values">Missing Values</a></h2>
<h3 id="patterns"><a class="header" href="#patterns">Patterns</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Pattern</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>mcar</code></td><td>Missing Completely At Random</td></tr>
<tr><td><code>mar</code></td><td>Missing At Random (conditional)</td></tr>
<tr><td><code>mnar</code></td><td>Missing Not At Random (value-dependent)</td></tr>
<tr><td><code>systematic</code></td><td>Entire field groups missing</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-yaml">data_quality:
  missing_values:
    rate: 0.01                       # 1% missing overall
    pattern: mcar

    # Pattern-specific settings
    mcar:
      uniform: true                  # Equal probability all fields

    mar:
      conditions:
        - field: vendor_name
          dependent_on: is_intercompany
          probability: 0.1

    mnar:
      conditions:
        - field: amount
          when_above: 100000         # Large amounts more likely missing
          probability: 0.05

    systematic:
      groups:
        - [address, city, country]   # All or none
</code></pre>
<h3 id="field-targeting"><a class="header" href="#field-targeting">Field Targeting</a></h3>
<pre><code class="language-yaml">data_quality:
  missing_values:
    fields:
      description: 0.02              # 2% missing
      cost_center: 0.05              # 5% missing
      tax_code: 0.03                 # 3% missing
    exclude:
      - document_id                  # Never make missing
      - posting_date
      - account_number
</code></pre>
<h2 id="format-variations"><a class="header" href="#format-variations">Format Variations</a></h2>
<h3 id="date-formats"><a class="header" href="#date-formats">Date Formats</a></h3>
<pre><code class="language-yaml">data_quality:
  format_variations:
    date_formats: true
    date_variations:
      iso: 0.6                       # 2024-01-15
      us: 0.2                        # 01/15/2024
      eu: 0.1                        # 15.01.2024
      long: 0.1                      # January 15, 2024
</code></pre>
<p><strong>Examples:</strong></p>
<ul>
<li>ISO: <code>2024-01-15</code></li>
<li>US: <code>01/15/2024</code>, <code>1/15/2024</code></li>
<li>EU: <code>15.01.2024</code>, <code>15/01/2024</code></li>
<li>Long: <code>January 15, 2024</code></li>
</ul>
<h3 id="amount-formats"><a class="header" href="#amount-formats">Amount Formats</a></h3>
<pre><code class="language-yaml">data_quality:
  format_variations:
    amount_formats: true
    amount_variations:
      plain: 0.5                     # 1234.56
      us_comma: 0.3                  # 1,234.56
      eu_format: 0.1                 # 1.234,56
      currency_prefix: 0.05          # $1,234.56
      currency_suffix: 0.05          # 1.234,56 EUR
</code></pre>
<h3 id="identifier-formats"><a class="header" href="#identifier-formats">Identifier Formats</a></h3>
<pre><code class="language-yaml">data_quality:
  format_variations:
    identifier_variations:
      case: 0.1                      # INV-001 vs inv-001
      padding: 0.1                   # 001 vs 1
      separator: 0.1                 # INV-001 vs INV_001 vs INV001
</code></pre>
<h2 id="duplicates"><a class="header" href="#duplicates">Duplicates</a></h2>
<h3 id="duplicate-types"><a class="header" href="#duplicate-types">Duplicate Types</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>exact</code></td><td>Identical records</td></tr>
<tr><td><code>near</code></td><td>Minor field differences</td></tr>
<tr><td><code>fuzzy</code></td><td>Multiple field variations</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-yaml">data_quality:
  duplicates:
    rate: 0.001                      # 0.1% duplicates
    types:
      exact: 0.4                     # 40% exact duplicates
      near: 0.4                      # 40% near duplicates
      fuzzy: 0.2                     # 20% fuzzy duplicates
</code></pre>
<h3 id="near-duplicate-variations"><a class="header" href="#near-duplicate-variations">Near Duplicate Variations</a></h3>
<pre><code class="language-yaml">data_quality:
  duplicates:
    near:
      fields_to_vary: 1              # Change 1 field
      variations:
        - field: posting_date
          offset_days: [-1, 0, 1]
        - field: amount
          variance: 0.001            # 0.1% difference
</code></pre>
<h3 id="fuzzy-duplicate-variations"><a class="header" href="#fuzzy-duplicate-variations">Fuzzy Duplicate Variations</a></h3>
<pre><code class="language-yaml">data_quality:
  duplicates:
    fuzzy:
      fields_to_vary: 3              # Change multiple fields
      include_typos: true
</code></pre>
<h2 id="typos"><a class="header" href="#typos">Typos</a></h2>
<h3 id="typo-types"><a class="header" href="#typo-types">Typo Types</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>Substitution</td><td>Adjacent key pressed</td></tr>
<tr><td>Transposition</td><td>Characters swapped</td></tr>
<tr><td>Insertion</td><td>Extra character</td></tr>
<tr><td>Deletion</td><td>Missing character</td></tr>
<tr><td>OCR errors</td><td>Scan-related (0/O, 1/l)</td></tr>
<tr><td>Homophones</td><td>Sound-alike substitution</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-yaml">data_quality:
  typos:
    rate: 0.005                      # 0.5% of string fields
    keyboard_aware: true             # Use QWERTY layout

    types:
      substitution: 0.35             # Adjacnet → Adjacent
      transposition: 0.25            # Recieve → Receive
      insertion: 0.15                # Shippping → Shipping
      deletion: 0.15                 # Shiping → Shipping
      ocr_errors: 0.05               # O → 0, l → 1
      homophones: 0.05               # their → there
</code></pre>
<h3 id="field-targeting-1"><a class="header" href="#field-targeting-1">Field Targeting</a></h3>
<pre><code class="language-yaml">data_quality:
  typos:
    fields:
      description: 0.02              # More likely in descriptions
      vendor_name: 0.01
      customer_name: 0.01
    exclude:
      - account_number               # Never introduce typos
      - document_id
</code></pre>
<h2 id="encoding-issues"><a class="header" href="#encoding-issues">Encoding Issues</a></h2>
<pre><code class="language-yaml">data_quality:
  encoding:
    enabled: true
    rate: 0.001

    issues:
      mojibake: 0.4                  # UTF-8/Latin-1 confusion
      missing_chars: 0.3             # Characters dropped
      bom_issues: 0.2                # BOM artifacts
      html_entities: 0.1             # &amp;amp; instead of &amp;
</code></pre>
<p><strong>Examples:</strong></p>
<ul>
<li>Mojibake: <code>Müller</code> → <code>MÃ¼ller</code></li>
<li>Missing: <code>Zürich</code> → <code>Zrich</code></li>
<li>HTML: <code>R&amp;D</code> → <code>R&amp;amp;D</code></li>
</ul>
<h2 id="output-1"><a class="header" href="#output-1">Output</a></h2>
<h3 id="quality_issuescsv"><a class="header" href="#quality_issuescsv">quality_issues.csv</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Field</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>document_id</code></td><td>Affected record</td></tr>
<tr><td><code>field_name</code></td><td>Field with issue</td></tr>
<tr><td><code>issue_type</code></td><td>missing, typo, duplicate, etc.</td></tr>
<tr><td><code>original_value</code></td><td>Value before modification</td></tr>
<tr><td><code>modified_value</code></td><td>Value after modification</td></tr>
</tbody>
</table>
</div>
<h2 id="example-configurations"><a class="header" href="#example-configurations">Example Configurations</a></h2>
<h3 id="testing-data-pipelines"><a class="header" href="#testing-data-pipelines">Testing Data Pipelines</a></h3>
<pre><code class="language-yaml">data_quality:
  enabled: true

  missing_values:
    rate: 0.02
    pattern: mcar

  format_variations:
    date_formats: true
    amount_formats: true

  typos:
    rate: 0.01
    keyboard_aware: true
</code></pre>
<h3 id="testing-deduplication"><a class="header" href="#testing-deduplication">Testing Deduplication</a></h3>
<pre><code class="language-yaml">data_quality:
  enabled: true

  duplicates:
    rate: 0.05                       # High duplicate rate
    types:
      exact: 0.3
      near: 0.4
      fuzzy: 0.3
</code></pre>
<h3 id="testing-ocr-processing"><a class="header" href="#testing-ocr-processing">Testing OCR Processing</a></h3>
<pre><code class="language-yaml">data_quality:
  enabled: true

  typos:
    rate: 0.03
    types:
      ocr_errors: 0.8                # Mostly OCR-style errors
      substitution: 0.2
</code></pre>
<h2 id="see-also-37"><a class="header" href="#see-also-37">See Also</a></h2>
<ul>
<li><a href="#anomaly-injection-1">Anomaly Injection</a></li>
<li><a href="#output-formats-1">Output Formats</a></li>
<li><a href="#synth-generators">synth-generators</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="graph-export"><a class="header" href="#graph-export">Graph Export</a></h1>
<p>Export transaction data as ML-ready graphs.</p>
<h2 id="overview-19"><a class="header" href="#overview-19">Overview</a></h2>
<p>Graph export transforms financial data into network representations:</p>
<ul>
<li>Transaction networks (accounts and entities)</li>
<li>Approval networks (users and approvals)</li>
<li>Entity relationship graphs (ownership)</li>
</ul>
<h2 id="configuration-13"><a class="header" href="#configuration-13">Configuration</a></h2>
<pre><code class="language-yaml">graph_export:
  enabled: true

  formats:
    - pytorch_geometric
    - neo4j
    - dgl

  graphs:
    - transaction_network
    - approval_network
    - entity_relationship

  split:
    train: 0.7
    val: 0.15
    test: 0.15
    stratify: is_anomaly

  features:
    temporal: true
    amount: true
    structural: true
    categorical: true
</code></pre>
<h2 id="graph-types-1"><a class="header" href="#graph-types-1">Graph Types</a></h2>
<h3 id="transaction-network-1"><a class="header" href="#transaction-network-1">Transaction Network</a></h3>
<p>Accounts and entities as nodes, transactions as edges.</p>
<pre><code>     ┌──────────┐
     │ Account  │
     │  1100    │
     └────┬─────┘
          │ $1000
          ▼
     ┌──────────┐
     │ Customer │
     │  C-001   │
     └──────────┘
</code></pre>
<p><strong>Nodes:</strong></p>
<ul>
<li>GL accounts</li>
<li>Vendors</li>
<li>Customers</li>
<li>Cost centers</li>
</ul>
<p><strong>Edges:</strong></p>
<ul>
<li>Journal entry lines</li>
<li>Payments</li>
<li>Invoices</li>
</ul>
<h3 id="approval-network-1"><a class="header" href="#approval-network-1">Approval Network</a></h3>
<p>Users as nodes, approval relationships as edges.</p>
<pre><code>     ┌──────────┐
     │  Clerk   │
     │  U-001   │
     └────┬─────┘
          │ approved
          ▼
     ┌──────────┐
     │ Manager  │
     │  U-002   │
     └──────────┘
</code></pre>
<p><strong>Nodes:</strong> Employees/users
<strong>Edges:</strong> Approval actions</p>
<h3 id="entity-relationship-network-1"><a class="header" href="#entity-relationship-network-1">Entity Relationship Network</a></h3>
<p>Legal entities with ownership relationships.</p>
<pre><code>     ┌──────────┐
     │  Parent  │
     │  1000    │
     └────┬─────┘
          │ 100%
          ▼
     ┌──────────┐
     │   Sub    │
     │  2000    │
     └──────────┘
</code></pre>
<p><strong>Nodes:</strong> Companies
<strong>Edges:</strong> Ownership, IC transactions</p>
<h2 id="export-formats-2"><a class="header" href="#export-formats-2">Export Formats</a></h2>
<h3 id="pytorch-geometric-2"><a class="header" href="#pytorch-geometric-2">PyTorch Geometric</a></h3>
<pre><code>output/graphs/transaction_network/pytorch_geometric/
├── node_features.pt    # [num_nodes, num_features]
├── edge_index.pt       # [2, num_edges]
├── edge_attr.pt        # [num_edges, num_edge_features]
├── labels.pt           # Labels
├── train_mask.pt       # Boolean training mask
├── val_mask.pt         # Boolean validation mask
└── test_mask.pt        # Boolean test mask
</code></pre>
<p><strong>Loading in Python:</strong></p>
<pre><code class="language-python">import torch
from torch_geometric.data import Data

# Load tensors
node_features = torch.load('node_features.pt')
edge_index = torch.load('edge_index.pt')
edge_attr = torch.load('edge_attr.pt')
labels = torch.load('labels.pt')
train_mask = torch.load('train_mask.pt')

# Create PyG Data object
data = Data(
    x=node_features,
    edge_index=edge_index,
    edge_attr=edge_attr,
    y=labels,
    train_mask=train_mask,
)

print(f"Nodes: {data.num_nodes}")
print(f"Edges: {data.num_edges}")
</code></pre>
<h3 id="neo4j-2"><a class="header" href="#neo4j-2">Neo4j</a></h3>
<pre><code>output/graphs/transaction_network/neo4j/
├── nodes_account.csv
├── nodes_vendor.csv
├── nodes_customer.csv
├── edges_transaction.csv
├── edges_payment.csv
└── import.cypher
</code></pre>
<p><strong>Import script (import.cypher):</strong></p>
<pre><code class="language-cypher">// Load accounts
LOAD CSV WITH HEADERS FROM 'file:///nodes_account.csv' AS row
CREATE (:Account {
    id: row.id,
    name: row.name,
    type: row.type
});

// Load transactions
LOAD CSV WITH HEADERS FROM 'file:///edges_transaction.csv' AS row
MATCH (from:Account {id: row.from_id})
MATCH (to:Account {id: row.to_id})
CREATE (from)-[:TRANSACTION {
    amount: toFloat(row.amount),
    date: date(row.posting_date),
    is_anomaly: toBoolean(row.is_anomaly)
}]-&gt;(to);
</code></pre>
<h3 id="dgl-deep-graph-library-1"><a class="header" href="#dgl-deep-graph-library-1">DGL (Deep Graph Library)</a></h3>
<pre><code>output/graphs/transaction_network/dgl/
├── graph.bin           # Serialized DGL graph
├── node_feats.npy      # Node features
├── edge_feats.npy      # Edge features
└── labels.npy          # Labels
</code></pre>
<p><strong>Loading in Python:</strong></p>
<pre><code class="language-python">import dgl
import numpy as np

# Load graph
graph = dgl.load_graphs('graph.bin')[0][0]

# Load features
graph.ndata['feat'] = torch.tensor(np.load('node_feats.npy'))
graph.edata['feat'] = torch.tensor(np.load('edge_feats.npy'))
graph.ndata['label'] = torch.tensor(np.load('labels.npy'))
</code></pre>
<h2 id="features-1"><a class="header" href="#features-1">Features</a></h2>
<h3 id="temporal-features"><a class="header" href="#temporal-features">Temporal Features</a></h3>
<pre><code class="language-yaml">features:
  temporal: true
</code></pre>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Feature</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>weekday</code></td><td>Day of week (0-6)</td></tr>
<tr><td><code>period</code></td><td>Fiscal period (1-12)</td></tr>
<tr><td><code>is_month_end</code></td><td>Last 3 days of month</td></tr>
<tr><td><code>is_quarter_end</code></td><td>Last week of quarter</td></tr>
<tr><td><code>is_year_end</code></td><td>Last month of year</td></tr>
<tr><td><code>hour</code></td><td>Hour of posting</td></tr>
</tbody>
</table>
</div>
<h3 id="amount-features"><a class="header" href="#amount-features">Amount Features</a></h3>
<pre><code class="language-yaml">features:
  amount: true
</code></pre>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Feature</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>log_amount</code></td><td>log10(amount)</td></tr>
<tr><td><code>benford_prob</code></td><td>Expected first-digit probability</td></tr>
<tr><td><code>is_round_number</code></td><td>Ends in 00, 000, etc.</td></tr>
<tr><td><code>amount_zscore</code></td><td>Standard deviations from mean</td></tr>
</tbody>
</table>
</div>
<h3 id="structural-features"><a class="header" href="#structural-features">Structural Features</a></h3>
<pre><code class="language-yaml">features:
  structural: true
</code></pre>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Feature</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>line_count</code></td><td>Number of JE lines</td></tr>
<tr><td><code>unique_accounts</code></td><td>Distinct accounts used</td></tr>
<tr><td><code>has_intercompany</code></td><td>IC transaction flag</td></tr>
<tr><td><code>debit_credit_ratio</code></td><td>Total debits / credits</td></tr>
</tbody>
</table>
</div>
<h3 id="categorical-features"><a class="header" href="#categorical-features">Categorical Features</a></h3>
<pre><code class="language-yaml">features:
  categorical: true
</code></pre>
<p>One-hot encoded:</p>
<ul>
<li><code>business_process</code>: Manual, P2P, O2C, etc.</li>
<li><code>source_type</code>: System, User, Recurring</li>
<li><code>account_type</code>: Asset, Liability, etc.</li>
</ul>
<h2 id="trainvaltest-splits"><a class="header" href="#trainvaltest-splits">Train/Val/Test Splits</a></h2>
<pre><code class="language-yaml">split:
  train: 0.7                         # 70% training
  val: 0.15                          # 15% validation
  test: 0.15                         # 15% test
  stratify: is_anomaly               # Maintain anomaly ratio
  random_seed: 42                    # Reproducible splits
</code></pre>
<p><strong>Stratification options:</strong></p>
<ul>
<li><code>is_anomaly</code>: Balanced anomaly detection</li>
<li><code>is_fraud</code>: Balanced fraud detection</li>
<li><code>account_type</code>: Balanced by account type</li>
<li><code>null</code>: Random (no stratification)</li>
</ul>
<h2 id="gnn-training-example"><a class="header" href="#gnn-training-example">GNN Training Example</a></h2>
<pre><code class="language-python">import torch
from torch_geometric.nn import GCNConv

class AnomalyGNN(torch.nn.Module):
    def __init__(self, num_features, hidden_dim):
        super().__init__()
        self.conv1 = GCNConv(num_features, hidden_dim)
        self.conv2 = GCNConv(hidden_dim, 2)  # Binary classification

    def forward(self, data):
        x, edge_index = data.x, data.edge_index
        x = self.conv1(x, edge_index).relu()
        x = self.conv2(x, edge_index)
        return x

# Train
model = AnomalyGNN(data.num_features, 64)
optimizer = torch.optim.Adam(model.parameters(), lr=0.01)

for epoch in range(100):
    model.train()
    optimizer.zero_grad()
    out = model(data)
    loss = F.cross_entropy(out[data.train_mask], data.y[data.train_mask])
    loss.backward()
    optimizer.step()
</code></pre>
<h2 id="see-also-38"><a class="header" href="#see-also-38">See Also</a></h2>
<ul>
<li><a href="#anomaly-injection-1">Anomaly Injection</a></li>
<li><a href="#fraud-detection-ml">Fraud Detection Use Case</a></li>
<li><a href="#synth-graph">synth-graph Crate</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="intercompany-processing"><a class="header" href="#intercompany-processing">Intercompany Processing</a></h1>
<p>Generate matched intercompany transactions and elimination entries.</p>
<h2 id="overview-20"><a class="header" href="#overview-20">Overview</a></h2>
<p>Intercompany features simulate multi-entity corporate structures:</p>
<ul>
<li>IC transaction pairs (seller/buyer)</li>
<li>Transfer pricing</li>
<li>IC reconciliation</li>
<li>Consolidation eliminations</li>
</ul>
<h2 id="prerequisites-5"><a class="header" href="#prerequisites-5">Prerequisites</a></h2>
<p>Multiple companies must be defined:</p>
<pre><code class="language-yaml">companies:
  - code: "1000"
    name: "Parent Company"
    is_parent: true
    volume_weight: 0.5

  - code: "2000"
    name: "Subsidiary"
    parent_code: "1000"
    volume_weight: 0.5
</code></pre>
<h2 id="configuration-14"><a class="header" href="#configuration-14">Configuration</a></h2>
<pre><code class="language-yaml">intercompany:
  enabled: true

  transaction_types:
    goods_sale: 0.4
    service_provided: 0.2
    loan: 0.15
    dividend: 0.1
    management_fee: 0.1
    royalty: 0.05

  transfer_pricing:
    method: cost_plus
    markup_range:
      min: 0.03
      max: 0.10

  elimination:
    enabled: true
    timing: quarterly
</code></pre>
<h2 id="ic-transaction-types"><a class="header" href="#ic-transaction-types">IC Transaction Types</a></h2>
<h3 id="goods-sale"><a class="header" href="#goods-sale">Goods Sale</a></h3>
<p>Internal sale of inventory between entities.</p>
<pre><code>Seller (1000):
    Dr Intercompany Receivable   1,100
        Cr IC Revenue            1,100
    Dr IC COGS                     800
        Cr Inventory               800

Buyer (2000):
    Dr Inventory                 1,100
        Cr Intercompany Payable  1,100
</code></pre>
<h3 id="service-provided"><a class="header" href="#service-provided">Service Provided</a></h3>
<p>Internal services (IT, HR, legal).</p>
<pre><code>Provider (1000):
    Dr IC Receivable               500
        Cr IC Service Revenue      500

Receiver (2000):
    Dr Service Expense             500
        Cr IC Payable              500
</code></pre>
<h3 id="loan"><a class="header" href="#loan">Loan</a></h3>
<p>Intercompany financing.</p>
<pre><code>Lender (1000):
    Dr IC Loan Receivable       10,000
        Cr Cash                 10,000

Borrower (2000):
    Dr Cash                     10,000
        Cr IC Loan Payable      10,000
</code></pre>
<h3 id="dividend"><a class="header" href="#dividend">Dividend</a></h3>
<p>Upstream dividend payment.</p>
<pre><code>Subsidiary (2000):
    Dr Retained Earnings         5,000
        Cr Cash                  5,000

Parent (1000):
    Dr Cash                      5,000
        Cr Dividend Income       5,000
</code></pre>
<h3 id="management-fee"><a class="header" href="#management-fee">Management Fee</a></h3>
<p>Corporate overhead allocation.</p>
<pre><code>Parent (1000):
    Dr IC Receivable             1,000
        Cr Mgmt Fee Revenue      1,000

Subsidiary (2000):
    Dr Mgmt Fee Expense          1,000
        Cr IC Payable            1,000
</code></pre>
<h3 id="royalty"><a class="header" href="#royalty">Royalty</a></h3>
<p>IP licensing fees.</p>
<pre><code>Licensor (1000):
    Dr IC Receivable               750
        Cr Royalty Revenue         750

Licensee (2000):
    Dr Royalty Expense             750
        Cr IC Payable              750
</code></pre>
<h2 id="transfer-pricing"><a class="header" href="#transfer-pricing">Transfer Pricing</a></h2>
<h3 id="methods"><a class="header" href="#methods">Methods</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Method</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>cost_plus</code></td><td>Cost + markup percentage</td></tr>
<tr><td><code>resale_minus</code></td><td>Resale price - margin</td></tr>
<tr><td><code>comparable_uncontrolled</code></td><td>Market price</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-yaml">transfer_pricing:
  method: cost_plus
  markup_range:
    min: 0.03                        # 3% minimum markup
    max: 0.10                        # 10% maximum markup

  # OR for resale minus
  method: resale_minus
  margin_range:
    min: 0.15
    max: 0.25
</code></pre>
<h3 id="arms-length-pricing"><a class="header" href="#arms-length-pricing">Arm’s Length Pricing</a></h3>
<p>Prices generated to be defensible:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn calculate_transfer_price(cost: Decimal, method: &amp;TransferPricingMethod) -&gt; Decimal {
    match method {
        TransferPricingMethod::CostPlus { markup } =&gt; {
            cost * (Decimal::ONE + markup)
        }
        TransferPricingMethod::ResaleMinus { margin, resale_price } =&gt; {
            resale_price * (Decimal::ONE - margin)
        }
        TransferPricingMethod::Comparable { market_price } =&gt; {
            market_price
        }
    }
}
<span class="boring">}</span></code></pre>
<h2 id="ic-matching-1"><a class="header" href="#ic-matching-1">IC Matching</a></h2>
<h3 id="matched-pair-structure"><a class="header" href="#matched-pair-structure">Matched Pair Structure</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct ICMatchedPair {
    pub pair_id: String,
    pub seller_company: String,
    pub buyer_company: String,
    pub seller_entry_id: Uuid,
    pub buyer_entry_id: Uuid,
    pub transaction_type: ICTransactionType,
    pub amount: Decimal,
    pub currency: String,
    pub transaction_date: NaiveDate,
}
<span class="boring">}</span></code></pre>
<h3 id="match-validation"><a class="header" href="#match-validation">Match Validation</a></h3>
<pre><code class="language-yaml">intercompany:
  matching:
    enabled: true
    tolerance: 0.01                  # 1% variance allowed
    mismatch_rate: 0.02              # 2% intentional mismatches
</code></pre>
<p><strong>Match statuses:</strong></p>
<ul>
<li><code>matched</code>: Amounts reconcile</li>
<li><code>timing_difference</code>: Different posting dates</li>
<li><code>fx_difference</code>: Currency conversion variance</li>
<li><code>unmatched</code>: No matching entry</li>
</ul>
<h2 id="eliminations"><a class="header" href="#eliminations">Eliminations</a></h2>
<h3 id="timing"><a class="header" href="#timing">Timing</a></h3>
<pre><code class="language-yaml">intercompany:
  elimination:
    timing: quarterly                # monthly, quarterly, annual
</code></pre>
<h3 id="elimination-types"><a class="header" href="#elimination-types">Elimination Types</a></h3>
<p><strong>Revenue/Expense Elimination:</strong></p>
<pre><code>Elimination entry:
    Dr IC Revenue (1000)           1,100
        Cr IC Expense (2000)       1,100
</code></pre>
<p><strong>Unrealized Profit Elimination:</strong></p>
<pre><code>If buyer still holds inventory:
    Dr IC Revenue                    300
        Cr Inventory                 300
</code></pre>
<p><strong>Receivable/Payable Elimination:</strong></p>
<pre><code>    Dr IC Payable (2000)          10,000
        Cr IC Receivable (1000)   10,000
</code></pre>
<h2 id="output-files-1"><a class="header" href="#output-files-1">Output Files</a></h2>
<h3 id="ic_pairscsv"><a class="header" href="#ic_pairscsv">ic_pairs.csv</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Field</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>pair_id</code></td><td>Unique pair identifier</td></tr>
<tr><td><code>seller_company</code></td><td>Selling entity</td></tr>
<tr><td><code>buyer_company</code></td><td>Buying entity</td></tr>
<tr><td><code>seller_entry_id</code></td><td>Seller’s JE document ID</td></tr>
<tr><td><code>buyer_entry_id</code></td><td>Buyer’s JE document ID</td></tr>
<tr><td><code>transaction_type</code></td><td>Type of IC transaction</td></tr>
<tr><td><code>amount</code></td><td>Transaction amount</td></tr>
<tr><td><code>match_status</code></td><td>Match result</td></tr>
</tbody>
</table>
</div>
<h3 id="eliminationscsv"><a class="header" href="#eliminationscsv">eliminations.csv</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Field</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>elimination_id</code></td><td>Unique ID</td></tr>
<tr><td><code>ic_pair_id</code></td><td>Reference to IC pair</td></tr>
<tr><td><code>elimination_type</code></td><td>Revenue, profit, balance</td></tr>
<tr><td><code>debit_company</code></td><td>Company debited</td></tr>
<tr><td><code>credit_company</code></td><td>Company credited</td></tr>
<tr><td><code>amount</code></td><td>Elimination amount</td></tr>
<tr><td><code>period</code></td><td>Fiscal period</td></tr>
</tbody>
</table>
</div>
<h2 id="example-configuration-1"><a class="header" href="#example-configuration-1">Example Configuration</a></h2>
<h3 id="multi-national-structure"><a class="header" href="#multi-national-structure">Multi-National Structure</a></h3>
<pre><code class="language-yaml">companies:
  - code: "1000"
    name: "US Headquarters"
    currency: USD
    country: US
    is_parent: true
    volume_weight: 0.4

  - code: "2000"
    name: "European Hub"
    currency: EUR
    country: DE
    parent_code: "1000"
    volume_weight: 0.3

  - code: "3000"
    name: "Asia Pacific"
    currency: JPY
    country: JP
    parent_code: "1000"
    volume_weight: 0.3

intercompany:
  enabled: true

  transaction_types:
    goods_sale: 0.5
    service_provided: 0.2
    management_fee: 0.15
    royalty: 0.15

  transfer_pricing:
    method: cost_plus
    markup_range:
      min: 0.05
      max: 0.12

  elimination:
    enabled: true
    timing: quarterly
</code></pre>
<h2 id="see-also-39"><a class="header" href="#see-also-39">See Also</a></h2>
<ul>
<li><a href="#companies-1">Companies Configuration</a></li>
<li><a href="#financial-settings-1">Financial Settings</a></li>
<li><a href="#period-close-engine">Period Close</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="period-close-engine"><a class="header" href="#period-close-engine">Period Close Engine</a></h1>
<p>Generate period-end accounting processes.</p>
<h2 id="overview-21"><a class="header" href="#overview-21">Overview</a></h2>
<p>The period close engine simulates:</p>
<ul>
<li>Monthly close (accruals, depreciation)</li>
<li>Quarterly close (IC elimination, translation)</li>
<li>Annual close (closing entries, retained earnings)</li>
</ul>
<h2 id="configuration-15"><a class="header" href="#configuration-15">Configuration</a></h2>
<pre><code class="language-yaml">period_close:
  enabled: true

  monthly:
    accruals: true
    depreciation: true
    reconciliation: true

  quarterly:
    intercompany_elimination: true
    currency_translation: true

  annual:
    closing_entries: true
    retained_earnings: true
</code></pre>
<h2 id="monthly-close-1"><a class="header" href="#monthly-close-1">Monthly Close</a></h2>
<h3 id="accruals"><a class="header" href="#accruals">Accruals</a></h3>
<p>Generate reversing accrual entries:</p>
<pre><code class="language-yaml">period_close:
  monthly:
    accruals:
      enabled: true
      auto_reverse: true             # Reverse next period

      categories:
        expense_accrual: 0.4
        revenue_accrual: 0.2
        payroll_accrual: 0.3
        other: 0.1
</code></pre>
<p><strong>Expense Accrual:</strong></p>
<pre><code>Period 1 (accrue):
    Dr Expense                     10,000
        Cr Accrued Liabilities     10,000

Period 2 (reverse):
    Dr Accrued Liabilities         10,000
        Cr Expense                 10,000
</code></pre>
<h3 id="depreciation"><a class="header" href="#depreciation">Depreciation</a></h3>
<p>Calculate and post monthly depreciation:</p>
<pre><code class="language-yaml">period_close:
  monthly:
    depreciation:
      enabled: true
      run_date: last_day            # When in period

      methods:
        straight_line: 0.7
        declining_balance: 0.2
        units_of_production: 0.1
</code></pre>
<p><strong>Depreciation Entry:</strong></p>
<pre><code>    Dr Depreciation Expense          5,000
        Cr Accumulated Depreciation  5,000
</code></pre>
<h3 id="subledger-reconciliation"><a class="header" href="#subledger-reconciliation">Subledger Reconciliation</a></h3>
<p>Verify subledger-to-GL control accounts:</p>
<pre><code class="language-yaml">period_close:
  monthly:
    reconciliation:
      enabled: true

      checks:
        - subledger: ar
          control_account: "1100"
        - subledger: ap
          control_account: "2000"
        - subledger: inventory
          control_account: "1200"
</code></pre>
<p><strong>Reconciliation Report:</strong></p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Subledger</th><th>Control Account</th><th>Subledger Balance</th><th>GL Balance</th><th>Difference</th></tr>
</thead>
<tbody>
<tr><td>AR</td><td>1100</td><td>500,000</td><td>500,000</td><td>0</td></tr>
<tr><td>AP</td><td>2000</td><td>(300,000)</td><td>(300,000)</td><td>0</td></tr>
</tbody>
</table>
</div>
<h2 id="quarterly-close-1"><a class="header" href="#quarterly-close-1">Quarterly Close</a></h2>
<h3 id="ic-elimination"><a class="header" href="#ic-elimination">IC Elimination</a></h3>
<p>Generate consolidation eliminations:</p>
<pre><code class="language-yaml">period_close:
  quarterly:
    intercompany_elimination:
      enabled: true

      types:
        - revenue_expense            # Eliminate IC sales
        - unrealized_profit          # Eliminate IC inventory profit
        - receivable_payable         # Eliminate IC balances
        - dividends                  # Eliminate IC dividends
</code></pre>
<p>See <a href="#intercompany-processing">Intercompany Processing</a> for details.</p>
<h3 id="currency-translation-1"><a class="header" href="#currency-translation-1">Currency Translation</a></h3>
<p>Translate foreign subsidiary balances:</p>
<pre><code class="language-yaml">period_close:
  quarterly:
    currency_translation:
      enabled: true
      method: current_rate           # current_rate, temporal

      rate_mapping:
        assets: closing_rate
        liabilities: closing_rate
        equity: historical_rate
        revenue: average_rate
        expense: average_rate

      cta_account: "3500"            # CTA equity account
</code></pre>
<p><strong>Translation Entry (CTA):</strong></p>
<pre><code>If foreign currency strengthened:
    Dr Foreign Subsidiary Investment  10,000
        Cr CTA (Other Comprehensive)  10,000
</code></pre>
<h2 id="annual-close-1"><a class="header" href="#annual-close-1">Annual Close</a></h2>
<h3 id="closing-entries"><a class="header" href="#closing-entries">Closing Entries</a></h3>
<p>Close temporary accounts to retained earnings:</p>
<pre><code class="language-yaml">period_close:
  annual:
    closing_entries:
      enabled: true
      close_revenue: true
      close_expense: true
      income_summary_account: "3900"
</code></pre>
<p><strong>Closing Sequence:</strong></p>
<pre><code>1. Close Revenue:
    Dr Revenue accounts (all)      1,000,000
        Cr Income Summary          1,000,000

2. Close Expenses:
    Dr Income Summary                800,000
        Cr Expense accounts (all)    800,000

3. Close Income Summary:
    Dr Income Summary                200,000
        Cr Retained Earnings         200,000
</code></pre>
<h3 id="retained-earnings"><a class="header" href="#retained-earnings">Retained Earnings</a></h3>
<p>Update retained earnings:</p>
<pre><code class="language-yaml">period_close:
  annual:
    retained_earnings:
      enabled: true
      account: "3100"
      dividend_account: "3150"
</code></pre>
<h3 id="year-end-adjustments"><a class="header" href="#year-end-adjustments">Year-End Adjustments</a></h3>
<p>Additional adjusting entries:</p>
<pre><code class="language-yaml">period_close:
  annual:
    adjustments:
      - type: bad_debt_provision
        rate: 0.02                   # 2% of AR

      - type: inventory_reserve
        rate: 0.01                   # 1% of inventory

      - type: bonus_accrual
        rate: 0.10                   # 10% of salary expense
</code></pre>
<h2 id="output-files-2"><a class="header" href="#output-files-2">Output Files</a></h2>
<h3 id="trial_balancesyyyy_mmcsv-1"><a class="header" href="#trial_balancesyyyy_mmcsv-1">trial_balances/YYYY_MM.csv</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Field</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>account_number</code></td><td>GL account</td></tr>
<tr><td><code>account_name</code></td><td>Account description</td></tr>
<tr><td><code>opening_balance</code></td><td>Period start</td></tr>
<tr><td><code>period_debits</code></td><td>Total debits</td></tr>
<tr><td><code>period_credits</code></td><td>Total credits</td></tr>
<tr><td><code>closing_balance</code></td><td>Period end</td></tr>
</tbody>
</table>
</div>
<h3 id="accrualscsv-1"><a class="header" href="#accrualscsv-1">accruals.csv</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Field</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>accrual_id</code></td><td>Unique ID</td></tr>
<tr><td><code>accrual_type</code></td><td>Category</td></tr>
<tr><td><code>period</code></td><td>Accrual period</td></tr>
<tr><td><code>amount</code></td><td>Accrual amount</td></tr>
<tr><td><code>reversal_period</code></td><td>When reversed</td></tr>
<tr><td><code>entry_id</code></td><td>Related JE ID</td></tr>
</tbody>
</table>
</div>
<h3 id="depreciationcsv-1"><a class="header" href="#depreciationcsv-1">depreciation.csv</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Field</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>asset_id</code></td><td>Fixed asset</td></tr>
<tr><td><code>period</code></td><td>Depreciation period</td></tr>
<tr><td><code>method</code></td><td>Depreciation method</td></tr>
<tr><td><code>depreciation_amount</code></td><td>Period expense</td></tr>
<tr><td><code>accumulated_total</code></td><td>Running total</td></tr>
<tr><td><code>net_book_value</code></td><td>Remaining value</td></tr>
</tbody>
</table>
</div>
<h3 id="closing_entriescsv"><a class="header" href="#closing_entriescsv">closing_entries.csv</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Field</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>entry_id</code></td><td>Closing entry ID</td></tr>
<tr><td><code>entry_type</code></td><td>Revenue, expense, summary</td></tr>
<tr><td><code>account</code></td><td>Account closed</td></tr>
<tr><td><code>amount</code></td><td>Closing amount</td></tr>
<tr><td><code>fiscal_year</code></td><td>Year closed</td></tr>
</tbody>
</table>
</div>
<h2 id="close-schedule"><a class="header" href="#close-schedule">Close Schedule</a></h2>
<pre><code>Month 1-11:
├── Accruals
├── Depreciation
└── Reconciliation

Month 3, 6, 9:
├── IC Elimination
└── Currency Translation

Month 12:
├── All monthly tasks
├── All quarterly tasks
├── Year-end adjustments
└── Closing entries
</code></pre>
<h2 id="example-configuration-2"><a class="header" href="#example-configuration-2">Example Configuration</a></h2>
<h3 id="full-close-cycle"><a class="header" href="#full-close-cycle">Full Close Cycle</a></h3>
<pre><code class="language-yaml">global:
  start_date: 2024-01-01
  period_months: 12

period_close:
  enabled: true

  monthly:
    accruals:
      enabled: true
      auto_reverse: true
    depreciation:
      enabled: true
    reconciliation:
      enabled: true

  quarterly:
    intercompany_elimination:
      enabled: true
    currency_translation:
      enabled: true

  annual:
    closing_entries:
      enabled: true
    retained_earnings:
      enabled: true
    adjustments:
      - type: bad_debt_provision
        rate: 0.02
</code></pre>
<h2 id="see-also-40"><a class="header" href="#see-also-40">See Also</a></h2>
<ul>
<li><a href="#financial-settings-1">Financial Settings</a></li>
<li><a href="#intercompany-processing">Intercompany Processing</a></li>
<li><a href="#synth-generators">synth-generators</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="performance-tuning"><a class="header" href="#performance-tuning">Performance Tuning</a></h1>
<p>Optimize SyntheticData for your hardware and requirements.</p>
<h2 id="performance-characteristics"><a class="header" href="#performance-characteristics">Performance Characteristics</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Metric</th><th>Typical Performance</th></tr>
</thead>
<tbody>
<tr><td>Single-threaded</td><td>~100,000 entries/second</td></tr>
<tr><td>Parallel (8 cores)</td><td>~600,000 entries/second</td></tr>
<tr><td>Memory per 1M entries</td><td>~500 MB</td></tr>
</tbody>
</table>
</div>
<h2 id="configuration-tuning"><a class="header" href="#configuration-tuning">Configuration Tuning</a></h2>
<h3 id="worker-threads"><a class="header" href="#worker-threads">Worker Threads</a></h3>
<pre><code class="language-yaml">global:
  worker_threads: 8                  # Match CPU cores
</code></pre>
<p><strong>Guidelines:</strong></p>
<ul>
<li>Default: Uses all available cores</li>
<li>I/O bound: May benefit from &gt; cores</li>
<li>Memory constrained: Reduce threads</li>
</ul>
<h3 id="memory-limits"><a class="header" href="#memory-limits">Memory Limits</a></h3>
<pre><code class="language-yaml">global:
  memory_limit: 2147483648           # 2 GB
</code></pre>
<p><strong>Guidelines:</strong></p>
<ul>
<li>Set to ~75% of available RAM</li>
<li>Leave room for OS and other processes</li>
<li>Lower limit = more streaming, less memory</li>
</ul>
<h3 id="batch-sizes-1"><a class="header" href="#batch-sizes-1">Batch Sizes</a></h3>
<p>The orchestrator automatically tunes batch sizes, but you can influence behavior:</p>
<pre><code class="language-yaml">transactions:
  target_count: 100000

# Implicit batch sizing based on:
# - Available memory
# - Number of threads
# - Target count
</code></pre>
<h2 id="hardware-recommendations"><a class="header" href="#hardware-recommendations">Hardware Recommendations</a></h2>
<h3 id="minimum"><a class="header" href="#minimum">Minimum</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Resource</th><th>Specification</th></tr>
</thead>
<tbody>
<tr><td>CPU</td><td>2 cores</td></tr>
<tr><td>RAM</td><td>4 GB</td></tr>
<tr><td>Storage</td><td>10 GB</td></tr>
</tbody>
</table>
</div>
<p><strong>Suitable for:</strong> &lt;100K entries, development</p>
<h3 id="recommended"><a class="header" href="#recommended">Recommended</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Resource</th><th>Specification</th></tr>
</thead>
<tbody>
<tr><td>CPU</td><td>8 cores</td></tr>
<tr><td>RAM</td><td>16 GB</td></tr>
<tr><td>Storage</td><td>50 GB SSD</td></tr>
</tbody>
</table>
</div>
<p><strong>Suitable for:</strong> 1M entries, production</p>
<h3 id="high-performance"><a class="header" href="#high-performance">High Performance</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Resource</th><th>Specification</th></tr>
</thead>
<tbody>
<tr><td>CPU</td><td>32+ cores</td></tr>
<tr><td>RAM</td><td>64+ GB</td></tr>
<tr><td>Storage</td><td>NVMe SSD</td></tr>
</tbody>
</table>
</div>
<p><strong>Suitable for:</strong> 10M+ entries, benchmarking</p>
<h2 id="optimizing-generation"><a class="header" href="#optimizing-generation">Optimizing Generation</a></h2>
<h3 id="reduce-memory-pressure"><a class="header" href="#reduce-memory-pressure">Reduce Memory Pressure</a></h3>
<p><strong>Enable streaming output:</strong></p>
<pre><code class="language-yaml">output:
  format: csv
  # Writing as generated reduces memory
</code></pre>
<p><strong>Disable unnecessary features:</strong></p>
<pre><code class="language-yaml">graph_export:
  enabled: false                     # Skip if not needed

anomaly_injection:
  enabled: false                     # Add in post-processing
</code></pre>
<h3 id="optimize-for-speed"><a class="header" href="#optimize-for-speed">Optimize for Speed</a></h3>
<p><strong>Maximize parallelism:</strong></p>
<pre><code class="language-yaml">global:
  worker_threads: 16                 # More threads
</code></pre>
<p><strong>Simplify output:</strong></p>
<pre><code class="language-yaml">output:
  format: csv                        # Faster than JSON
  compression: none                  # Skip compression time
</code></pre>
<p><strong>Reduce complexity:</strong></p>
<pre><code class="language-yaml">chart_of_accounts:
  complexity: small                  # Fewer accounts

document_flows:
  p2p:
    enabled: false                   # Skip if not needed
</code></pre>
<h3 id="optimize-for-size"><a class="header" href="#optimize-for-size">Optimize for Size</a></h3>
<p><strong>Enable compression:</strong></p>
<pre><code class="language-yaml">output:
  compression: zstd
  compression_level: 9               # Maximum compression
</code></pre>
<p><strong>Minimize output files:</strong></p>
<pre><code class="language-yaml">output:
  files:
    journal_entries: true
    acdoca: false
    master_data: false               # Only what you need
</code></pre>
<h2 id="benchmarking-1"><a class="header" href="#benchmarking-1">Benchmarking</a></h2>
<h3 id="built-in-benchmarks"><a class="header" href="#built-in-benchmarks">Built-in Benchmarks</a></h3>
<pre><code class="language-bash"># Run all benchmarks
cargo bench

# Specific benchmark
cargo bench --bench generation_throughput

# With baseline comparison
cargo bench -- --baseline main
</code></pre>
<h3 id="benchmark-categories"><a class="header" href="#benchmark-categories">Benchmark Categories</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Benchmark</th><th>Measures</th></tr>
</thead>
<tbody>
<tr><td><code>generation_throughput</code></td><td>Entries/second</td></tr>
<tr><td><code>distribution_sampling</code></td><td>Distribution speed</td></tr>
<tr><td><code>output_sink</code></td><td>Write performance</td></tr>
<tr><td><code>scalability</code></td><td>Parallel scaling</td></tr>
<tr><td><code>correctness</code></td><td>Validation overhead</td></tr>
</tbody>
</table>
</div>
<h3 id="manual-benchmarking"><a class="header" href="#manual-benchmarking">Manual Benchmarking</a></h3>
<pre><code class="language-bash"># Time generation
time synth-data generate --config config.yaml --output ./output

# Profile memory
/usr/bin/time -v synth-data generate --config config.yaml --output ./output
</code></pre>
<h2 id="profiling"><a class="header" href="#profiling">Profiling</a></h2>
<h3 id="cpu-profiling"><a class="header" href="#cpu-profiling">CPU Profiling</a></h3>
<pre><code class="language-bash"># With perf (Linux)
perf record synth-data generate --config config.yaml --output ./output
perf report

# With Instruments (macOS)
xcrun xctrace record --template "Time Profiler" \
    --launch synth-data generate --config config.yaml --output ./output
</code></pre>
<h3 id="memory-profiling"><a class="header" href="#memory-profiling">Memory Profiling</a></h3>
<pre><code class="language-bash"># With heaptrack (Linux)
heaptrack synth-data generate --config config.yaml --output ./output
heaptrack_print heaptrack.*.gz

# With Instruments (macOS)
xcrun xctrace record --template "Allocations" \
    --launch synth-data generate --config config.yaml --output ./output
</code></pre>
<h2 id="common-bottlenecks"><a class="header" href="#common-bottlenecks">Common Bottlenecks</a></h2>
<h3 id="io-bound"><a class="header" href="#io-bound">I/O Bound</a></h3>
<p><strong>Symptoms:</strong></p>
<ul>
<li>CPU utilization &lt; 100%</li>
<li>Disk utilization high</li>
</ul>
<p><strong>Solutions:</strong></p>
<ul>
<li>Use faster storage (SSD/NVMe)</li>
<li>Enable compression (reduces write volume)</li>
<li>Increase buffer sizes</li>
</ul>
<h3 id="memory-bound"><a class="header" href="#memory-bound">Memory Bound</a></h3>
<p><strong>Symptoms:</strong></p>
<ul>
<li>OOM errors</li>
<li>Excessive swapping</li>
</ul>
<p><strong>Solutions:</strong></p>
<ul>
<li>Reduce <code>target_count</code></li>
<li>Lower <code>memory_limit</code></li>
<li>Enable streaming</li>
<li>Reduce parallel threads</li>
</ul>
<h3 id="cpu-bound"><a class="header" href="#cpu-bound">CPU Bound</a></h3>
<p><strong>Symptoms:</strong></p>
<ul>
<li>CPU at 100%</li>
<li>Generation time scales linearly</li>
</ul>
<p><strong>Solutions:</strong></p>
<ul>
<li>Add more cores</li>
<li>Simplify configuration</li>
<li>Disable unnecessary features</li>
</ul>
<h2 id="scaling-guidelines"><a class="header" href="#scaling-guidelines">Scaling Guidelines</a></h2>
<h3 id="entries-vs-time"><a class="header" href="#entries-vs-time">Entries vs Time</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Entries</th><th>~Time (8 cores)</th></tr>
</thead>
<tbody>
<tr><td>10,000</td><td>&lt;1 second</td></tr>
<tr><td>100,000</td><td>~2 seconds</td></tr>
<tr><td>1,000,000</td><td>~20 seconds</td></tr>
<tr><td>10,000,000</td><td>~3 minutes</td></tr>
</tbody>
</table>
</div>
<h3 id="entries-vs-memory"><a class="header" href="#entries-vs-memory">Entries vs Memory</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Entries</th><th>Peak Memory</th></tr>
</thead>
<tbody>
<tr><td>10,000</td><td>~50 MB</td></tr>
<tr><td>100,000</td><td>~200 MB</td></tr>
<tr><td>1,000,000</td><td>~1.5 GB</td></tr>
<tr><td>10,000,000</td><td>~12 GB</td></tr>
</tbody>
</table>
</div>
<p><em>Memory estimates include full in-memory processing. Streaming reduces by ~80%.</em></p>
<h2 id="server-performance"><a class="header" href="#server-performance">Server Performance</a></h2>
<h3 id="rate-limiting-2"><a class="header" href="#rate-limiting-2">Rate Limiting</a></h3>
<pre><code class="language-bash">cargo run -p synth-server -- \
    --port 3000 \
    --rate-limit 1000              # Requests per minute
</code></pre>
<h3 id="connection-pooling"><a class="header" href="#connection-pooling">Connection Pooling</a></h3>
<p>For high-concurrency scenarios, configure worker threads:</p>
<pre><code class="language-bash">cargo run -p synth-server -- \
    --worker-threads 16            # Handle more connections
</code></pre>
<h3 id="websocket-optimization"><a class="header" href="#websocket-optimization">WebSocket Optimization</a></h3>
<pre><code class="language-yaml"># Client-side: batch messages
const BATCH_SIZE = 100;  // Request 100 entries at a time
</code></pre>
<h2 id="see-also-41"><a class="header" href="#see-also-41">See Also</a></h2>
<ul>
<li><a href="#memory-management-1">Memory Management</a></li>
<li><a href="#cli-reference">CLI Reference</a></li>
<li><a href="#server-api">Server API</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="use-cases-1"><a class="header" href="#use-cases-1">Use Cases</a></h1>
<p>Real-world applications for SyntheticData.</p>
<h2 id="overview-22"><a class="header" href="#overview-22">Overview</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Use Case</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><a href="#fraud-detection-ml">Fraud Detection ML</a></td><td>Train supervised fraud models</td></tr>
<tr><td><a href="#audit-analytics-1">Audit Analytics</a></td><td>Test audit procedures</td></tr>
<tr><td><a href="#sox-compliance-testing">SOX Compliance</a></td><td>Test control monitoring</td></tr>
<tr><td><a href="#process-mining-1">Process Mining</a></td><td>Generate OCEL 2.0 event logs</td></tr>
<tr><td><a href="#erp-load-testing">ERP Load Testing</a></td><td>Load and stress testing</td></tr>
</tbody>
</table>
</div>
<h2 id="use-case-summary"><a class="header" href="#use-case-summary">Use Case Summary</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Use Case</th><th>Key Features</th><th>Output Focus</th></tr>
</thead>
<tbody>
<tr><td>Fraud Detection</td><td>Anomaly injection, graph export</td><td>Labels, graphs</td></tr>
<tr><td>Audit Analytics</td><td>Full document flows, controls</td><td>Transactions, controls</td></tr>
<tr><td>SOX Compliance</td><td>SoD rules, approval workflows</td><td>Controls, violations</td></tr>
<tr><td>Process Mining</td><td>OCEL 2.0 export</td><td>Event logs</td></tr>
<tr><td>ERP Testing</td><td>High volume, realistic patterns</td><td>Raw transactions</td></tr>
</tbody>
</table>
</div>
<h2 id="quick-configuration"><a class="header" href="#quick-configuration">Quick Configuration</a></h2>
<h3 id="fraud-detection"><a class="header" href="#fraud-detection">Fraud Detection</a></h3>
<pre><code class="language-yaml">anomaly_injection:
  enabled: true
  total_rate: 0.02
  generate_labels: true

graph_export:
  enabled: true
  formats:
    - pytorch_geometric
</code></pre>
<h3 id="audit-analytics"><a class="header" href="#audit-analytics">Audit Analytics</a></h3>
<pre><code class="language-yaml">document_flows:
  p2p:
    enabled: true
  o2c:
    enabled: true

internal_controls:
  enabled: true
</code></pre>
<h3 id="sox-compliance"><a class="header" href="#sox-compliance">SOX Compliance</a></h3>
<pre><code class="language-yaml">internal_controls:
  enabled: true
  sod_rules: [...]

approval:
  enabled: true
</code></pre>
<h3 id="process-mining"><a class="header" href="#process-mining">Process Mining</a></h3>
<pre><code class="language-yaml">document_flows:
  p2p:
    enabled: true
  o2c:
    enabled: true

# Use synth-ocpm for OCEL 2.0 export
</code></pre>
<h3 id="erp-testing"><a class="header" href="#erp-testing">ERP Testing</a></h3>
<pre><code class="language-yaml">transactions:
  target_count: 1000000

output:
  format: csv
</code></pre>
<h2 id="selecting-a-use-case"><a class="header" href="#selecting-a-use-case">Selecting a Use Case</a></h2>
<p><strong>Choose Fraud Detection if:</strong></p>
<ul>
<li>Training ML/AI models</li>
<li>Building anomaly detection systems</li>
<li>Need labeled datasets</li>
</ul>
<p><strong>Choose Audit Analytics if:</strong></p>
<ul>
<li>Testing audit software</li>
<li>Validating analytical procedures</li>
<li>Need complete document trails</li>
</ul>
<p><strong>Choose SOX Compliance if:</strong></p>
<ul>
<li>Testing control monitoring systems</li>
<li>Validating SoD enforcement</li>
<li>Need control test data</li>
</ul>
<p><strong>Choose Process Mining if:</strong></p>
<ul>
<li>Using PM4Py, Celonis, or similar tools</li>
<li>Need OCEL 2.0 compliant logs</li>
<li>Analyzing business processes</li>
</ul>
<p><strong>Choose ERP Testing if:</strong></p>
<ul>
<li>Load testing financial systems</li>
<li>Performance benchmarking</li>
<li>Need high-volume realistic data</li>
</ul>
<h2 id="combining-use-cases"><a class="header" href="#combining-use-cases">Combining Use Cases</a></h2>
<p>Use cases can be combined:</p>
<pre><code class="language-yaml"># Fraud detection + audit analytics
anomaly_injection:
  enabled: true
  total_rate: 0.02
  generate_labels: true

document_flows:
  p2p:
    enabled: true
  o2c:
    enabled: true

internal_controls:
  enabled: true

graph_export:
  enabled: true
</code></pre>
<h2 id="see-also-42"><a class="header" href="#see-also-42">See Also</a></h2>
<ul>
<li><a href="configuration/README.html">Configuration</a></li>
<li><a href="advanced/README.html">Advanced Topics</a></li>
<li><a href="getting-started/README.html">Getting Started</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="fraud-detection-ml"><a class="header" href="#fraud-detection-ml">Fraud Detection ML</a></h1>
<p>Train machine learning models for financial fraud detection.</p>
<h2 id="overview-23"><a class="header" href="#overview-23">Overview</a></h2>
<p>SyntheticData generates labeled datasets for supervised fraud detection:</p>
<ul>
<li>20+ fraud patterns with full labels</li>
<li>Graph representations for GNN models</li>
<li>Realistic data distributions</li>
<li>Configurable fraud rates and types</li>
</ul>
<h2 id="configuration-16"><a class="header" href="#configuration-16">Configuration</a></h2>
<pre><code class="language-yaml">global:
  seed: 42
  industry: financial_services
  start_date: 2024-01-01
  period_months: 12

transactions:
  target_count: 100000

fraud:
  enabled: true
  fraud_rate: 0.02                   # 2% fraud rate

  types:
    split_transaction: 0.20
    duplicate_payment: 0.15
    fictitious_transaction: 0.15
    ghost_employee: 0.10
    kickback_scheme: 0.10
    revenue_manipulation: 0.10
    expense_capitalization: 0.10
    unauthorized_discount: 0.10

anomaly_injection:
  enabled: true
  total_rate: 0.02
  generate_labels: true

  categories:
    fraud: 1.0                       # Focus on fraud only

graph_export:
  enabled: true
  formats:
    - pytorch_geometric

  split:
    train: 0.7
    val: 0.15
    test: 0.15
    stratify: is_fraud

output:
  format: csv
</code></pre>
<h2 id="output-files-3"><a class="header" href="#output-files-3">Output Files</a></h2>
<h3 id="tabular-data"><a class="header" href="#tabular-data">Tabular Data</a></h3>
<pre><code>output/
├── transactions/
│   └── journal_entries.csv
├── labels/
│   ├── anomaly_labels.csv
│   └── fraud_labels.csv
└── master_data/
    └── ...
</code></pre>
<h3 id="graph-data"><a class="header" href="#graph-data">Graph Data</a></h3>
<pre><code>output/graphs/transaction_network/pytorch_geometric/
├── node_features.pt
├── edge_index.pt
├── edge_attr.pt
├── labels.pt
├── train_mask.pt
├── val_mask.pt
└── test_mask.pt
</code></pre>
<h2 id="ml-pipeline"><a class="header" href="#ml-pipeline">ML Pipeline</a></h2>
<h3 id="1-load-data"><a class="header" href="#1-load-data">1. Load Data</a></h3>
<pre><code class="language-python">import pandas as pd
import torch

# Load tabular data
entries = pd.read_csv('output/transactions/journal_entries.csv')
labels = pd.read_csv('output/labels/fraud_labels.csv')

# Merge
data = entries.merge(labels, on='document_id', how='left')
data['is_fraud'] = data['fraud_type'].notna()

print(f"Total entries: {len(data)}")
print(f"Fraud entries: {data['is_fraud'].sum()}")
print(f"Fraud rate: {data['is_fraud'].mean():.2%}")
</code></pre>
<h3 id="2-feature-engineering"><a class="header" href="#2-feature-engineering">2. Feature Engineering</a></h3>
<pre><code class="language-python">from sklearn.preprocessing import StandardScaler, OneHotEncoder

# Numerical features
numerical_features = [
    'debit_amount', 'credit_amount', 'line_count'
]

# Derived features
data['log_amount'] = np.log1p(data['debit_amount'] + data['credit_amount'])
data['is_round'] = (data['debit_amount'] % 100 == 0).astype(int)
data['is_weekend'] = pd.to_datetime(data['posting_date']).dt.dayofweek &gt;= 5
data['is_month_end'] = pd.to_datetime(data['posting_date']).dt.day &gt;= 28

# Categorical features
categorical_features = ['source', 'business_process', 'company_code']
</code></pre>
<h3 id="3-train-model-tabular"><a class="header" href="#3-train-model-tabular">3. Train Model (Tabular)</a></h3>
<pre><code class="language-python">from sklearn.ensemble import RandomForestClassifier
from sklearn.model_selection import train_test_split
from sklearn.metrics import classification_report, roc_auc_score

# Prepare features
X = data[numerical_features + derived_features]
y = data['is_fraud']

# Split
X_train, X_test, y_train, y_test = train_test_split(
    X, y, test_size=0.2, stratify=y, random_state=42
)

# Train
model = RandomForestClassifier(n_estimators=100, random_state=42)
model.fit(X_train, y_train)

# Evaluate
y_pred = model.predict(X_test)
y_prob = model.predict_proba(X_test)[:, 1]

print(classification_report(y_test, y_pred))
print(f"ROC-AUC: {roc_auc_score(y_test, y_prob):.4f}")
</code></pre>
<h3 id="4-train-gnn-model"><a class="header" href="#4-train-gnn-model">4. Train GNN Model</a></h3>
<pre><code class="language-python">import torch
import torch.nn.functional as F
from torch_geometric.nn import GCNConv
from torch_geometric.data import Data

# Load graph data
node_features = torch.load('output/graphs/.../node_features.pt')
edge_index = torch.load('output/graphs/.../edge_index.pt')
labels = torch.load('output/graphs/.../labels.pt')
train_mask = torch.load('output/graphs/.../train_mask.pt')
val_mask = torch.load('output/graphs/.../val_mask.pt')
test_mask = torch.load('output/graphs/.../test_mask.pt')

data = Data(
    x=node_features,
    edge_index=edge_index,
    y=labels,
    train_mask=train_mask,
    val_mask=val_mask,
    test_mask=test_mask,
)

# Define GNN
class FraudGNN(torch.nn.Module):
    def __init__(self, num_features, hidden_channels):
        super().__init__()
        self.conv1 = GCNConv(num_features, hidden_channels)
        self.conv2 = GCNConv(hidden_channels, hidden_channels)
        self.linear = torch.nn.Linear(hidden_channels, 2)

    def forward(self, x, edge_index):
        x = self.conv1(x, edge_index).relu()
        x = F.dropout(x, p=0.5, training=self.training)
        x = self.conv2(x, edge_index).relu()
        x = self.linear(x)
        return x

# Train
model = FraudGNN(data.num_features, 64)
optimizer = torch.optim.Adam(model.parameters(), lr=0.01)

for epoch in range(200):
    model.train()
    optimizer.zero_grad()
    out = model(data.x, data.edge_index)
    loss = F.cross_entropy(out[data.train_mask], data.y[data.train_mask])
    loss.backward()
    optimizer.step()

    # Validation
    if epoch % 10 == 0:
        model.eval()
        pred = out.argmax(dim=1)
        val_acc = (pred[data.val_mask] == data.y[data.val_mask]).float().mean()
        print(f'Epoch {epoch}: Val Acc: {val_acc:.4f}')
</code></pre>
<h2 id="fraud-types-for-training"><a class="header" href="#fraud-types-for-training">Fraud Types for Training</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Type</th><th>Detection Approach</th><th>Difficulty</th></tr>
</thead>
<tbody>
<tr><td>Split Transaction</td><td>Amount patterns</td><td>Easy</td></tr>
<tr><td>Duplicate Payment</td><td>Similarity matching</td><td>Easy</td></tr>
<tr><td>Fictitious Transaction</td><td>Anomaly detection</td><td>Medium</td></tr>
<tr><td>Ghost Employee</td><td>Entity verification</td><td>Medium</td></tr>
<tr><td>Kickback Scheme</td><td>Relationship analysis</td><td>Hard</td></tr>
<tr><td>Revenue Manipulation</td><td>Trend analysis</td><td>Hard</td></tr>
</tbody>
</table>
</div>
<h2 id="best-practices"><a class="header" href="#best-practices">Best Practices</a></h2>
<h3 id="class-imbalance"><a class="header" href="#class-imbalance">Class Imbalance</a></h3>
<pre><code class="language-python">from imblearn.over_sampling import SMOTE

# Handle imbalanced classes
smote = SMOTE(random_state=42)
X_resampled, y_resampled = smote.fit_resample(X_train, y_train)
</code></pre>
<h3 id="threshold-tuning"><a class="header" href="#threshold-tuning">Threshold Tuning</a></h3>
<pre><code class="language-python">from sklearn.metrics import precision_recall_curve

# Find optimal threshold
precision, recall, thresholds = precision_recall_curve(y_test, y_prob)
f1_scores = 2 * precision * recall / (precision + recall)
optimal_idx = f1_scores.argmax()
optimal_threshold = thresholds[optimal_idx]
</code></pre>
<h3 id="cross-validation"><a class="header" href="#cross-validation">Cross-Validation</a></h3>
<pre><code class="language-python">from sklearn.model_selection import StratifiedKFold

cv = StratifiedKFold(n_splits=5, shuffle=True, random_state=42)
scores = cross_val_score(model, X, y, cv=cv, scoring='roc_auc')
print(f"CV ROC-AUC: {scores.mean():.4f} (+/- {scores.std():.4f})")
</code></pre>
<h2 id="see-also-43"><a class="header" href="#see-also-43">See Also</a></h2>
<ul>
<li><a href="#anomaly-injection-1">Anomaly Injection</a></li>
<li><a href="#graph-export">Graph Export</a></li>
<li><a href="#compliance-1">Configuration - Compliance</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="audit-analytics-1"><a class="header" href="#audit-analytics-1">Audit Analytics</a></h1>
<p>Test audit procedures and analytical tools with realistic data.</p>
<h2 id="overview-24"><a class="header" href="#overview-24">Overview</a></h2>
<p>SyntheticData generates comprehensive datasets for audit analytics:</p>
<ul>
<li>Complete document trails</li>
<li>Known control exceptions</li>
<li>Benford’s Law compliant amounts</li>
<li>Realistic temporal patterns</li>
</ul>
<h2 id="configuration-17"><a class="header" href="#configuration-17">Configuration</a></h2>
<pre><code class="language-yaml">global:
  seed: 42
  industry: manufacturing
  start_date: 2024-01-01
  period_months: 12

transactions:
  target_count: 100000

  benford:
    enabled: true                    # Realistic first-digit distribution

  temporal:
    month_end_spike: 2.5
    quarter_end_spike: 3.0
    year_end_spike: 4.0

document_flows:
  p2p:
    enabled: true
    flow_rate: 0.35
    three_way_match:
      quantity_tolerance: 0.02
      price_tolerance: 0.01
  o2c:
    enabled: true
    flow_rate: 0.35

master_data:
  vendors:
    count: 200
  customers:
    count: 500

internal_controls:
  enabled: true

anomaly_injection:
  enabled: true
  total_rate: 0.03
  generate_labels: true

  categories:
    fraud: 0.20
    error: 0.50
    process_issue: 0.30

output:
  format: csv
</code></pre>
<h2 id="audit-procedures"><a class="header" href="#audit-procedures">Audit Procedures</a></h2>
<h3 id="1-benfords-law-analysis"><a class="header" href="#1-benfords-law-analysis">1. Benford’s Law Analysis</a></h3>
<p>Test first-digit distribution of amounts:</p>
<pre><code class="language-python">import pandas as pd
import numpy as np
from scipy import stats

# Load data
entries = pd.read_csv('output/transactions/journal_entries.csv')

# Extract first digits
amounts = entries['debit_amount'] + entries['credit_amount']
amounts = amounts[amounts &gt; 0]
first_digits = amounts.apply(lambda x: int(str(x)[0]))

# Calculate observed distribution
observed = first_digits.value_counts().sort_index()
observed_freq = observed / observed.sum()

# Expected Benford distribution
benford = {d: np.log10(1 + 1/d) for d in range(1, 10)}

# Chi-square test
chi_stat, p_value = stats.chisquare(
    observed.values,
    [benford[d] * observed.sum() for d in range(1, 10)]
)

print(f"Chi-square: {chi_stat:.2f}, p-value: {p_value:.4f}")
</code></pre>
<h3 id="2-three-way-match-testing"><a class="header" href="#2-three-way-match-testing">2. Three-Way Match Testing</a></h3>
<p>Verify PO, GR, and Invoice alignment:</p>
<pre><code class="language-python"># Load documents
po = pd.read_csv('output/documents/purchase_orders.csv')
gr = pd.read_csv('output/documents/goods_receipts.csv')
inv = pd.read_csv('output/documents/vendor_invoices.csv')

# Join on references
matched = po.merge(gr, left_on='po_number', right_on='po_reference')
matched = matched.merge(inv, left_on='po_number', right_on='po_reference')

# Calculate variances
matched['qty_variance'] = abs(matched['gr_quantity'] - matched['po_quantity']) / matched['po_quantity']
matched['price_variance'] = abs(matched['inv_unit_price'] - matched['po_unit_price']) / matched['po_unit_price']

# Identify exceptions
qty_exceptions = matched[matched['qty_variance'] &gt; 0.02]
price_exceptions = matched[matched['price_variance'] &gt; 0.01]

print(f"Quantity exceptions: {len(qty_exceptions)}")
print(f"Price exceptions: {len(price_exceptions)}")
</code></pre>
<h3 id="3-duplicate-payment-detection"><a class="header" href="#3-duplicate-payment-detection">3. Duplicate Payment Detection</a></h3>
<p>Find potential duplicate payments:</p>
<pre><code class="language-python"># Load payments and invoices
payments = pd.read_csv('output/documents/payments.csv')
invoices = pd.read_csv('output/documents/vendor_invoices.csv')

# Group by vendor and amount
potential_dups = invoices.groupby(['vendor_id', 'total_amount']).filter(
    lambda x: len(x) &gt; 1
)

# Check payment dates
duplicates = []
for (vendor, amount), group in potential_dups.groupby(['vendor_id', 'total_amount']):
    if len(group) &gt; 1:
        duplicates.append({
            'vendor': vendor,
            'amount': amount,
            'count': len(group),
            'invoices': group['invoice_number'].tolist()
        })

print(f"Potential duplicate payments: {len(duplicates)}")
</code></pre>
<h3 id="4-journal-entry-testing"><a class="header" href="#4-journal-entry-testing">4. Journal Entry Testing</a></h3>
<p>Analyze manual journal entries:</p>
<pre><code class="language-python"># Load entries
entries = pd.read_csv('output/transactions/journal_entries.csv')

# Filter manual entries
manual = entries[entries['source'] == 'Manual']

# Analyze characteristics
print(f"Manual entries: {len(manual)}")
print(f"Weekend entries: {manual['is_weekend'].sum()}")
print(f"Month-end entries: {manual['is_month_end'].sum()}")

# Top accounts with manual entries
top_accounts = manual.groupby('account_number').size().sort_values(ascending=False).head(10)
</code></pre>
<h3 id="5-cutoff-testing"><a class="header" href="#5-cutoff-testing">5. Cutoff Testing</a></h3>
<p>Verify transactions recorded in correct period:</p>
<pre><code class="language-python"># Identify late postings
entries['posting_date'] = pd.to_datetime(entries['posting_date'])
entries['document_date'] = pd.to_datetime(entries['document_date'])
entries['posting_lag'] = (entries['posting_date'] - entries['document_date']).dt.days

# Find entries posted after period end
late_postings = entries[entries['posting_lag'] &gt; 5]
print(f"Late postings: {len(late_postings)}")

# Check year-end cutoff
year_end = entries['posting_date'].dt.year.max()
cutoff_issues = entries[
    (entries['document_date'].dt.year &lt; year_end) &amp;
    (entries['posting_date'].dt.year == year_end + 1)
]
</code></pre>
<h3 id="6-segregation-of-duties"><a class="header" href="#6-segregation-of-duties">6. Segregation of Duties</a></h3>
<p>Check for SoD violations:</p>
<pre><code class="language-python"># Load controls data
sod_rules = pd.read_csv('output/controls/sod_rules.csv')
entries = pd.read_csv('output/transactions/journal_entries.csv')

# Find entries with SoD violations
violations = entries[entries['sod_violation'] == True]
print(f"SoD violations: {len(violations)}")

# Analyze by conflict type
violation_types = violations.groupby('sod_conflict_type').size()
</code></pre>
<h2 id="audit-analytics-dashboard"><a class="header" href="#audit-analytics-dashboard">Audit Analytics Dashboard</a></h2>
<h3 id="key-metrics"><a class="header" href="#key-metrics">Key Metrics</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Metric</th><th>Query</th><th>Expected</th></tr>
</thead>
<tbody>
<tr><td>Benford Chi-square</td><td>First-digit test</td><td>&lt; 15.51 (p &gt; 0.05)</td></tr>
<tr><td>Match exceptions</td><td>Three-way match</td><td>&lt; 2%</td></tr>
<tr><td>Duplicate indicators</td><td>Amount/vendor matching</td><td>&lt; 0.5%</td></tr>
<tr><td>Late postings</td><td>Document vs posting date</td><td>&lt; 1%</td></tr>
<tr><td>SoD violations</td><td>Control violations</td><td>Known from labels</td></tr>
</tbody>
</table>
</div>
<h3 id="population-statistics"><a class="header" href="#population-statistics">Population Statistics</a></h3>
<pre><code class="language-python"># Summary statistics
print("=== Audit Population Summary ===")
print(f"Total transactions: {len(entries):,}")
print(f"Total amount: ${entries['debit_amount'].sum():,.2f}")
print(f"Unique vendors: {entries['vendor_id'].nunique()}")
print(f"Unique customers: {entries['customer_id'].nunique()}")
print(f"Date range: {entries['posting_date'].min()} to {entries['posting_date'].max()}")
</code></pre>
<h2 id="sampling"><a class="header" href="#sampling">Sampling</a></h2>
<h3 id="statistical-sampling"><a class="header" href="#statistical-sampling">Statistical Sampling</a></h3>
<pre><code class="language-python">from scipy import stats

# Calculate sample size for attribute testing
population_size = len(entries)
confidence_level = 0.95
tolerable_error_rate = 0.05
expected_error_rate = 0.01

# Sample size formula
z_score = stats.norm.ppf(1 - (1 - confidence_level) / 2)
sample_size = int(
    (z_score ** 2 * expected_error_rate * (1 - expected_error_rate)) /
    (tolerable_error_rate ** 2)
)

print(f"Recommended sample size: {sample_size}")

# Random sample
sample = entries.sample(n=sample_size, random_state=42)
</code></pre>
<h3 id="stratified-sampling"><a class="header" href="#stratified-sampling">Stratified Sampling</a></h3>
<pre><code class="language-python"># Stratify by amount
entries['amount_stratum'] = pd.qcut(
    entries['debit_amount'] + entries['credit_amount'],
    q=5,
    labels=['Very Low', 'Low', 'Medium', 'High', 'Very High']
)

# Sample from each stratum
stratified_sample = entries.groupby('amount_stratum').apply(
    lambda x: x.sample(n=min(100, len(x)), random_state=42)
)
</code></pre>
<h2 id="see-also-44"><a class="header" href="#see-also-44">See Also</a></h2>
<ul>
<li><a href="#anomaly-injection-1">Anomaly Injection</a></li>
<li><a href="#document-flows-1">Document Flows</a></li>
<li><a href="#sox-compliance-testing">SOX Compliance</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="sox-compliance-testing"><a class="header" href="#sox-compliance-testing">SOX Compliance Testing</a></h1>
<p>Test internal control monitoring systems.</p>
<h2 id="overview-25"><a class="header" href="#overview-25">Overview</a></h2>
<p>SyntheticData generates data for SOX 404 compliance testing:</p>
<ul>
<li>Internal control definitions</li>
<li>Control test evidence</li>
<li>Segregation of Duties violations</li>
<li>Approval workflow data</li>
</ul>
<h2 id="configuration-18"><a class="header" href="#configuration-18">Configuration</a></h2>
<pre><code class="language-yaml">global:
  seed: 42
  industry: financial_services
  start_date: 2024-01-01
  period_months: 12

transactions:
  target_count: 50000

internal_controls:
  enabled: true

  controls:
    - id: "CTL-001"
      name: "Payment Authorization"
      type: preventive
      frequency: continuous
      threshold: 10000
      assertions: [authorization, validity]

    - id: "CTL-002"
      name: "Journal Entry Review"
      type: detective
      frequency: daily
      assertions: [accuracy, completeness]

    - id: "CTL-003"
      name: "Bank Reconciliation"
      type: detective
      frequency: monthly
      assertions: [existence, completeness]

  sod_rules:
    - conflict_type: create_approve
      processes: [ap_invoice, ap_payment]
      description: "Cannot create and approve payments"

    - conflict_type: create_approve
      processes: [ar_invoice, ar_receipt]
      description: "Cannot create and approve receipts"

    - conflict_type: custody_recording
      processes: [cash_handling, cash_recording]
      description: "Cannot handle and record cash"

approval:
  enabled: true
  thresholds:
    - level: 1
      max_amount: 5000
    - level: 2
      max_amount: 25000
    - level: 3
      max_amount: 100000
    - level: 4
      max_amount: null

fraud:
  enabled: true
  fraud_rate: 0.005

  types:
    skipped_approval: 0.30
    threshold_manipulation: 0.30
    unauthorized_discount: 0.20
    duplicate_payment: 0.20

output:
  format: csv
</code></pre>
<h2 id="control-testing"><a class="header" href="#control-testing">Control Testing</a></h2>
<h3 id="1-control-evidence"><a class="header" href="#1-control-evidence">1. Control Evidence</a></h3>
<pre><code class="language-python">import pandas as pd

# Load control data
controls = pd.read_csv('output/controls/internal_controls.csv')
mappings = pd.read_csv('output/controls/control_account_mappings.csv')
entries = pd.read_csv('output/transactions/journal_entries.csv')

# Identify entries subject to each control
for _, control in controls.iterrows():
    control_id = control['control_id']
    threshold = control['threshold']

    # Filter entries in scope
    if pd.notna(threshold):
        in_scope = entries[
            (entries['control_ids'].str.contains(control_id)) &amp;
            (entries['debit_amount'] &gt;= threshold)
        ]
    else:
        in_scope = entries[entries['control_ids'].str.contains(control_id)]

    print(f"{control['name']}: {len(in_scope)} entries in scope")
</code></pre>
<h3 id="2-approval-testing"><a class="header" href="#2-approval-testing">2. Approval Testing</a></h3>
<pre><code class="language-python"># Load entries with approval data
entries = pd.read_csv('output/transactions/journal_entries.csv')

# Test approval compliance
approval_required = entries[entries['debit_amount'] &gt;= 5000]
approved = approval_required[approval_required['approved_by'].notna()]
not_approved = approval_required[approval_required['approved_by'].isna()]

print(f"Requiring approval: {len(approval_required)}")
print(f"Properly approved: {len(approved)}")
print(f"Missing approval: {len(not_approved)}")

# Test approval levels
def check_approval_level(row):
    amount = row['debit_amount']
    if amount &gt;= 100000:
        return row['approval_level'] &gt;= 4
    elif amount &gt;= 25000:
        return row['approval_level'] &gt;= 3
    elif amount &gt;= 5000:
        return row['approval_level'] &gt;= 2
    return True

entries['approval_adequate'] = entries.apply(check_approval_level, axis=1)
inadequate = entries[~entries['approval_adequate']]
print(f"Inadequate approval level: {len(inadequate)}")
</code></pre>
<h3 id="3-segregation-of-duties"><a class="header" href="#3-segregation-of-duties">3. Segregation of Duties</a></h3>
<pre><code class="language-python"># Load SoD data
sod_rules = pd.read_csv('output/controls/sod_rules.csv')
entries = pd.read_csv('output/transactions/journal_entries.csv')

# Identify violations
violations = entries[entries['sod_violation'] == True]
print(f"Total SoD violations: {len(violations)}")

# Analyze by type
violation_summary = violations.groupby('sod_conflict_type').agg({
    'document_id': 'count',
    'debit_amount': 'sum'
}).rename(columns={'document_id': 'count', 'debit_amount': 'total_amount'})

print("\nViolations by type:")
print(violation_summary)

# Analyze by user
user_violations = violations.groupby('created_by').size().sort_values(ascending=False)
print("\nTop violators:")
print(user_violations.head(10))
</code></pre>
<h3 id="4-threshold-manipulation"><a class="header" href="#4-threshold-manipulation">4. Threshold Manipulation</a></h3>
<pre><code class="language-python"># Detect threshold-adjacent transactions
approval_threshold = 10000

entries['near_threshold'] = (
    (entries['debit_amount'] &gt;= approval_threshold * 0.9) &amp;
    (entries['debit_amount'] &lt; approval_threshold)
)

near_threshold = entries[entries['near_threshold']]
print(f"Near-threshold entries: {len(near_threshold)}")

# Statistical analysis
expected_near = len(entries) * 0.10  # 10% would be in this range randomly
chi_stat = ((len(near_threshold) - expected_near) ** 2) / expected_near
print(f"Chi-square statistic: {chi_stat:.2f}")
</code></pre>
<h2 id="control-matrix"><a class="header" href="#control-matrix">Control Matrix</a></h2>
<h3 id="generate-racm"><a class="header" href="#generate-racm">Generate RACM</a></h3>
<pre><code class="language-python"># Risk and Control Matrix
controls = pd.read_csv('output/controls/internal_controls.csv')
mappings = pd.read_csv('output/controls/control_account_mappings.csv')

racm = controls.merge(mappings, on='control_id')
racm = racm[[
    'control_id', 'name', 'control_type', 'frequency',
    'account_number', 'assertions'
]]

# Add testing results
racm['population'] = racm['account_number'].apply(
    lambda x: len(entries[entries['account_number'] == x])
)
racm['exceptions'] = racm['control_id'].apply(
    lambda x: len(entries[
        (entries['control_ids'].str.contains(x)) &amp;
        (entries['is_anomaly'] == True)
    ])
)
racm['exception_rate'] = racm['exceptions'] / racm['population']

print(racm)
</code></pre>
<h2 id="test-documentation"><a class="header" href="#test-documentation">Test Documentation</a></h2>
<h3 id="control-test-template"><a class="header" href="#control-test-template">Control Test Template</a></h3>
<pre><code class="language-python">def document_control_test(control_id, entries, sample_size=25):
    """Generate control test documentation."""
    control = controls[controls['control_id'] == control_id].iloc[0]

    # Get population
    population = entries[entries['control_ids'].str.contains(control_id)]

    # Sample
    sample = population.sample(n=min(sample_size, len(population)), random_state=42)

    # Test results
    exceptions = sample[sample['is_anomaly'] == True]

    return {
        'control_id': control_id,
        'control_name': control['name'],
        'control_type': control['control_type'],
        'frequency': control['frequency'],
        'population_size': len(population),
        'sample_size': len(sample),
        'exceptions_found': len(exceptions),
        'exception_rate': len(exceptions) / len(sample),
        'conclusion': 'Effective' if len(exceptions) == 0 else 'Exception Noted'
    }

# Test all controls
results = []
for control_id in controls['control_id']:
    result = document_control_test(control_id, entries)
    results.append(result)

test_results = pd.DataFrame(results)
test_results.to_csv('control_test_results.csv', index=False)
</code></pre>
<h2 id="deficiency-assessment"><a class="header" href="#deficiency-assessment">Deficiency Assessment</a></h2>
<pre><code class="language-python"># Classify deficiencies
def assess_deficiency(exception_rate, amount_impact):
    if exception_rate &gt; 0.10 or amount_impact &gt; 1000000:
        return 'Material Weakness'
    elif exception_rate &gt; 0.05 or amount_impact &gt; 100000:
        return 'Significant Deficiency'
    elif exception_rate &gt; 0:
        return 'Control Deficiency'
    return 'No Deficiency'

test_results['amount_impact'] = test_results['control_id'].apply(
    lambda x: entries[
        (entries['control_ids'].str.contains(x)) &amp;
        (entries['is_anomaly'] == True)
    ]['debit_amount'].sum()
)

test_results['deficiency_classification'] = test_results.apply(
    lambda x: assess_deficiency(x['exception_rate'], x['amount_impact']),
    axis=1
)

print(test_results[['control_name', 'exception_rate', 'deficiency_classification']])
</code></pre>
<h2 id="see-also-45"><a class="header" href="#see-also-45">See Also</a></h2>
<ul>
<li><a href="#compliance-1">Compliance Configuration</a></li>
<li><a href="#audit-analytics-1">Audit Analytics</a></li>
<li><a href="#anomaly-injection-1">Anomaly Injection</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="process-mining-1"><a class="header" href="#process-mining-1">Process Mining</a></h1>
<p>Generate OCEL 2.0 event logs for process mining analysis.</p>
<h2 id="overview-26"><a class="header" href="#overview-26">Overview</a></h2>
<p>SyntheticData generates process mining data:</p>
<ul>
<li>OCEL 2.0 compliant event logs</li>
<li>P2P (Procure-to-Pay) process flows</li>
<li>O2C (Order-to-Cash) process flows</li>
<li>Object-centric relationships</li>
</ul>
<h2 id="configuration-19"><a class="header" href="#configuration-19">Configuration</a></h2>
<pre><code class="language-yaml">global:
  seed: 42
  industry: manufacturing
  start_date: 2024-01-01
  period_months: 6

transactions:
  target_count: 50000

document_flows:
  p2p:
    enabled: true
    flow_rate: 0.4
    completion_rate: 0.95

    stages:
      po_approval_rate: 0.9
      gr_rate: 0.98
      invoice_rate: 0.95
      payment_rate: 0.92

  o2c:
    enabled: true
    flow_rate: 0.4
    completion_rate: 0.90

    stages:
      so_approval_rate: 0.95
      credit_check_pass_rate: 0.9
      delivery_rate: 0.98
      invoice_rate: 0.95
      collection_rate: 0.85

master_data:
  vendors:
    count: 100
  customers:
    count: 200
  materials:
    count: 500
  employees:
    count: 30

output:
  format: csv
</code></pre>
<h2 id="ocel-20-export"><a class="header" href="#ocel-20-export">OCEL 2.0 Export</a></h2>
<p>Use the <code>synth-ocpm</code> crate for OCEL 2.0 export:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use synth_ocpm::{OcpmGenerator, Ocel2Exporter, ExportFormat};

let mut generator = OcpmGenerator::new(seed);
let event_log = generator.generate_event_log(
    p2p_count: 5000,
    o2c_count: 5000,
    start_date,
    end_date,
)?;

let exporter = Ocel2Exporter::new(ExportFormat::Json);
exporter.export(&amp;event_log, "output/ocel2.json")?;
<span class="boring">}</span></code></pre>
<h2 id="p2p-process"><a class="header" href="#p2p-process">P2P Process</a></h2>
<h3 id="event-sequence"><a class="header" href="#event-sequence">Event Sequence</a></h3>
<pre><code>Create PO → Approve PO → Release PO → Create GR → Post GR →
Receive Invoice → Verify Invoice → Post Invoice → Execute Payment
</code></pre>
<h3 id="objects"><a class="header" href="#objects">Objects</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Object Type</th><th>Attributes</th></tr>
</thead>
<tbody>
<tr><td>PurchaseOrder</td><td>po_number, vendor_id, total_amount</td></tr>
<tr><td>GoodsReceipt</td><td>gr_number, po_reference, quantity</td></tr>
<tr><td>VendorInvoice</td><td>invoice_number, amount, due_date</td></tr>
<tr><td>Payment</td><td>payment_number, amount, bank_ref</td></tr>
<tr><td>Material</td><td>material_id, description</td></tr>
<tr><td>Vendor</td><td>vendor_id, name</td></tr>
</tbody>
</table>
</div>
<h3 id="object-relationships"><a class="header" href="#object-relationships">Object Relationships</a></h3>
<pre><code>PurchaseOrder ─┬── contains ──→ Material
               └── from ──────→ Vendor

GoodsReceipt ──── for ──────→ PurchaseOrder

VendorInvoice ─── for ──────→ PurchaseOrder
               └── matches ──→ GoodsReceipt

Payment ───────── pays ──────→ VendorInvoice
</code></pre>
<h2 id="o2c-process"><a class="header" href="#o2c-process">O2C Process</a></h2>
<h3 id="event-sequence-1"><a class="header" href="#event-sequence-1">Event Sequence</a></h3>
<pre><code>Create SO → Check Credit → Release SO → Create Delivery →
Pick → Pack → Ship → Create Invoice → Post Invoice → Receive Payment
</code></pre>
<h3 id="objects-1"><a class="header" href="#objects-1">Objects</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Object Type</th><th>Attributes</th></tr>
</thead>
<tbody>
<tr><td>SalesOrder</td><td>so_number, customer_id, total_amount</td></tr>
<tr><td>Delivery</td><td>delivery_number, so_reference</td></tr>
<tr><td>CustomerInvoice</td><td>invoice_number, amount, due_date</td></tr>
<tr><td>CustomerPayment</td><td>receipt_number, amount</td></tr>
<tr><td>Material</td><td>material_id, description</td></tr>
<tr><td>Customer</td><td>customer_id, name</td></tr>
</tbody>
</table>
</div>
<h2 id="analysis-with-pm4py"><a class="header" href="#analysis-with-pm4py">Analysis with PM4Py</a></h2>
<h3 id="load-event-log"><a class="header" href="#load-event-log">Load Event Log</a></h3>
<pre><code class="language-python">from pm4py.objects.ocel.importer import jsonocel

# Load OCEL 2.0
ocel = jsonocel.apply("output/ocel2.json")

print(f"Events: {len(ocel.events)}")
print(f"Objects: {len(ocel.objects)}")
print(f"Object types: {ocel.object_types}")
</code></pre>
<h3 id="process-discovery"><a class="header" href="#process-discovery">Process Discovery</a></h3>
<pre><code class="language-python">from pm4py.algo.discovery.ocel import algorithm as ocel_discovery

# Discover object-centric Petri net
ocpn = ocel_discovery.apply(ocel)

# Visualize
from pm4py.visualization.ocel.ocpn import visualizer
gviz = visualizer.apply(ocpn)
visualizer.save(gviz, "ocpn.png")
</code></pre>
<h3 id="object-lifecycle-analysis"><a class="header" href="#object-lifecycle-analysis">Object Lifecycle Analysis</a></h3>
<pre><code class="language-python">from pm4py.statistics.ocel import object_lifecycle

# Analyze PurchaseOrder lifecycle
po_lifecycle = object_lifecycle.get_lifecycle_summary(
    ocel,
    object_type="PurchaseOrder"
)

print("Purchase Order Lifecycle:")
print(f"  Average duration: {po_lifecycle['avg_duration']}")
print(f"  Completion rate: {po_lifecycle['completion_rate']:.2%}")
</code></pre>
<h3 id="conformance-checking"><a class="header" href="#conformance-checking">Conformance Checking</a></h3>
<pre><code class="language-python">from pm4py.algo.conformance.ocel import algorithm as ocel_conformance

# Check conformance against expected model
results = ocel_conformance.apply(ocel, ocpn)

print(f"Conformant cases: {results['conformant']}")
print(f"Non-conformant: {results['non_conformant']}")
</code></pre>
<h2 id="process-metrics"><a class="header" href="#process-metrics">Process Metrics</a></h2>
<h3 id="throughput-time"><a class="header" href="#throughput-time">Throughput Time</a></h3>
<pre><code class="language-python">import pandas as pd
from datetime import timedelta

# Load events
events = pd.DataFrame(ocel.events)

# Calculate case durations
case_durations = events.groupby('case_id').agg({
    'timestamp': ['min', 'max']
})
case_durations['duration'] = (
    case_durations[('timestamp', 'max')] -
    case_durations[('timestamp', 'min')]
)

print(f"Mean throughput time: {case_durations['duration'].mean()}")
print(f"Median throughput time: {case_durations['duration'].median()}")
</code></pre>
<h3 id="activity-frequency"><a class="header" href="#activity-frequency">Activity Frequency</a></h3>
<pre><code class="language-python"># Count activity occurrences
activity_counts = events['activity'].value_counts()
print("Activity frequency:")
print(activity_counts)
</code></pre>
<h3 id="bottleneck-analysis"><a class="header" href="#bottleneck-analysis">Bottleneck Analysis</a></h3>
<pre><code class="language-python"># Calculate waiting times between activities
events = events.sort_values(['case_id', 'timestamp'])
events['wait_time'] = events.groupby('case_id')['timestamp'].diff()

# Find bottlenecks
bottlenecks = events.groupby('activity')['wait_time'].mean().sort_values(ascending=False)
print("Bottleneck activities:")
print(bottlenecks.head(5))
</code></pre>
<h2 id="variant-analysis"><a class="header" href="#variant-analysis">Variant Analysis</a></h2>
<pre><code class="language-python">from pm4py.algo.discovery.ocel import variants

# Get process variants
variant_stats = variants.get_variants_statistics(ocel)

print(f"Unique variants: {len(variant_stats)}")
print("\nTop variants:")
for variant, stats in sorted(variant_stats.items(), key=lambda x: -x[1]['count'])[:5]:
    print(f"  {variant}: {stats['count']} cases")
</code></pre>
<h2 id="integration-with-tools"><a class="header" href="#integration-with-tools">Integration with Tools</a></h2>
<h3 id="celonis"><a class="header" href="#celonis">Celonis</a></h3>
<pre><code class="language-python"># Export to Celonis format
from pm4py.objects.ocel.exporter import csv as ocel_csv_exporter

ocel_csv_exporter.apply(ocel, "output/celonis/")
# Upload CSV files to Celonis
</code></pre>
<h3 id="ocpa"><a class="header" href="#ocpa">OCPA</a></h3>
<pre><code class="language-python"># Export to OCPA format
from pm4py.objects.ocel.exporter import sqlite

sqlite.apply(ocel, "output/ocel.sqlite")
# Open in OCPA tool
</code></pre>
<h2 id="see-also-46"><a class="header" href="#see-also-46">See Also</a></h2>
<ul>
<li><a href="#document-flows-1">Document Flows</a></li>
<li><a href="#synth-ocpm">synth-ocpm Crate</a></li>
<li><a href="#audit-analytics-1">Audit Analytics</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="erp-load-testing"><a class="header" href="#erp-load-testing">ERP Load Testing</a></h1>
<p>Generate high-volume data for ERP system testing.</p>
<h2 id="overview-27"><a class="header" href="#overview-27">Overview</a></h2>
<p>SyntheticData generates realistic transaction volumes for:</p>
<ul>
<li>Load testing</li>
<li>Stress testing</li>
<li>Performance benchmarking</li>
<li>System integration testing</li>
</ul>
<h2 id="configuration-20"><a class="header" href="#configuration-20">Configuration</a></h2>
<h3 id="high-volume-generation"><a class="header" href="#high-volume-generation">High Volume Generation</a></h3>
<pre><code class="language-yaml">global:
  seed: 42
  industry: manufacturing
  start_date: 2024-01-01
  period_months: 12
  worker_threads: 8                  # Maximize parallelism

transactions:
  target_count: 1000000              # 1 million entries

  line_items:
    distribution: empirical

  amounts:
    min: 100
    max: 10000000
    distribution: log_normal

  sources:
    manual: 0.15
    automated: 0.65
    recurring: 0.15
    adjustment: 0.05

  temporal:
    month_end_spike: 2.5
    quarter_end_spike: 3.0
    year_end_spike: 4.0

document_flows:
  p2p:
    enabled: true
    flow_rate: 0.35
  o2c:
    enabled: true
    flow_rate: 0.35

master_data:
  vendors:
    count: 2000
  customers:
    count: 5000
  materials:
    count: 10000

output:
  format: csv
  compression: none                  # Fastest for import
</code></pre>
<h3 id="sap-acdoca-format"><a class="header" href="#sap-acdoca-format">SAP ACDOCA Format</a></h3>
<pre><code class="language-yaml">output:
  files:
    journal_entries: false
    acdoca: true                     # SAP Universal Journal format
</code></pre>
<h2 id="volume-sizing"><a class="header" href="#volume-sizing">Volume Sizing</a></h2>
<h3 id="transaction-volume-guidelines"><a class="header" href="#transaction-volume-guidelines">Transaction Volume Guidelines</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Company Size</th><th>Annual Entries</th><th>Per Day</th><th>Configuration</th></tr>
</thead>
<tbody>
<tr><td>Small</td><td>10,000</td><td>~30</td><td><code>target_count: 10000</code></td></tr>
<tr><td>Medium</td><td>100,000</td><td>~300</td><td><code>target_count: 100000</code></td></tr>
<tr><td>Large</td><td>1,000,000</td><td>~3,000</td><td><code>target_count: 1000000</code></td></tr>
<tr><td>Enterprise</td><td>10,000,000</td><td>~30,000</td><td><code>target_count: 10000000</code></td></tr>
</tbody>
</table>
</div>
<h3 id="master-data-guidelines"><a class="header" href="#master-data-guidelines">Master Data Guidelines</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Size</th><th>Vendors</th><th>Customers</th><th>Materials</th></tr>
</thead>
<tbody>
<tr><td>Small</td><td>100</td><td>200</td><td>500</td></tr>
<tr><td>Medium</td><td>500</td><td>1,000</td><td>5,000</td></tr>
<tr><td>Large</td><td>2,000</td><td>10,000</td><td>50,000</td></tr>
<tr><td>Enterprise</td><td>10,000</td><td>100,000</td><td>500,000</td></tr>
</tbody>
</table>
</div>
<h2 id="load-testing-scenarios"><a class="header" href="#load-testing-scenarios">Load Testing Scenarios</a></h2>
<h3 id="1-steady-state-load"><a class="header" href="#1-steady-state-load">1. Steady State Load</a></h3>
<p>Normal daily operation:</p>
<pre><code class="language-yaml">transactions:
  target_count: 100000

  temporal:
    month_end_spike: 1.0             # No spikes
    quarter_end_spike: 1.0
    year_end_spike: 1.0
    working_hours_only: true
</code></pre>
<h3 id="2-peak-period-load"><a class="header" href="#2-peak-period-load">2. Peak Period Load</a></h3>
<p>Month-end closing:</p>
<pre><code class="language-yaml">global:
  start_date: 2024-01-25
  period_months: 1                   # Focus on month-end

transactions:
  target_count: 50000

  temporal:
    month_end_spike: 5.0             # 5x normal volume
</code></pre>
<h3 id="3-year-end-stress"><a class="header" href="#3-year-end-stress">3. Year-End Stress</a></h3>
<p>Year-end closing simulation:</p>
<pre><code class="language-yaml">global:
  start_date: 2024-12-01
  period_months: 1

transactions:
  target_count: 200000

  temporal:
    month_end_spike: 3.0
    quarter_end_spike: 4.0
    year_end_spike: 10.0             # Extreme spike
</code></pre>
<h3 id="4-batch-import"><a class="header" href="#4-batch-import">4. Batch Import</a></h3>
<p>Large batch import testing:</p>
<pre><code class="language-yaml">transactions:
  target_count: 500000

  sources:
    automated: 1.0                   # All system-generated

output:
  compression: none                  # For fastest import
</code></pre>
<h2 id="performance-monitoring"><a class="header" href="#performance-monitoring">Performance Monitoring</a></h2>
<h3 id="generation-metrics"><a class="header" href="#generation-metrics">Generation Metrics</a></h3>
<pre><code class="language-bash"># Time generation
time synth-data generate --config config.yaml --output ./output

# Monitor memory
/usr/bin/time -v synth-data generate --config config.yaml --output ./output

# Watch progress
synth-data generate --config config.yaml --output ./output -v
</code></pre>
<h3 id="import-metrics"><a class="header" href="#import-metrics">Import Metrics</a></h3>
<p>Track these during ERP import:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Metric</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>Import rate</td><td>Records per second</td></tr>
<tr><td>Memory usage</td><td>Peak RAM during import</td></tr>
<tr><td>CPU utilization</td><td>Processor load</td></tr>
<tr><td>I/O throughput</td><td>Disk read/write speed</td></tr>
<tr><td>Lock contention</td><td>Database lock waits</td></tr>
</tbody>
</table>
</div>
<h2 id="data-import-strategies"><a class="header" href="#data-import-strategies">Data Import Strategies</a></h2>
<h3 id="sap-s4hana"><a class="header" href="#sap-s4hana">SAP S/4HANA</a></h3>
<pre><code class="language-bash"># Generate ACDOCA format
synth-data generate --config config.yaml --output ./output

# Use SAP Data Services or LSMW for import
# Output: output/transactions/acdoca.csv
</code></pre>
<h3 id="oracle-ebs"><a class="header" href="#oracle-ebs">Oracle EBS</a></h3>
<pre><code class="language-sql">-- Create staging table
CREATE TABLE XX_JE_STAGING (
    document_id VARCHAR2(36),
    posting_date DATE,
    account VARCHAR2(20),
    debit NUMBER,
    credit NUMBER
);

-- Load via SQL*Loader
LOAD DATA
INFILE 'journal_entries.csv'
INTO TABLE XX_JE_STAGING
FIELDS TERMINATED BY ','
</code></pre>
<h3 id="microsoft-dynamics"><a class="header" href="#microsoft-dynamics">Microsoft Dynamics</a></h3>
<pre><code class="language-powershell"># Use Data Management Framework
# Import journal_entries.csv via Data Entity
</code></pre>
<h2 id="validation-9"><a class="header" href="#validation-9">Validation</a></h2>
<h3 id="post-import-checks"><a class="header" href="#post-import-checks">Post-Import Checks</a></h3>
<pre><code class="language-sql">-- Verify record count
SELECT COUNT(*) FROM journal_entries;

-- Verify balance
SELECT SUM(debit) - SUM(credit) AS imbalance
FROM journal_entries;

-- Check date range
SELECT MIN(posting_date), MAX(posting_date)
FROM journal_entries;
</code></pre>
<h3 id="reconciliation"><a class="header" href="#reconciliation">Reconciliation</a></h3>
<pre><code class="language-python">import pandas as pd

# Compare source and target
source = pd.read_csv('output/transactions/journal_entries.csv')
target = pd.read_sql('SELECT * FROM journal_entries', connection)

# Verify counts
assert len(source) == len(target), "Record count mismatch"

# Verify totals
assert abs(source['debit_amount'].sum() - target['debit'].sum()) &lt; 0.01
</code></pre>
<h2 id="batch-processing"><a class="header" href="#batch-processing">Batch Processing</a></h2>
<h3 id="chunked-generation"><a class="header" href="#chunked-generation">Chunked Generation</a></h3>
<p>For very large volumes, generate in chunks:</p>
<pre><code class="language-bash"># Generate 10 batches of 1M each
for i in {1..10}; do
    synth-data generate \
        --config config.yaml \
        --output ./output/batch_$i \
        --seed $((42 + i))
done
</code></pre>
<h3 id="parallel-import"><a class="header" href="#parallel-import">Parallel Import</a></h3>
<pre><code class="language-bash"># Import chunks in parallel
for batch in ./output/batch_*; do
    import_job $batch &amp;
done
wait
</code></pre>
<h2 id="performance-tips-1"><a class="header" href="#performance-tips-1">Performance Tips</a></h2>
<h3 id="generation-speed"><a class="header" href="#generation-speed">Generation Speed</a></h3>
<ol>
<li><strong>Increase threads:</strong> <code>worker_threads: 16</code></li>
<li><strong>Disable unnecessary features:</strong> Turn off graph export, anomalies</li>
<li><strong>Use fast storage:</strong> NVMe SSD</li>
<li><strong>Reduce complexity:</strong> Smaller COA, fewer master records</li>
</ol>
<h3 id="import-speed"><a class="header" href="#import-speed">Import Speed</a></h3>
<ol>
<li><strong>Disable triggers:</strong> During bulk import</li>
<li><strong>Drop indexes:</strong> Recreate after import</li>
<li><strong>Increase batch size:</strong> Larger commits</li>
<li><strong>Parallel loading:</strong> Multiple import streams</li>
</ol>
<h2 id="see-also-47"><a class="header" href="#see-also-47">See Also</a></h2>
<ul>
<li><a href="#performance-tuning">Performance Tuning</a></li>
<li><a href="#output-formats-1">Output Formats</a></li>
<li><a href="configuration/README.html">Configuration</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="contributing"><a class="header" href="#contributing">Contributing</a></h1>
<p>Welcome to the SyntheticData contributor guide.</p>
<h2 id="overview-28"><a class="header" href="#overview-28">Overview</a></h2>
<p>SyntheticData is an open-source project and we welcome contributions from the community. This section covers everything you need to know to contribute effectively.</p>
<h2 id="ways-to-contribute"><a class="header" href="#ways-to-contribute">Ways to Contribute</a></h2>
<h3 id="code-contributions"><a class="header" href="#code-contributions">Code Contributions</a></h3>
<ul>
<li><strong>Bug fixes</strong>: Fix issues reported in the GitHub issue tracker</li>
<li><strong>New features</strong>: Implement new generators, output formats, or analysis tools</li>
<li><strong>Performance improvements</strong>: Optimize generation speed or memory usage</li>
<li><strong>Documentation</strong>: Improve or expand the documentation</li>
</ul>
<h3 id="non-code-contributions"><a class="header" href="#non-code-contributions">Non-Code Contributions</a></h3>
<ul>
<li><strong>Bug reports</strong>: Report issues with detailed reproduction steps</li>
<li><strong>Feature requests</strong>: Suggest new features or improvements</li>
<li><strong>Documentation feedback</strong>: Point out unclear or missing documentation</li>
<li><strong>Testing</strong>: Test pre-release versions and report issues</li>
</ul>
<h2 id="quick-start-3"><a class="header" href="#quick-start-3">Quick Start</a></h2>
<pre><code class="language-bash"># Fork and clone the repository
git clone https://github.com/YOUR_USERNAME/SyntheticData.git
cd SyntheticData

# Create a feature branch
git checkout -b feature/my-feature

# Make your changes and run tests
cargo test

# Submit a pull request
</code></pre>
<h2 id="contribution-guidelines"><a class="header" href="#contribution-guidelines">Contribution Guidelines</a></h2>
<h3 id="before-you-start"><a class="header" href="#before-you-start">Before You Start</a></h3>
<ol>
<li><strong>Check existing issues</strong>: Look for related issues or discussions</li>
<li><strong>Open an issue first</strong>: For significant changes, discuss before implementing</li>
<li><strong>Follow code style</strong>: Run <code>cargo fmt</code> and <code>cargo clippy</code></li>
<li><strong>Write tests</strong>: All new features need test coverage</li>
<li><strong>Update documentation</strong>: Keep docs in sync with code changes</li>
</ol>
<h3 id="code-of-conduct"><a class="header" href="#code-of-conduct">Code of Conduct</a></h3>
<p>We are committed to providing a welcoming and inclusive environment. Please:</p>
<ul>
<li>Be respectful and constructive in discussions</li>
<li>Focus on the technical merits of contributions</li>
<li>Help newcomers learn and contribute</li>
<li>Report unacceptable behavior to the maintainers</li>
</ul>
<h2 id="getting-help-1"><a class="header" href="#getting-help-1">Getting Help</a></h2>
<ul>
<li><strong>GitHub Issues</strong>: For bugs and feature requests</li>
<li><strong>GitHub Discussions</strong>: For questions and general discussion</li>
<li><strong>Pull Request Reviews</strong>: For feedback on your contributions</li>
</ul>
<h2 id="in-this-section"><a class="header" href="#in-this-section">In This Section</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Page</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><a href="#development-setup-1">Development Setup</a></td><td>Set up your development environment</td></tr>
<tr><td><a href="#code-style">Code Style</a></td><td>Coding standards and conventions</td></tr>
<tr><td><a href="#testing-2">Testing</a></td><td>Testing guidelines and practices</td></tr>
<tr><td><a href="#pull-requests">Pull Requests</a></td><td>PR submission and review process</td></tr>
</tbody>
</table>
</div>
<h2 id="license-1"><a class="header" href="#license-1">License</a></h2>
<p>By contributing to SyntheticData, you agree that your contributions will be licensed under the project’s MIT License.</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="development-setup-1"><a class="header" href="#development-setup-1">Development Setup</a></h1>
<p>Set up your local development environment for SyntheticData.</p>
<h2 id="prerequisites-6"><a class="header" href="#prerequisites-6">Prerequisites</a></h2>
<h3 id="required-1"><a class="header" href="#required-1">Required</a></h3>
<ul>
<li><strong>Rust</strong>: 1.75 or later (install via <a href="https://rustup.rs/">rustup</a>)</li>
<li><strong>Git</strong>: For version control</li>
<li><strong>Cargo</strong>: Included with Rust</li>
</ul>
<h3 id="optional-1"><a class="header" href="#optional-1">Optional</a></h3>
<ul>
<li><strong>Node.js 18+</strong>: For desktop UI development (synth-ui)</li>
<li><strong>Protocol Buffers</strong>: For gRPC development</li>
<li><strong>mdBook</strong>: For documentation development</li>
</ul>
<h2 id="installation-4"><a class="header" href="#installation-4">Installation</a></h2>
<h3 id="1-clone-the-repository"><a class="header" href="#1-clone-the-repository">1. Clone the Repository</a></h3>
<pre><code class="language-bash">git clone https://github.com/EY-ASU-RnD/SyntheticData.git
cd SyntheticData
</code></pre>
<h3 id="2-install-rust-toolchain"><a class="header" href="#2-install-rust-toolchain">2. Install Rust Toolchain</a></h3>
<pre><code class="language-bash"># Install rustup if not present
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh

# Install stable toolchain
rustup install stable
rustup default stable

# Add useful components
rustup component add clippy rustfmt
</code></pre>
<h3 id="3-build-the-project"><a class="header" href="#3-build-the-project">3. Build the Project</a></h3>
<pre><code class="language-bash"># Debug build (faster compilation)
cargo build

# Release build (optimized)
cargo build --release

# Check without building
cargo check
</code></pre>
<h3 id="4-run-tests"><a class="header" href="#4-run-tests">4. Run Tests</a></h3>
<pre><code class="language-bash"># Run all tests
cargo test

# Run tests with output
cargo test -- --nocapture

# Run specific crate tests
cargo test -p synth-core
cargo test -p synth-generators
</code></pre>
<h2 id="ide-setup"><a class="header" href="#ide-setup">IDE Setup</a></h2>
<h3 id="vs-code"><a class="header" href="#vs-code">VS Code</a></h3>
<p>Recommended extensions:</p>
<pre><code class="language-json">{
  "recommendations": [
    "rust-lang.rust-analyzer",
    "tamasfe.even-better-toml",
    "serayuzgur.crates",
    "vadimcn.vscode-lldb"
  ]
}
</code></pre>
<p>Settings for the project:</p>
<pre><code class="language-json">{
  "rust-analyzer.cargo.features": "all",
  "rust-analyzer.checkOnSave.command": "clippy",
  "editor.formatOnSave": true
}
</code></pre>
<h3 id="jetbrains-rustroverintellij"><a class="header" href="#jetbrains-rustroverintellij">JetBrains (RustRover/IntelliJ)</a></h3>
<ol>
<li>Install the Rust plugin</li>
<li>Open the project directory</li>
<li>Configure Cargo settings under Preferences &gt; Languages &amp; Frameworks &gt; Rust</li>
</ol>
<h2 id="desktop-ui-setup"><a class="header" href="#desktop-ui-setup">Desktop UI Setup</a></h2>
<p>For developing the Tauri/SvelteKit desktop UI:</p>
<pre><code class="language-bash"># Navigate to UI crate
cd crates/synth-ui

# Install Node.js dependencies
npm install

# Run development server
npm run dev

# Run Tauri desktop app
npm run tauri dev

# Build production
npm run build
</code></pre>
<h2 id="documentation-setup"><a class="header" href="#documentation-setup">Documentation Setup</a></h2>
<p>For working on documentation:</p>
<pre><code class="language-bash"># Install mdBook
cargo install mdbook

# Build documentation
cd docs
mdbook build

# Serve with live reload
mdbook serve --open

# Generate Rust API docs
cargo doc --workspace --no-deps --open
</code></pre>
<h2 id="project-structure-2"><a class="header" href="#project-structure-2">Project Structure</a></h2>
<pre><code>SyntheticData/
├── crates/
│   ├── synth-cli/          # CLI binary
│   ├── synth-core/         # Core models and traits
│   ├── synth-config/       # Configuration schema
│   ├── synth-generators/   # Data generators
│   ├── synth-output/       # Output sinks
│   ├── synth-graph/        # Graph export
│   ├── synth-runtime/      # Orchestration
│   ├── synth-server/       # REST/gRPC server
│   ├── synth-ui/           # Desktop UI
│   └── synth-ocpm/         # OCEL 2.0 export
├── benches/                # Benchmarks
├── docs/                   # Documentation
├── configs/                # Example configs
└── templates/              # Data templates
</code></pre>
<h2 id="environment-variables-3"><a class="header" href="#environment-variables-3">Environment Variables</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Variable</th><th>Description</th><th>Default</th></tr>
</thead>
<tbody>
<tr><td><code>RUST_LOG</code></td><td>Log level (trace, debug, info, warn, error)</td><td><code>info</code></td></tr>
<tr><td><code>SYNTH_CONFIG_PATH</code></td><td>Default config search path</td><td>Current directory</td></tr>
<tr><td><code>SYNTH_TEMPLATE_PATH</code></td><td>Template files location</td><td><code>./templates</code></td></tr>
</tbody>
</table>
</div>
<h2 id="debugging-1"><a class="header" href="#debugging-1">Debugging</a></h2>
<h3 id="vs-code-launch-configuration"><a class="header" href="#vs-code-launch-configuration">VS Code Launch Configuration</a></h3>
<pre><code class="language-json">{
  "version": "0.2.0",
  "configurations": [
    {
      "type": "lldb",
      "request": "launch",
      "name": "Debug CLI",
      "cargo": {
        "args": ["build", "--bin=synth-data", "--package=synth-cli"]
      },
      "args": ["generate", "--demo", "--output", "./output"],
      "cwd": "${workspaceFolder}"
    }
  ]
}
</code></pre>
<h3 id="logging-1"><a class="header" href="#logging-1">Logging</a></h3>
<p>Enable debug logging:</p>
<pre><code class="language-bash">RUST_LOG=debug cargo run --release -- generate --demo --output ./output
</code></pre>
<p>Module-specific logging:</p>
<pre><code class="language-bash">RUST_LOG=synth_generators=debug,synth_core=info cargo run ...
</code></pre>
<h2 id="common-issues-1"><a class="header" href="#common-issues-1">Common Issues</a></h2>
<h3 id="build-failures-1"><a class="header" href="#build-failures-1">Build Failures</a></h3>
<pre><code class="language-bash"># Clean and rebuild
cargo clean
cargo build

# Update dependencies
cargo update
</code></pre>
<h3 id="test-failures"><a class="header" href="#test-failures">Test Failures</a></h3>
<pre><code class="language-bash"># Run tests with backtrace
RUST_BACKTRACE=1 cargo test

# Run single test with output
cargo test test_name -- --nocapture
</code></pre>
<h3 id="memory-issues"><a class="header" href="#memory-issues">Memory Issues</a></h3>
<p>For large generation volumes, increase system limits:</p>
<pre><code class="language-bash"># Linux: Increase open file limit
ulimit -n 65536

# Check memory usage during generation
/usr/bin/time -v synth-data generate --config config.yaml --output ./output
</code></pre>
<h2 id="next-steps-5"><a class="header" href="#next-steps-5">Next Steps</a></h2>
<ul>
<li>Review <a href="#code-style">Code Style</a> guidelines</li>
<li>Read <a href="#testing-2">Testing</a> practices</li>
<li>Learn the <a href="#pull-requests">Pull Request</a> process</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="code-style"><a class="header" href="#code-style">Code Style</a></h1>
<p>Coding standards and conventions for SyntheticData.</p>
<h2 id="rust-style"><a class="header" href="#rust-style">Rust Style</a></h2>
<h3 id="formatting"><a class="header" href="#formatting">Formatting</a></h3>
<p>All code must be formatted with <code>rustfmt</code>:</p>
<pre><code class="language-bash"># Format all code
cargo fmt

# Check formatting without changes
cargo fmt --check
</code></pre>
<h3 id="linting"><a class="header" href="#linting">Linting</a></h3>
<p>Code must pass Clippy without warnings:</p>
<pre><code class="language-bash"># Run clippy
cargo clippy

# Run clippy with all features
cargo clippy --all-features

# Run clippy on all targets
cargo clippy --all-targets
</code></pre>
<h3 id="configuration-21"><a class="header" href="#configuration-21">Configuration</a></h3>
<p>The project uses these Clippy settings in <code>Cargo.toml</code>:</p>
<pre><code class="language-toml">[workspace.lints.clippy]
all = "warn"
pedantic = "warn"
nursery = "warn"
</code></pre>
<h2 id="naming-conventions"><a class="header" href="#naming-conventions">Naming Conventions</a></h2>
<h3 id="general-rules"><a class="header" href="#general-rules">General Rules</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Item</th><th>Convention</th><th>Example</th></tr>
</thead>
<tbody>
<tr><td>Types</td><td>PascalCase</td><td><code>JournalEntry</code>, <code>VendorGenerator</code></td></tr>
<tr><td>Functions</td><td>snake_case</td><td><code>generate_batch</code>, <code>parse_config</code></td></tr>
<tr><td>Variables</td><td>snake_case</td><td><code>entry_count</code>, <code>total_amount</code></td></tr>
<tr><td>Constants</td><td>SCREAMING_SNAKE_CASE</td><td><code>MAX_LINE_ITEMS</code>, <code>DEFAULT_SEED</code></td></tr>
<tr><td>Modules</td><td>snake_case</td><td><code>je_generator</code>, <code>document_flow</code></td></tr>
</tbody>
</table>
</div>
<h3 id="domain-specific-names"><a class="header" href="#domain-specific-names">Domain-Specific Names</a></h3>
<p>Use accounting domain terminology consistently:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Good - uses domain terms
struct JournalEntry { ... }
struct ChartOfAccounts { ... }
fn post_to_gl() { ... }

// Avoid - generic terms
struct Entry { ... }
struct AccountList { ... }
fn save_data() { ... }
<span class="boring">}</span></code></pre>
<h2 id="code-organization"><a class="header" href="#code-organization">Code Organization</a></h2>
<h3 id="module-structure-2"><a class="header" href="#module-structure-2">Module Structure</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// 1. Module documentation
//! Brief description of the module.
//!
//! Extended description with examples.

// 2. Imports (grouped and sorted)
use std::collections::HashMap;

use chrono::{NaiveDate, Utc};
use rust_decimal::Decimal;
use serde::{Deserialize, Serialize};

use crate::models::JournalEntry;

// 3. Constants
const DEFAULT_BATCH_SIZE: usize = 1000;

// 4. Type definitions
pub struct Generator { ... }

// 5. Trait implementations
impl Generator { ... }

// 6. Unit tests
#[cfg(test)]
mod tests { ... }
<span class="boring">}</span></code></pre>
<h3 id="import-organization"><a class="header" href="#import-organization">Import Organization</a></h3>
<p>Group imports in this order:</p>
<ol>
<li>Standard library (<code>std::</code>)</li>
<li>External crates (alphabetically)</li>
<li>Workspace crates (<code>synth_*</code>)</li>
<li>Current crate (<code>crate::</code>)</li>
</ol>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::collections::HashMap;
use std::sync::Arc;

use chrono::NaiveDate;
use rust_decimal::Decimal;
use serde::{Deserialize, Serialize};
use uuid::Uuid;

use synth_core::models::JournalEntry;
use synth_core::traits::Generator;

use crate::config::GeneratorConfig;
<span class="boring">}</span></code></pre>
<h2 id="documentation"><a class="header" href="#documentation">Documentation</a></h2>
<h3 id="public-api-documentation"><a class="header" href="#public-api-documentation">Public API Documentation</a></h3>
<p>All public items must have documentation:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// Generates journal entries with realistic financial patterns.
///
/// This generator produces balanced journal entries following
/// configurable statistical distributions for amounts, line counts,
/// and temporal patterns.
///
/// # Examples
///
/// ```
/// use synth_generators::JournalEntryGenerator;
///
/// let generator = JournalEntryGenerator::new(config, seed);
/// let entries = generator.generate_batch(1000)?;
/// ```
///
/// # Errors
///
/// Returns `GeneratorError` if:
/// - Configuration is invalid
/// - Memory limits are exceeded
pub struct JournalEntryGenerator { ... }
<span class="boring">}</span></code></pre>
<h3 id="module-documentation"><a class="header" href="#module-documentation">Module Documentation</a></h3>
<p>Each module should have a module-level doc comment:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>//! Journal Entry generation module.
//!
//! This module provides generators for creating realistic
//! journal entries with proper accounting rules enforcement.
//!
//! # Overview
//!
//! The main entry point is [`JournalEntryGenerator`], which
//! coordinates line item generation and balance verification.
<span class="boring">}</span></code></pre>
<h2 id="error-handling-2"><a class="header" href="#error-handling-2">Error Handling</a></h2>
<h3 id="error-types-2"><a class="header" href="#error-types-2">Error Types</a></h3>
<p>Use <code>thiserror</code> for error definitions:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use thiserror::Error;

#[derive(Debug, Error)]
pub enum GeneratorError {
    #[error("Invalid configuration: {0}")]
    InvalidConfig(String),

    #[error("Memory limit exceeded: used {used} bytes, limit {limit} bytes")]
    MemoryExceeded { used: usize, limit: usize },

    #[error("IO error: {0}")]
    Io(#[from] std::io::Error),
}
<span class="boring">}</span></code></pre>
<h3 id="result-types"><a class="header" href="#result-types">Result Types</a></h3>
<p>Define type aliases for common result types:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub type Result&lt;T&gt; = std::result::Result&lt;T, GeneratorError&gt;;
<span class="boring">}</span></code></pre>
<h3 id="error-propagation"><a class="header" href="#error-propagation">Error Propagation</a></h3>
<p>Use <code>?</code> for error propagation:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Good
fn process() -&gt; Result&lt;Data&gt; {
    let config = load_config()?;
    let data = generate_data(&amp;config)?;
    Ok(data)
}

// Avoid
fn process() -&gt; Result&lt;Data&gt; {
    let config = match load_config() {
        Ok(c) =&gt; c,
        Err(e) =&gt; return Err(e),
    };
    // ...
}
<span class="boring">}</span></code></pre>
<h2 id="financial-data"><a class="header" href="#financial-data">Financial Data</a></h2>
<h3 id="decimal-precision"><a class="header" href="#decimal-precision">Decimal Precision</a></h3>
<p>Always use <code>rust_decimal::Decimal</code> for financial amounts:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use rust_decimal::Decimal;
use rust_decimal_macros::dec;

// Good
let amount: Decimal = dec!(1234.56);

// Avoid - floating point
let amount: f64 = 1234.56;
<span class="boring">}</span></code></pre>
<h3 id="serialization"><a class="header" href="#serialization">Serialization</a></h3>
<p>Serialize decimals as strings to avoid precision loss:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[derive(Serialize, Deserialize)]
pub struct LineItem {
    #[serde(serialize_with = "serialize_decimal_as_string")]
    pub amount: Decimal,
}
<span class="boring">}</span></code></pre>
<h2 id="testing-1"><a class="header" href="#testing-1">Testing</a></h2>
<h3 id="test-organization"><a class="header" href="#test-organization">Test Organization</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[cfg(test)]
mod tests {
    use super::*;

    // Group related tests
    mod generation {
        use super::*;

        #[test]
        fn generates_balanced_entries() {
            // Arrange
            let config = test_config();
            let generator = Generator::new(config, 42);

            // Act
            let entries = generator.generate_batch(100).unwrap();

            // Assert
            for entry in entries {
                assert!(entry.is_balanced());
            }
        }
    }

    mod validation {
        // ...
    }
}
<span class="boring">}</span></code></pre>
<h3 id="test-naming"><a class="header" href="#test-naming">Test Naming</a></h3>
<p>Use descriptive test names:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Good - describes behavior
#[test]
fn rejects_unbalanced_entry() { ... }

#[test]
fn generates_benford_compliant_amounts() { ... }

// Avoid - vague names
#[test]
fn test_1() { ... }

#[test]
fn it_works() { ... }
<span class="boring">}</span></code></pre>
<h2 id="performance-1"><a class="header" href="#performance-1">Performance</a></h2>
<h3 id="allocation"><a class="header" href="#allocation">Allocation</a></h3>
<p>Minimize allocations in hot paths:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Good - reuse buffer
let mut buffer = Vec::with_capacity(batch_size);
for _ in 0..batch_size {
    buffer.push(generate_entry()?);
}

// Avoid - reallocations
let mut buffer = Vec::new();
for _ in 0..batch_size {
    buffer.push(generate_entry()?);
}
<span class="boring">}</span></code></pre>
<h3 id="iterator-usage"><a class="header" href="#iterator-usage">Iterator Usage</a></h3>
<p>Prefer iterators over explicit loops:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Good
let total: Decimal = entries
    .iter()
    .map(|e| e.amount)
    .sum();

// Avoid
let mut total = Decimal::ZERO;
for entry in &amp;entries {
    total += entry.amount;
}
<span class="boring">}</span></code></pre>
<h2 id="see-also-48"><a class="header" href="#see-also-48">See Also</a></h2>
<ul>
<li><a href="#testing-2">Testing</a> - Testing guidelines</li>
<li><a href="#pull-requests">Pull Requests</a> - Submission process</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="testing-2"><a class="header" href="#testing-2">Testing</a></h1>
<p>Testing guidelines and practices for SyntheticData.</p>
<h2 id="running-tests-1"><a class="header" href="#running-tests-1">Running Tests</a></h2>
<h3 id="all-tests"><a class="header" href="#all-tests">All Tests</a></h3>
<pre><code class="language-bash"># Run all tests
cargo test

# Run with output displayed
cargo test -- --nocapture

# Run tests in parallel (default)
cargo test

# Run tests sequentially
cargo test -- --test-threads=1
</code></pre>
<h3 id="specific-tests"><a class="header" href="#specific-tests">Specific Tests</a></h3>
<pre><code class="language-bash"># Run tests for a specific crate
cargo test -p synth-core
cargo test -p synth-generators

# Run a single test by name
cargo test test_balanced_entry

# Run tests matching a pattern
cargo test benford
cargo test journal_entry
</code></pre>
<h3 id="test-output"><a class="header" href="#test-output">Test Output</a></h3>
<pre><code class="language-bash"># Show stdout/stderr from tests
cargo test -- --nocapture

# Show test timing
cargo test -- --show-output

# Run ignored tests
cargo test -- --ignored

# Run all tests including ignored
cargo test -- --include-ignored
</code></pre>
<h2 id="test-organization-1"><a class="header" href="#test-organization-1">Test Organization</a></h2>
<h3 id="unit-tests"><a class="header" href="#unit-tests">Unit Tests</a></h3>
<p>Place unit tests in the same file as the code:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// src/generators/je_generator.rs

pub struct JournalEntryGenerator { ... }

impl JournalEntryGenerator {
    pub fn generate(&amp;self) -&gt; Result&lt;JournalEntry&gt; { ... }
}

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn generates_balanced_entry() {
        let generator = JournalEntryGenerator::new(test_config(), 42);
        let entry = generator.generate().unwrap();
        assert!(entry.is_balanced());
    }
}
<span class="boring">}</span></code></pre>
<h3 id="integration-tests"><a class="header" href="#integration-tests">Integration Tests</a></h3>
<p>Place integration tests in the <code>tests/</code> directory:</p>
<pre><code>crates/synth-generators/
├── src/
│   └── ...
└── tests/
    ├── generation_flow.rs
    └── document_chains.rs
</code></pre>
<h3 id="test-modules"><a class="header" href="#test-modules">Test Modules</a></h3>
<p>Group related tests in submodules:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[cfg(test)]
mod tests {
    mod generation {
        use super::super::*;

        #[test]
        fn batch_generation() { ... }

        #[test]
        fn streaming_generation() { ... }
    }

    mod validation {
        use super::super::*;

        #[test]
        fn rejects_invalid_config() { ... }
    }
}
<span class="boring">}</span></code></pre>
<h2 id="test-patterns"><a class="header" href="#test-patterns">Test Patterns</a></h2>
<h3 id="arrange-act-assert"><a class="header" href="#arrange-act-assert">Arrange-Act-Assert</a></h3>
<p>Use the AAA pattern for test structure:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[test]
fn calculates_correct_total() {
    // Arrange
    let entries = vec![
        create_entry(dec!(100.00)),
        create_entry(dec!(200.00)),
        create_entry(dec!(300.00)),
    ];

    // Act
    let total = calculate_total(&amp;entries);

    // Assert
    assert_eq!(total, dec!(600.00));
}
<span class="boring">}</span></code></pre>
<h3 id="test-fixtures"><a class="header" href="#test-fixtures">Test Fixtures</a></h3>
<p>Create helper functions for common test data:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[cfg(test)]
mod tests {
    use super::*;

    fn test_config() -&gt; GeneratorConfig {
        GeneratorConfig {
            seed: 42,
            batch_size: 100,
            ..Default::default()
        }
    }

    fn create_test_entry() -&gt; JournalEntry {
        JournalEntryBuilder::new()
            .with_company("1000")
            .with_date(NaiveDate::from_ymd_opt(2024, 1, 15).unwrap())
            .add_line(Account::CASH, dec!(1000.00), Decimal::ZERO)
            .add_line(Account::REVENUE, Decimal::ZERO, dec!(1000.00))
            .build()
            .unwrap()
    }
}
<span class="boring">}</span></code></pre>
<h3 id="deterministic-testing"><a class="header" href="#deterministic-testing">Deterministic Testing</a></h3>
<p>Use fixed seeds for reproducibility:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[test]
fn deterministic_generation() {
    let seed = 42;

    let gen1 = Generator::new(config.clone(), seed);
    let gen2 = Generator::new(config.clone(), seed);

    let result1 = gen1.generate_batch(100).unwrap();
    let result2 = gen2.generate_batch(100).unwrap();

    assert_eq!(result1, result2);
}
<span class="boring">}</span></code></pre>
<h3 id="property-based-testing"><a class="header" href="#property-based-testing">Property-Based Testing</a></h3>
<p>Use <code>proptest</code> for property-based tests:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use proptest::prelude::*;

proptest! {
    #[test]
    fn entries_are_always_balanced(
        debit in 1u64..1_000_000,
        line_count in 2usize..10,
    ) {
        let entry = generate_entry(debit, line_count);
        prop_assert!(entry.is_balanced());
    }
}
<span class="boring">}</span></code></pre>
<h2 id="domain-specific-tests"><a class="header" href="#domain-specific-tests">Domain-Specific Tests</a></h2>
<h3 id="balance-verification"><a class="header" href="#balance-verification">Balance Verification</a></h3>
<p>Test that journal entries are balanced:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[test]
fn entry_debits_equal_credits() {
    let entry = generate_test_entry();

    let total_debits: Decimal = entry.lines
        .iter()
        .map(|l| l.debit_amount)
        .sum();

    let total_credits: Decimal = entry.lines
        .iter()
        .map(|l| l.credit_amount)
        .sum();

    assert_eq!(total_debits, total_credits);
}
<span class="boring">}</span></code></pre>
<h3 id="benfords-law-1"><a class="header" href="#benfords-law-1">Benford’s Law</a></h3>
<p>Test amount distribution compliance:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[test]
fn amounts_follow_benford() {
    let entries = generate_entries(10_000);
    let first_digits = extract_first_digits(&amp;entries);

    let observed = calculate_distribution(&amp;first_digits);
    let expected = benford_distribution();

    let chi_square = calculate_chi_square(&amp;observed, &amp;expected);
    assert!(chi_square &lt; 15.51, "Distribution deviates from Benford's Law");
}
<span class="boring">}</span></code></pre>
<h3 id="document-chain-integrity-1"><a class="header" href="#document-chain-integrity-1">Document Chain Integrity</a></h3>
<p>Test document reference chains:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[test]
fn p2p_chain_is_complete() {
    let documents = generate_p2p_flow();

    // Verify chain: PO -&gt; GR -&gt; Invoice -&gt; Payment
    let po = &amp;documents.purchase_order;
    let gr = &amp;documents.goods_receipt;
    let invoice = &amp;documents.vendor_invoice;
    let payment = &amp;documents.payment;

    assert_eq!(gr.po_reference, Some(po.po_number.clone()));
    assert_eq!(invoice.po_reference, Some(po.po_number.clone()));
    assert_eq!(payment.invoice_reference, Some(invoice.invoice_number.clone()));
}
<span class="boring">}</span></code></pre>
<h3 id="decimal-precision-1"><a class="header" href="#decimal-precision-1">Decimal Precision</a></h3>
<p>Test that decimal values maintain precision:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[test]
fn decimal_precision_preserved() {
    let original = dec!(1234.5678);

    // Serialize and deserialize
    let json = serde_json::to_string(&amp;original).unwrap();
    let restored: Decimal = serde_json::from_str(&amp;json).unwrap();

    assert_eq!(original, restored);
}
<span class="boring">}</span></code></pre>
<h2 id="benchmarks"><a class="header" href="#benchmarks">Benchmarks</a></h2>
<h3 id="running-benchmarks-1"><a class="header" href="#running-benchmarks-1">Running Benchmarks</a></h3>
<pre><code class="language-bash"># Run all benchmarks
cargo bench

# Run specific benchmark
cargo bench --bench generation_throughput

# Run benchmark with specific filter
cargo bench -- batch_generation
</code></pre>
<h3 id="writing-benchmarks"><a class="header" href="#writing-benchmarks">Writing Benchmarks</a></h3>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use criterion::{criterion_group, criterion_main, Criterion, BenchmarkId};

fn generation_benchmark(c: &amp;mut Criterion) {
    let config = test_config();

    c.bench_function("generate_1000_entries", |b| {
        b.iter(|| {
            let generator = Generator::new(config.clone(), 42);
            generator.generate_batch(1000).unwrap()
        })
    });
}

fn scaling_benchmark(c: &amp;mut Criterion) {
    let config = test_config();
    let mut group = c.benchmark_group("scaling");

    for size in [100, 1000, 10000].iter() {
        group.bench_with_input(
            BenchmarkId::from_parameter(size),
            size,
            |b, &amp;size| {
                b.iter(|| {
                    let generator = Generator::new(config.clone(), 42);
                    generator.generate_batch(size).unwrap()
                })
            },
        );
    }
    group.finish();
}

criterion_group!(benches, generation_benchmark, scaling_benchmark);
criterion_main!(benches);
<span class="boring">}</span></code></pre>
<h2 id="test-coverage"><a class="header" href="#test-coverage">Test Coverage</a></h2>
<h3 id="measuring-coverage"><a class="header" href="#measuring-coverage">Measuring Coverage</a></h3>
<pre><code class="language-bash"># Install coverage tool
cargo install cargo-tarpaulin

# Run with coverage
cargo tarpaulin --out Html

# View report
open tarpaulin-report.html
</code></pre>
<h3 id="coverage-guidelines"><a class="header" href="#coverage-guidelines">Coverage Guidelines</a></h3>
<ul>
<li>Aim for 80%+ coverage on core logic</li>
<li>100% coverage on public API</li>
<li>Focus on behavior, not lines</li>
<li>Don’t test trivial getters/setters</li>
</ul>
<h2 id="continuous-integration"><a class="header" href="#continuous-integration">Continuous Integration</a></h2>
<p>Tests run automatically on:</p>
<ul>
<li>Pull request creation</li>
<li>Push to main branch</li>
<li>Nightly scheduled runs</li>
</ul>
<h3 id="ci-test-matrix"><a class="header" href="#ci-test-matrix">CI Test Matrix</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Test Type</th><th>Trigger</th><th>Platform</th></tr>
</thead>
<tbody>
<tr><td>Unit tests</td><td>All PRs</td><td>Linux, macOS, Windows</td></tr>
<tr><td>Integration tests</td><td>All PRs</td><td>Linux</td></tr>
<tr><td>Benchmarks</td><td>Main branch</td><td>Linux</td></tr>
<tr><td>Coverage</td><td>Weekly</td><td>Linux</td></tr>
</tbody>
</table>
</div>
<h2 id="see-also-49"><a class="header" href="#see-also-49">See Also</a></h2>
<ul>
<li><a href="#code-style">Code Style</a> - Coding standards</li>
<li><a href="#pull-requests">Pull Requests</a> - Submission process</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="pull-requests"><a class="header" href="#pull-requests">Pull Requests</a></h1>
<p>Guide to submitting and reviewing pull requests.</p>
<h2 id="before-you-start-1"><a class="header" href="#before-you-start-1">Before You Start</a></h2>
<h3 id="1-check-for-existing-work"><a class="header" href="#1-check-for-existing-work">1. Check for Existing Work</a></h3>
<ul>
<li>Search open issues for related discussions</li>
<li>Check open PRs for similar changes</li>
<li>Review the roadmap for planned features</li>
</ul>
<h3 id="2-open-an-issue-first"><a class="header" href="#2-open-an-issue-first">2. Open an Issue First</a></h3>
<p>For significant changes, open an issue to discuss:</p>
<ul>
<li>New features or major changes</li>
<li>Breaking changes to public API</li>
<li>Architectural changes</li>
<li>Performance improvements</li>
</ul>
<h3 id="3-create-a-branch"><a class="header" href="#3-create-a-branch">3. Create a Branch</a></h3>
<pre><code class="language-bash"># Sync with upstream
git checkout main
git pull origin main

# Create feature branch
git checkout -b feature/my-feature

# Or for bug fixes
git checkout -b fix/issue-123
</code></pre>
<h2 id="making-changes"><a class="header" href="#making-changes">Making Changes</a></h2>
<h3 id="1-write-code"><a class="header" href="#1-write-code">1. Write Code</a></h3>
<p>Follow the <a href="#code-style">Code Style</a> guidelines:</p>
<pre><code class="language-bash"># Format code
cargo fmt

# Run clippy
cargo clippy

# Run tests
cargo test
</code></pre>
<h3 id="2-write-tests"><a class="header" href="#2-write-tests">2. Write Tests</a></h3>
<p>Add tests for new functionality:</p>
<pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn new_feature_works() {
        // Test implementation
    }
}
<span class="boring">}</span></code></pre>
<h3 id="3-update-documentation"><a class="header" href="#3-update-documentation">3. Update Documentation</a></h3>
<ul>
<li>Update relevant docs in <code>docs/src/</code></li>
<li>Add/update rustdoc comments</li>
<li>Update CHANGELOG.md if applicable</li>
</ul>
<h3 id="4-commit-changes"><a class="header" href="#4-commit-changes">4. Commit Changes</a></h3>
<p>Write clear commit messages:</p>
<pre><code class="language-bash"># Good commit messages
git commit -m "Add Benford's Law validation to amount generator"
git commit -m "Fix off-by-one error in batch generation"
git commit -m "Improve memory efficiency in large volume generation"

# Avoid vague messages
git commit -m "Fix bug"
git commit -m "Update code"
git commit -m "WIP"
</code></pre>
<h3 id="commit-message-format"><a class="header" href="#commit-message-format">Commit Message Format</a></h3>
<pre><code>&lt;type&gt;: &lt;short summary&gt;

&lt;optional detailed description&gt;

&lt;optional footer&gt;
</code></pre>
<p>Types:</p>
<ul>
<li><code>feat</code>: New feature</li>
<li><code>fix</code>: Bug fix</li>
<li><code>docs</code>: Documentation only</li>
<li><code>refactor</code>: Code change without feature/fix</li>
<li><code>test</code>: Adding/updating tests</li>
<li><code>perf</code>: Performance improvement</li>
<li><code>chore</code>: Maintenance tasks</li>
</ul>
<h2 id="submitting-a-pr"><a class="header" href="#submitting-a-pr">Submitting a PR</a></h2>
<h3 id="1-push-your-branch"><a class="header" href="#1-push-your-branch">1. Push Your Branch</a></h3>
<pre><code class="language-bash">git push -u origin feature/my-feature
</code></pre>
<h3 id="2-create-pull-request"><a class="header" href="#2-create-pull-request">2. Create Pull Request</a></h3>
<p>Use the PR template:</p>
<pre><code class="language-markdown">## Summary

Brief description of changes.

## Changes

- Added X feature
- Fixed Y bug
- Updated Z documentation

## Testing

- [ ] Added unit tests
- [ ] Added integration tests
- [ ] Ran full test suite
- [ ] Tested manually

## Checklist

- [ ] Code follows project style guidelines
- [ ] Self-review completed
- [ ] Documentation updated
- [ ] Tests pass locally
- [ ] No new warnings from clippy
</code></pre>
<h3 id="3-pr-title-format"><a class="header" href="#3-pr-title-format">3. PR Title Format</a></h3>
<pre><code>&lt;type&gt;: &lt;short description&gt;
</code></pre>
<p>Examples:</p>
<ul>
<li><code>feat: Add OCEL 2.0 export format</code></li>
<li><code>fix: Correct decimal serialization in JSON output</code></li>
<li><code>docs: Add process mining use case guide</code></li>
</ul>
<h2 id="review-process"><a class="header" href="#review-process">Review Process</a></h2>
<h3 id="automated-checks"><a class="header" href="#automated-checks">Automated Checks</a></h3>
<p>All PRs must pass:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Check</th><th>Requirement</th></tr>
</thead>
<tbody>
<tr><td>Build</td><td>Compiles on all platforms</td></tr>
<tr><td>Tests</td><td>All tests pass</td></tr>
<tr><td>Formatting</td><td><code>cargo fmt --check</code> passes</td></tr>
<tr><td>Linting</td><td><code>cargo clippy</code> has no warnings</td></tr>
<tr><td>Documentation</td><td>Builds without errors</td></tr>
</tbody>
</table>
</div>
<h3 id="code-review"><a class="header" href="#code-review">Code Review</a></h3>
<p>Reviewers will check:</p>
<ol>
<li><strong>Correctness</strong>: Does the code do what it claims?</li>
<li><strong>Tests</strong>: Are changes adequately tested?</li>
<li><strong>Style</strong>: Does code follow conventions?</li>
<li><strong>Documentation</strong>: Are changes documented?</li>
<li><strong>Performance</strong>: Any performance implications?</li>
</ol>
<h3 id="responding-to-feedback"><a class="header" href="#responding-to-feedback">Responding to Feedback</a></h3>
<ul>
<li>Address all comments</li>
<li>Push fixes as new commits (don’t force-push during review)</li>
<li>Mark resolved conversations</li>
<li>Ask for clarification if needed</li>
</ul>
<h2 id="merging"><a class="header" href="#merging">Merging</a></h2>
<h3 id="requirements"><a class="header" href="#requirements">Requirements</a></h3>
<p>Before merging:</p>
<ul>
<li>All CI checks pass</li>
<li>At least one approving review</li>
<li>No unresolved conversations</li>
<li>Branch is up to date with main</li>
</ul>
<h3 id="merge-strategy"><a class="header" href="#merge-strategy">Merge Strategy</a></h3>
<p>We use <strong>squash and merge</strong> for most PRs:</p>
<ul>
<li>Combines all commits into one</li>
<li>Keeps main history clean</li>
<li>Preserves full history in PR</li>
</ul>
<h3 id="after-merge"><a class="header" href="#after-merge">After Merge</a></h3>
<ul>
<li>Delete your feature branch</li>
<li>Update local main:</li>
</ul>
<pre><code class="language-bash">git checkout main
git pull origin main
git branch -d feature/my-feature
</code></pre>
<h2 id="special-cases"><a class="header" href="#special-cases">Special Cases</a></h2>
<h3 id="breaking-changes"><a class="header" href="#breaking-changes">Breaking Changes</a></h3>
<p>For breaking changes:</p>
<ol>
<li>Open an issue for discussion first</li>
<li>Document migration path</li>
<li>Update CHANGELOG with breaking change notice</li>
<li>Use <code>BREAKING CHANGE:</code> in commit footer</li>
</ol>
<h3 id="large-prs"><a class="header" href="#large-prs">Large PRs</a></h3>
<p>For large changes:</p>
<ol>
<li>Consider splitting into smaller PRs</li>
<li>Create a tracking issue</li>
<li>Use feature flags if needed</li>
<li>Provide detailed documentation</li>
</ol>
<h3 id="security-issues"><a class="header" href="#security-issues">Security Issues</a></h3>
<p>For security vulnerabilities:</p>
<ol>
<li><strong>Do not</strong> open a public issue</li>
<li>Contact maintainers directly</li>
<li>Follow responsible disclosure</li>
</ol>
<h2 id="pr-templates"><a class="header" href="#pr-templates">PR Templates</a></h2>
<h3 id="feature-pr"><a class="header" href="#feature-pr">Feature PR</a></h3>
<pre><code class="language-markdown">## Summary

Adds [feature] to support [use case].

## Motivation

[Why is this needed?]

## Changes

- Added `NewType` struct in `synth-core`
- Implemented `NewGenerator` in `synth-generators`
- Added configuration options in `synth-config`
- Updated CLI to support new feature

## Testing

- Added unit tests for `NewType`
- Added integration tests for generation flow
- Manual testing with sample configs

## Documentation

- Added user guide section
- Updated configuration reference
- Added example configuration
</code></pre>
<h3 id="bug-fix-pr"><a class="header" href="#bug-fix-pr">Bug Fix PR</a></h3>
<pre><code class="language-markdown">## Summary

Fixes #123 - [brief description]

## Root Cause

[What caused the bug?]

## Solution

[How does this fix it?]

## Testing

- Added regression test
- Verified fix with reproduction steps from issue
- Ran full test suite

## Checklist

- [ ] Regression test added
- [ ] Root cause documented
- [ ] Related issues linked
</code></pre>
<h2 id="see-also-50"><a class="header" href="#see-also-50">See Also</a></h2>
<ul>
<li><a href="#development-setup-1">Development Setup</a> - Environment setup</li>
<li><a href="#code-style">Code Style</a> - Coding standards</li>
<li><a href="#testing-2">Testing</a> - Testing guidelines</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr-ef4e11c1.min.js"></script>
        <script src="mark-09e88c2c.min.js"></script>
        <script src="searcher-c2a407aa.js"></script>

        <script src="clipboard-1626706a.min.js"></script>
        <script src="highlight-abc7f01d.js"></script>
        <script src="book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>


    </div>
    </body>
</html>
